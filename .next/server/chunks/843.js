"use strict";exports.id=843,exports.ids=[843],exports.modules={13224:(a,b,c)=>{let d,e,f;c.r(b),c.d(b,{default:()=>fX});var g,h,i,j,k,l,m,n,o=c(21124),p=c(84864),q=c(75229),r=c(38301),s=c(23312);let t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/_key\s*==\s*['"](.*)['"]/,v=/^\d*:\d*$/;function w(a){return"number"==typeof a||"string"==typeof a&&/^\[\d+\]$/.test(a)}function x(a){return"string"==typeof a?u.test(a.trim()):"object"==typeof a&&"_key"in a}function y(a){if("string"==typeof a&&v.test(a))return!0;if(!Array.isArray(a)||2!==a.length)return!1;let[b,c]=a;return("number"==typeof b||""===b)&&("number"==typeof c||""===c)}function z(a){if(!Array.isArray(a))throw Error("Path is not an array");return a.reduce((a,b,c)=>{let d=typeof b;if("number"===d)return`${a}[${b}]`;if("string"===d)return`${a}${0===c?"":"."}${b}`;if(x(b)&&b._key)return`${a}[_key=="${b._key}"]`;if(Array.isArray(b)){let[c,d]=b;return`${a}[${c}:${d}]`}throw Error(`Unsupported path segment \`${JSON.stringify(b)}\``)},"")}function A(a){if("string"!=typeof a)throw Error("Path is not a string");let b=a.match(t);if(!b)throw Error("Invalid path string");return b.map(B)}function B(a){return w(a)?Number(a.replace(/[^\d]/g,"")):x(a)?{_key:a.match(u)[1]}:y(a)?function(a){let[b,c]=a.split(":").map(a=>""===a?a:Number(a));return[b,c]}(a):a}var C=Object.freeze({__proto__:null,fromString:A,get:function(a,b,c){let d="string"==typeof b?A(b):b;if(!Array.isArray(d))throw Error("Path must be an array or a string");let e=a;for(let a=0;a<d.length;a++){let b=d[a];if(w(b)){if(!Array.isArray(e))return c;e=e[b]}if(x(b)){if(!Array.isArray(e))return c;e=e.find(a=>a._key===b._key)}if("string"==typeof b&&(e="object"==typeof e&&null!==e?e[b]:void 0),typeof e>"u")return c}return e},isIndexSegment:w,isIndexTuple:y,isKeySegment:x,reKeySegment:u,toString:z});let D="drafts.";function E(a){return a.startsWith(D)}function F(a){return a.startsWith("versions.")}function G(a){return F(a)?D+H(a):E(a)?a:D+a}function H(a){return F(a)?a.split(".").slice(2).join("."):E(a)?a.slice(D.length):a}var I=c(4339),J=c(4766);function K(a){return a.split(/[[.\]]/g).filter(Boolean).map(a=>{var b;return a.includes("==")?function(a){let[b,c]=a.split("==");if("_key"!==b)throw Error(`Currently only "_key" is supported as path segment. Found ${b}`);if(typeof c>"u")throw Error('Invalid path segment, expected `key=="value"`');return{_key:c.replace(/^['"]/,"").replace(/['"]$/,"")}}(a):L.test(b=a)?Number(b):b})}let L=/^-?\d+$/;function M(a){return"string"==typeof a?._key}function N(a){return"object"==typeof a&&"_key"in a&&"string"==typeof a._key}function O(a){return"number"==typeof a||N(a)}let P=/^[a-z_$]+/;function Q(a){return a.map((a,b)=>{var c;return c=0===b,Array.isArray(a)?`[${a[0]}:${a[1]||""}]`:"number"==typeof a?`[${a}]`:N(a)?`[_key==${JSON.stringify(a._key)}]`:"string"==typeof a&&P.test(a)?c?a:`.${a}`:`['${a}']`}).join("")}function R(a){if("createIfNotExists"in a)return{type:"createIfNotExists",document:a.createIfNotExists};if("createOrReplace"in a)return{type:"createOrReplace",document:a.createOrReplace};if("create"in a)return{type:"create",document:a.create};if("delete"in a)return{id:a.delete.id,type:"delete"};if("patch"in a){var b,c,d,e,f,g;return{type:"patch",id:a.patch.id,patches:[..."set"in(c=b=a.patch)?Object.keys(c.set).map(a=>({path:K(a),op:{type:"set",value:c.set[a]}})):[],..."setIfMissing"in(d=b)?Object.keys(d.setIfMissing).map(a=>({path:K(a),op:{type:"setIfMissing",value:d.setIfMissing[a]}})):[],..."unset"in(e=b)?e.unset.map(a=>({path:K(a),op:{type:"unset"}})):[],..."inc"in(f=b)?Object.keys(f.inc).map(a=>({path:K(a),op:{type:"inc",amount:f.inc[a]}})):[],..."inc"in(g=b)?Object.keys(g.dec).map(a=>({path:K(a),op:{type:"dec",amount:g.dec[a]}})):[],...function(a){if(!("insert"in a))return[];let b=function(a){let b=S.filter(b=>b in a);if(b.length>1)throw Error(`Insert patch is ambiguous. Should only contain one of: ${S.join(", ")}, instead found ${b.join(", ")}`);return b[0]}(a.insert);if(!b)throw Error("Insert patch missing position");let c=K(a.insert[b]),d=c.pop();return[{path:c,op:{type:"insert",position:b,referenceItem:d,items:a.insert.items}}]}(b)]}}throw Error(`Unknown mutation: ${JSON.stringify(a)}`)}let S=["before","replace","after"];function T(a){return W(a)}function U(a){return a.flatMap(T)}function V(a){return{transactionId:a.id,mutations:U(a.mutations)}}function W(a){if("create"===a.type||"createIfNotExists"===a.type||"createOrReplace"===a.type)return{[a.type]:a.document};if("delete"===a.type)return{delete:{id:a.id}};let b=a.options?.ifRevision;return a.patches.map(c=>({patch:{id:a.id,...b&&{ifRevisionID:b},...function(a){let{path:b,op:c}=a;if("unset"===c.type)return{unset:[Q(b)]};if("insert"===c.type)return{insert:{[c.position]:Q([...b,c.referenceItem]),items:c.items}};if("diffMatchPatch"===c.type)return{diffMatchPatch:{[Q(b)]:c.value}};if("inc"===c.type)return{inc:{[Q(b)]:c.amount}};if("dec"===c.type)return{dec:{[Q(b)]:c.amount}};if("set"===c.type||"setIfMissing"===c.type)return{[c.type]:{[Q(b)]:c.value}};if("truncate"===c.type){let a=[c.startIndex,"number"==typeof c.endIndex?c.endIndex:""].join(":");return{unset:[`${Q(b)}[${a}]`]}}if("upsert"===c.type)return{unset:c.items.map(a=>Q([...b,{_key:a._key}])),insert:{[c.position]:Q([...b,c.referenceItem]),items:c.items}};if("assign"===c.type)return{set:Object.fromEntries(Object.keys(c.value).map(a=>[Q(b.concat(a)),c.value[a]]))};if("unassign"===c.type)return{unset:c.keys.map(a=>Q(b.concat(a)))};if("replace"===c.type)return{insert:{replace:Q(b.concat(c.referenceItem)),items:c.items}};if("remove"===c.type)return{unset:[Q(b.concat(c.referenceItem))]};throw Error(`Unknown operation type ${c.type}`)}(c)}}))}function X(a){return Array.isArray(a)?a:[a]}var Y=Object.freeze({__proto__:null,decode:function(a){return R(a)},decodeAll:function(a){return a.map(R)},encode:T,encodeAll:U,encodeMutation:W,encodeTransaction:V});function Z(a,b,c){return{type:"insert",referenceItem:c,position:b,items:X(a)}}function $(a,b){return{type:"truncate",startIndex:a,endIndex:b}}function _(a){return{type:"remove",referenceItem:a}}function aa(a,b){return{path:"string"==typeof a?K(a):a,op:b}}var ab=c(23911);let ac=(0,ab.H6)(),ad=ac,ae=new Set;var af=c(21405);let ag=/_key\s*==\s*['"](.*)['"]/,ah=/^\d*:\d*$/;function ai(a){return"number"==typeof a||"string"==typeof a&&/^\[\d+\]$/.test(a)}function aj(a){return"string"==typeof a?ag.test(a.trim()):"object"==typeof a&&"_key"in a}let ak=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,al=/_key\s*==\s*['"](.*)['"]/;function am(a,b,c){let d="string"==typeof b?function(a){if("string"!=typeof a)throw Error("Path is not a string");let b=a.match(ak);if(!b)throw Error("Invalid path string");return b.map(an)}(b):b;if(!Array.isArray(d))throw Error("Path must be an array or a string");let e=a;for(let a=0;a<d.length;a++){let b=d[a];if(ai(b)){if(!Array.isArray(e))return c;e=e[b]}if(aj(b)){if(!Array.isArray(e))return c;e=e.find(a=>a._key===b._key)}if("string"==typeof b&&(e="object"==typeof e&&null!==e?e[b]:void 0),typeof e>"u")return c}return e}function an(a){return ai(a)?Number(a.replace(/[^\d]/g,"")):aj(a)?{_key:a.match(al)[1]}:!function(a){if("string"==typeof a&&ah.test(a))return!0;if(!Array.isArray(a)||2!==a.length)return!1;let[b,c]=a;return("number"==typeof b||""===b)&&("number"==typeof c||""===c)}(a)?a:function(a){let[b,c]=a.split(":").map(a=>""===a?a:Number(a));return[b,c]}(a)}function ao(){return(0,r.useSyncExternalStore)(ar,aq,ap)}function ap(){return ac}function aq(){return ad}function ar(a){return ae.add(a),()=>ae.delete(a)}function as(a,b){let c;return(...d)=>{clearTimeout(c),c=setTimeout(()=>{a.apply(a,d)},b)}}function at(a,b){let c=(0,q.Fk)(),d=(0,q.v$)();if(b===ac||!c&&!d)throw Error("The `useDocuments` hook cannot be used in this context");let e=G(a),f=H(a),g=b.getSnapshot().context?.documents,h=g?.[e],i=g?.[f],j=h||i;if(!j)throw Error(`Document "${a}" not found`);let k=h.getSnapshot().context?.local||i.getSnapshot().context?.local,l=new Promise(a=>{if(k)a(k);else{let b=j.on("ready",c=>{let{snapshot:d}=c;a(d||null),b.unsubscribe()})}});return{draftDoc:h,draftId:e,getSnapshot:()=>l,publishedDoc:i,publishedId:f,get snapshot(){if(!k)throw Error(`Snapshot for document "${a}" not found`);return k}}}function au(){let a,b,c,d=(0,p.c)(7),e=ao();d[0]!==e?(a=a=>({id:a,commit:()=>{let{draftDoc:b}=at(a,e);b.send({type:"submit"})},get:b=>{let{snapshot:c}=at(a,e);return b?am(c,b):c},getSnapshot:function(a,b){let{getSnapshot:c}=at(a,b);return c}(a,e),patch:async(b,c)=>{let d=at(a,e),{draftDoc:f,draftId:g,getSnapshot:h,publishedId:i}=d,{commit:j=!0}=c||{},k=await ("function"==typeof b?b({draftId:g,publishedId:i,get snapshot(){return d.snapshot},getSnapshot:h}):b),l=await h();if(!l)throw Error(`Snapshot for document "${a}" not found`);f.send({type:"mutate",mutations:[{type:"createIfNotExists",document:{...l,_id:g}},{type:"patch",id:g,patches:X(k),...{}}]}),j&&("object"==typeof j&&"debounce"in j?as(()=>f.send({type:"submit"}),j.debounce)():f.send({type:"submit"}))}}),d[0]=e,d[1]=a):a=d[1];let f=a;d[2]!==e?(b=(a,b,c)=>{let{draftDoc:d}=at(a,e),{commit:f}=c||{},g=void 0===f||f;d.send({type:"mutate",mutations:b}),g&&("object"==typeof g&&"debounce"in g?as(()=>d.send({type:"submit"}),g.debounce)():d.send({type:"submit"}))},d[2]=e,d[3]=b):b=d[3];let g=b;return d[4]!==f||d[5]!==g?(c={getDocument:f,mutateDocument:g},d[4]=f,d[5]=g,d[6]=c):c=d[6],c}let av=(()=>{let a;return()=>{if(a)return a;a=[];for(let b=0;b<256;++b)a[b]=(b+256).toString(16).slice(1);return a}})();function aw(a){let b=av();return(function(a=16){let b=new Uint8Array(a);return(0,af.A)(b),b})(a).reduce((a,c)=>a+b[c],"").slice(0,a)}function ax(a){let b,c,d="string"==typeof a?a:a.path,e=d.lastIndexOf("."),f=d.substring(e+1,d.length);if(!f.indexOf("["))throw Error("Invalid path: not an array");let g=d.lastIndexOf("["),h=d.substring(0,g);if(f.includes("_key")){let a=f.indexOf('"')+1,d=f.indexOf('"',a);b=f.substring(a,d),c=!0}else{let a=f.indexOf("[")+1,d=f.indexOf("]",a);b=f.substring(a,d),c=!1}if(!h||!b)throw Error("Invalid path");return{path:h,key:b,hasExplicitKey:c}}async function ay(a,b,c){if(!a.type)throw Error("Node type is missing");let{path:d,key:e}=ax(a),f=await b.getSnapshot(),g=am(f,d),h=am(f,a.path),i=g.findIndex(a=>a._key===e),j=-1,k="before";if("first"===c){if(0===i)return[];j=0,k="before"}else if("last"===c){if(i===g.length-1)return[];j=-1,k="after"}else if("next"===c){if(i===g.length-1)return[];j=i,k="after"}else if("previous"===c){if(0===i)return[];j=i-1,k="before"}return[aa(d,$(i,i+1)),aa(d,Z(h,k,j))]}var az=c(38903);function aA(a){return{lang:a?.lang??k?.lang,message:a?.message,abortEarly:a?.abortEarly??k?.abortEarly,abortPipeEarly:a?.abortPipeEarly??k?.abortPipeEarly}}function aB(a,b,c,d,e){var f,g,h,i;let j=e&&"input"in e?e.input:c.value,k=e?.expected??a.expects??null,o=e?.received??function(a){let b=typeof a;return"string"===b?`"${a}"`:"number"===b||"bigint"===b||"boolean"===b?`${a}`:"object"===b||"function"===b?(a&&Object.getPrototypeOf(a)?.constructor?.name)??"null":b}(j),p={kind:a.kind,type:a.type,input:j,expected:k,received:o,message:`Invalid ${b}: ${k?`Expected ${k} but r`:"R"}eceived ${o}`,requirement:a.requirement,path:e?.path,issues:e?.issues,lang:d.lang,abortEarly:d.abortEarly,abortPipeEarly:d.abortPipeEarly},q="schema"===a.kind,r=e?.message??a.message??(f=a.reference,g=p.lang,n?.get(f)?.get(g))??(q?(h=p.lang,m?.get(h)):null)??d.message??(i=p.lang,l?.get(i));void 0!==r&&(p.message="function"==typeof r?r(p):r),q&&(c.typed=!1),c.issues?c.issues.push(p):c.issues=[p]}function aC(a){return{version:1,vendor:"valibot",validate:b=>a["~run"]({value:b},aA())}}var aD=class extends Error{constructor(a){super(a[0].message),this.name="ValiError",this.issues=a}};function aE(a,b){return{kind:"validation",type:"min_length",reference:aE,async:!1,expects:`>=${a}`,requirement:a,message:b,"~run"(a,b){return a.typed&&a.value.length<this.requirement&&aB(this,"length",a,b,{received:`${a.value.length}`}),a}}}function aF(a,b,c){return"function"==typeof a.default?a.default(b,c):a.default}function aG(a,b){return{kind:"schema",type:"object",reference:aG,expects:"Object",async:!1,entries:a,message:b,get"~standard"(){return aC(this)},"~run"(a,b){let c=a.value;if(c&&"object"==typeof c)for(let d in a.typed=!0,a.value={},this.entries){let e=this.entries[d];if(d in c||("exact_optional"===e.type||"optional"===e.type||"nullish"===e.type)&&void 0!==e.default){let f=d in c?c[d]:aF(e),g=e["~run"]({value:f},b);if(g.issues){let e={type:"object",origin:"value",input:c,key:d,value:f};for(let b of g.issues)b.path?b.path.unshift(e):b.path=[e],a.issues?.push(b);if(a.issues||(a.issues=g.issues),b.abortEarly){a.typed=!1;break}}g.typed||(a.typed=!1),a.value[d]=g.value}else if(void 0!==e.fallback)a.value[d]="function"==typeof e.fallback?e.fallback(void 0,void 0):e.fallback;else if("exact_optional"!==e.type&&"optional"!==e.type&&"nullish"!==e.type&&(aB(this,"key",a,b,{input:void 0,expected:`"${d}"`,path:[{type:"object",origin:"key",input:c,key:d,value:c[d]}]}),b.abortEarly))break}else aB(this,"type",a,b);return a}}}function aH(a,b){return{kind:"schema",type:"optional",reference:aH,expects:`(${a.expects} | undefined)`,async:!1,wrapped:a,default:b,get"~standard"(){return aC(this)},"~run"(a,b){return void 0===a.value&&(void 0!==this.default&&(a.value=aF(this,a,b)),void 0===a.value)?(a.typed=!0,a):this.wrapped["~run"](a,b)}}}function aI(a){return{kind:"schema",type:"string",reference:aI,expects:"string",async:!1,message:a,get"~standard"(){return aC(this)},"~run"(a,b){return"string"==typeof a.value?a.typed=!0:aB(this,"type",a,b),a}}}function aJ(...a){return{...a[0],pipe:a,get"~standard"(){return aC(this)},"~run"(b,c){for(let d of a)if("metadata"!==d.kind){if(b.issues&&("schema"===d.kind||"transformation"===d.kind)){b.typed=!1;break}b.issues&&(c.abortEarly||c.abortPipeEarly)||(b=d["~run"](b,c))}return b}}}function aK(a,b,c){let d=a["~run"]({value:b},aA(c));return{typed:d.typed,success:!d.issues,output:d.value,issues:d.issues}}let aL=aJ(aI(),aE(1)),aM=aH(aL),aN=aG({baseUrl:aL,dataset:aM,id:aL,path:aL,projectId:aM,tool:aM,type:aM,workspace:aM}),aO=/^([\w-]+):(0|[1-9][0-9]*)$/,aP=/^([\w-]+):([0-9]+),([0-9]+)$/,aQ=/^([\w-]+):([\w-]+)$/,aR=aJ(aI(),aE(1)),aS=aG({origin:aR,href:aR,data:aH(function a(b,c,d){return{kind:"schema",type:"record",reference:a,expects:"Object",async:!1,key:b,value:c,message:d,get"~standard"(){return aC(this)},"~run"(a,b){let c=a.value;if(c&&"object"==typeof c){for(let d in a.typed=!0,a.value={},c)if(Object.hasOwn(c,d)&&"__proto__"!==d&&"prototype"!==d&&"constructor"!==d){let e=c[d],f=this.key["~run"]({value:d},b);if(f.issues){let g={type:"object",origin:"key",input:c,key:d,value:e};for(let b of f.issues)b.path=[g],a.issues?.push(b);if(a.issues||(a.issues=f.issues),b.abortEarly){a.typed=!1;break}}let g=this.value["~run"]({value:e},b);if(g.issues){let f={type:"object",origin:"value",input:c,key:d,value:e};for(let b of g.issues)b.path?b.path.unshift(f):b.path=[f],a.issues?.push(b);if(a.issues||(a.issues=g.issues),b.abortEarly){a.typed=!1;break}}f.typed&&g.typed||(a.typed=!1),f.typed&&(a.value[f.value]=g.value)}}else aB(this,"type",a,b);return a}}}(aI(),function a(){return{kind:"schema",type:"unknown",reference:a,expects:"unknown",async:!1,get"~standard"(){return aC(this)},"~run":a=>(a.typed=!0,a)}}()))});function aT(a){let b=aK(aN,a);if(b.success)return b.output;let c=aK(aS,a);if(c.success)try{let a=new URL(c.output.href,typeof document>"u"?"https://example.com":location.origin);return a.searchParams.size>0?function(a,b,c){let d=a["~run"]({value:b},aA(void 0));if(d.issues)throw new aD(d.issues);return d.value}(aN,Object.fromEntries(a.searchParams.entries())):c.output}catch(a){return console.error("Failed to parse sanity node",a),c.output}}var aU={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},aV={0:8203,1:8204,2:8205,3:65279},aW=[,,,,].fill(String.fromCodePoint(aV[0])).join(""),aX=Object.fromEntries(Object.entries(aV).map(a=>a.reverse())),aY=Object.fromEntries(Object.entries(aU).map(a=>a.reverse())),aZ=`${Object.values(aU).map(a=>`\\u{${a.toString(16)}}`).join("")}`,a$=RegExp(`[${aZ}]{4,}`,"gu");let a_=[];for(let a=0;a<256;++a)a_.push((a+256).toString(16).slice(1));let a0=new Uint8Array(16);var a1={randomUUID:"u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function a2(a,b,c){if(a1.randomUUID&&!a)return a1.randomUUID();let e=(a=a||{}).random??a.rng?.()??function(){if(!d){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");d=crypto.getRandomValues.bind(crypto)}return d(a0)}();if(e.length<16)throw Error("Random bytes length must be >= 16");return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(a,b=0){return(a_[a[b+0]]+a_[a[b+1]]+a_[a[b+2]]+a_[a[b+3]]+"-"+a_[a[b+4]]+a_[a[b+5]]+"-"+a_[a[b+6]]+a_[a[b+7]]+"-"+a_[a[b+8]]+a_[a[b+9]]+"-"+a_[a[b+10]]+a_[a[b+11]]+a_[a[b+12]]+a_[a[b+13]]+a_[a[b+14]]+a_[a[b+15]]).toLowerCase()}(e)}function a3(a){let b=a.getBoundingClientRect();return{x:b.x+scrollX,y:b.y+scrollY,w:b.width,h:b.height}}function a4(a,b,c){return"x"===c?{x:a.x+b,y:a.y,w:a.w-2*b,h:a.h}:{x:a.x,y:a.y+b,w:a.w,h:a.h-2*b}}function a5(a,b){return a.x===b.x&&a.y===b.y&&a.w===b.w&&a.h===b.h}function a6(a,b){let c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function a7(a,b,c){let d,e,f={x:a.x1,y:a.y1};if(b.some(a=>(function(a,b){let c=a.x>=b.x&&a.x<=b.x+b.w,d=a.y>=b.y&&a.y<=b.y+b.h;return c&&d})(f,a4(a,Math.min(a.w,a.h)/10,"horizontal"===c?"x":"y"))))return null;for(let g of b){let b=function(a,b){let c=[{x1:b.x,y1:b.y,x2:b.x+b.w,y2:b.y},{x1:b.x+b.w,y1:b.y,x2:b.x+b.w,y2:b.y+b.h},{x1:b.x+b.w,y1:b.y+b.h,x2:b.x,y2:b.y+b.h},{x1:b.x,y1:b.y+b.h,x2:b.x,y2:b.y}],d=[];for(let b=0;b<c.length;b++){let e=function(a,b){let{x1:c,y1:d,x2:e,y2:f}=a,{x1:g,y1:h,x2:i,y2:j}=b;if(c===e&&d===f||g===i&&h===j)return!1;let k=(j-h)*(e-c)-(i-g)*(f-d);if(0===k)return!1;let l=((i-g)*(d-h)-(j-h)*(c-g))/k,m=((e-c)*(d-h)-(f-d)*(c-g))/k;return!(l<0)&&!(l>1)&&!(m<0)&&!(m>1)&&{x:c+l*(e-c),y:d+l*(f-d)}}(a,c[b]);if(e){let a=!1;for(let b=0;b<d.length;b++)d[b].x===e.x&&d[b].y===e.y&&(a=!0);a||d.push(e)}}return 0!==d.length&&d.sort((b,c)=>a6(b,{x:a.x1,y:a.y1})-a6(c,{x:a.x1,y:a.y1}))}(a,a4(g,Math.min(g.w,g.h)/10,"horizontal"===c?"x":"y"));if(b){let a=b[0];d?a6(f,a)<a6(f,d)&&(d=a,e=g):(d=a,e=g)}}return e||null}function a8(a,b,c){let{x:d,y:e,w:f,h:g}=a,{x:h,y:i}=c;return{x:h+(d-h)*b,y:i+(e-i)*b,w:f*b,h:g*b}}function a9(a){let b=Math.max(0,Math.min(...a.map(a=>a.y))),c=Math.min(document.body.scrollHeight,Math.max(...a.map(a=>a.y+a.h)));return{min:b,max:c,height:c-b}}function ba(a,b){return b.find(b=>a5(a3(b.elements.element),a))?.sanity}function bb(a,b,c){return Object.values(b).every(a=>null===a)?null:"horizontal"===c?{left:b.left?{rect:b.left,sanity:ba(b.left,a)}:null,right:b.right?{rect:b.right,sanity:ba(b.right,a)}:null}:{top:b.top?{rect:b.top,sanity:ba(b.top,a)}:null,bottom:b.bottom?{rect:b.bottom,sanity:ba(b.bottom,a)}:null}}function bc(a){let b=document.body.getBoundingClientRect();return{x:Math.max(b.x,Math.min(a.clientX,b.x+b.width)),y:a.clientY+window.scrollY}}function bd(a,b,c){let d=a3(b),e=[...b.querySelectorAll(":where(h1, h2, h3, h4, p, a, img, span, button):not(:has(*))")];a.x<=d.x&&(a.x=d.x),a.x>=d.x+d.w&&(a.x=d.x+d.w),a.y>=d.y+d.h&&(a.y=d.y+d.h),a.y<=d.y&&(a.y=d.y);let f=e.map(a=>{let b=a8(a3(a),c,{x:d.x,y:d.y});return{x:b.x-d.x,y:b.y-d.y,w:b.w,h:b.h,tagName:a.tagName}});return{offsetX:(d.x-a.x)*c,offsetY:(d.y-a.y)*c,w:d.w*c,h:d.h*c,maxWidth:d.w*c*.75,childRects:f}}async function be(a,b,c,d,e){return new Promise(f=>{a.addEventListener("transitionend",()=>{setTimeout(()=>{d({type:"overlay/dragEndMinimapTransition"})},2*e),f()},{once:!0}),d({type:"overlay/dragStartMinimapTransition"}),d({type:"overlay/dragToggleMinimap",display:!0}),document.body.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.overflow="initial",document.documentElement.style.height="100%",setTimeout(()=>{a.style.transformOrigin="50% 0px",a.style.transition="transform 150ms ease",a.style.transform=`translate3d(0px, ${-c+scrollY}px, 0px) scale(${b})`},25)})}function bf(a){let b=function(a){let b=Math.max(0,Math.min(...a.map(a=>a.x))),c=Math.min(document.body.offsetWidth,Math.max(...a.map(a=>a.x+a.w)));return{min:b,max:c,width:c-b}}(a),c=a9(a),d=b.min>8&&b.min+b.width<=window.innerWidth-8,e=c.min>8&&c.min+c.height<=document.body.scrollHeight-8,f=d&&e;return{x:f?b.min-8:b.min,y:f?c.min-8:c.min,w:f?b.width+16:b.width,h:f?c.height+16:c.height}}async function bg(a,b,c,d,e,f){return new Promise(g=>{if(1===new DOMMatrix(window.getComputedStyle(b).transform).a)return;let h=c-window.innerHeight,i=scrollY;(a-=window.innerHeight/2)<0&&(a=0),b.addEventListener("transitionend",()=>{b.style.transition="none",b.style.transform="none",scrollTo({top:a,behavior:"instant"}),setTimeout(()=>{d({type:"overlay/dragEndMinimapTransition"}),d({type:"overlay/dragToggleMinimap",display:!1})},2*e),g()},{once:!0}),d({type:"overlay/dragStartMinimapTransition"}),b.style.transform=`translateY(${Math.max(i-a,-h+i)}px) scale(1)`,f&&(document.body.style.overflow=f.body.overflow,document.body.style.height=f.body.height,document.documentElement.style.overflow=f.documentElement.overflow,document.documentElement.style.height=f.documentElement.height)})}let bh=!1,bi={y:0},bj={x:0,y:0},bk=typeof document>"u"?0:document.documentElement.scrollHeight,bl=null,bm=a=>a instanceof HTMLElement||a instanceof SVGElement,bn=a=>a&&bm(a)?a.dataset?.sanityOverlayElement?a:bn(a.parentElement):null;function bo(a){return a$.lastIndex=0,a$.test(a)}function bp(a,b=!1){return bo(a)?function(a,b=!1){try{let c=function(a){let b=a.match(a$);if(b)return function(a,b=!1){let c=Array.from(a);if(c.length%2==0){if(c.length%4||!a.startsWith(aW))return function(a,b){var c;let d=[];for(let b=.5*a.length;b--;){let c=`${aY[a[2*b].codePointAt(0)]}${aY[a[2*b+1].codePointAt(0)]}`;d.unshift(String.fromCharCode(parseInt(c,16)))}let e=[],f=[d.join("")],g=10;for(;f.length;){let a=f.shift();try{if(e.push(JSON.parse(a)),b)break}catch(d){if(!g--)throw d;let b=+(null==(c=d.message.match(/\sposition\s(\d+)$/))?void 0:c[1]);if(!b)throw d;f.unshift(a.substring(0,b),a.substring(b))}}return e}(c,b)}else throw Error("Encoded data has invalid length");let d=[];for(let a=.25*c.length;a--;){let b=c.slice(4*a,4*a+4).map(a=>aX[a.codePointAt(0)]).join("");d.unshift(String.fromCharCode(parseInt(b,4)))}if(b){d.shift();let a=d.indexOf("\0");return -1===a&&(a=d.length),[JSON.parse(d.slice(0,a).join(""))]}return d.join("").split("\0").filter(Boolean).map(a=>JSON.parse(a))}(b[0],!0)[0]}(a);return c&&"sanity.io"===c.origin?(b&&(c.href=c.href?.replace(".alt","")),c):null}catch(b){return console.error("Failed to decode stega for string: ",a,"with the original error: ",b),null}}(a,b):null}function bq(a){return"path"in a}function br(a){if(!a.length||!a.map(a=>bq(a)).every((a,b,c)=>a===c[0]))return;if(!bq(a[0]))return a[0];let b=a.filter(bq),c=a[0],d=["projectId","dataset","id","baseUrl","workspace","tool"];for(let a=1;a<b.length;a++){let e=b[a];if(d.some(a=>e[a]!==c?.[a])){c=void 0;break}c={...c,path:function(a,b){let c=a.split("."),d=b.split("."),e=Math.min(c.length,d.length);return c=c.slice(0,e).reverse(),d=d.slice(0,e).reverse(),c.reduce((a,b,c)=>b===d[c]?[...a,b]:[],[]).reverse().join(".")}(c.path,e.path)}}return c}function bs(a){let b=a.lastIndexOf(".");return a.substring(b,a.length).includes("[")}function bt(a){if(!bs(a))return null;let b=a.split(".");return b[b.length-1]=b[b.length-1].replace(/\[.*?\]/g,"[]"),b.join(".")}function bu(a,b){return!!bs(a.path)&&!!bs(b.path)&&bt(a.path)===bt(b.path)}function bv(a,b,c,d){if(!a.getAttribute("data-sanity")||a.getAttribute("data-sanity-drag-disable")||!b||!bq(b)||!bs(b.path))return null;let e=a.getAttribute("data-sanity-drag-group"),f=[...c].reduce((a,c)=>{let f=d.get(c),g=c.getAttribute("data-sanity-drag-disable"),h=c.getAttribute("data-sanity-drag-group"),i=null!==c.getAttribute("data-sanity");return f?.sanity&&!g&&bq(f.sanity)&&bu(b,f.sanity)&&(null===e||e===h)&&i&&a.push(f),a},[]);return f.length<=1?null:f}let bw=(0,r.createContext)(null);var bx=c(43952),by=c(40507);function bz(a){if(!a)return(0,o.jsx)(by.XRf,{});if("string"===a.type)return(0,o.jsx)(by.H3M,{});if("number"===a.type)return(0,o.jsx)(by.bZn,{});let{value:b}=a;if("icon"in a&&a.icon)return(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:a.icon}});let{type:c}=b;if("string"===c)return(0,o.jsx)(by.H3M,{});if("boolean"===c)return(0,o.jsx)(by.Dee,{});if("number"===c)return(0,o.jsx)(by.bZn,{});if("array"===c||"union"===c)return(Array.isArray(b.of)?b.of:[b.of]).some(a=>"name"in a&&"block"===a.name)?(0,o.jsx)(by.a1,{}):(0,o.jsx)(by.Ss4,{});if("object"===c){if("image"===a.name)return(0,o.jsx)(by.xfq,{});if("block"===a.name)return(0,o.jsx)(by.H3M,{})}return(0,o.jsx)(by.XRf,{})}let bA=(0,J.AH)`
  overflow-y: scroll;
  overscroll-behavior: contain;
  -ms-overflow-style: none;
  scrollbar-width: none;

  &:before {
    content: '';
    display: block;
    height: calc(100% + 1px);
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
  }
`,bB=J.I4.div`
  height: 100%;
  inset: 0;
  pointer-events: all;
  position: fixed;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;

  ${a=>a.$blockScroll&&bA}
`,bC=J.I4.div`
  background: transparent;
  height: 100%;
  inset: 0;
  position: absolute;
  width: 100%;
`,bD=a=>{let b,c=(0,p.c)(2);return c[0]!==a?(b=(0,o.jsx)(I.ZL,{children:(0,o.jsx)(bE,{...a})}),c[0]=a,c[1]=b):b=c[1],b},bE=a=>{let b,c,d=(0,p.c)(7),{children:e,onDismiss:f,setBoundaryElement:g,blockScroll:h}=a,i=void 0===h||h;return d[0]!==f?(b=(0,o.jsx)(bC,{onMouseDownCapture:()=>{f?.()}}),d[0]=f,d[1]=b):b=d[1],d[2]!==i||d[3]!==e||d[4]!==g||d[5]!==b?(c=(0,o.jsxs)(bB,{"data-sanity-overlay-element":!0,ref:g,onClick:bF,$blockScroll:i,children:[b,e]}),d[2]=i,d[3]=e,d[4]=g,d[5]=b,d[6]=c):c=d[6],c};function bF(a){a.stopPropagation()}function bG(a){return{type:"log",name:a.name,version:a.version,description:a.description,maxSampleRate:a.maxSampleRate,schema:void 0}}let bH={"Visual Editing Drag Sequence Completed":bG({name:"Visual Editing Drag Sequence Completed",description:"An array is successfully reordered using drag and drop.",version:1}),"Visual Editing Drag Minimap Enabled":bG({name:"Visual Editing Drag Minimap Enabled",description:"The zoomed-out minimap view is enabled during a drag sequence.",version:1}),"Visual Editing Context Menu Item Removed":bG({name:"Visual Editing Context Menu Item Removed",description:"An item is removed using the Context Menu.",version:1}),"Visual Editing Context Menu Item Duplicated":bG({name:"Visual Editing Context Menu Item Duplicated",description:"An item is duplicated using the Context Menu.",version:1}),"Visual Editing Context Menu Item Moved":bG({name:"Visual Editing Context Menu Item Moved",description:"An item is moved using the Context Menu.",version:1}),"Visual Editing Context Menu Item Inserted":bG({name:"Visual Editing Context Menu Item Inserted",description:"An item is inserted using the Context Menu.",version:1}),"Visual Editing Insert Menu Item Inserted":bG({name:"Visual Editing Insert Menu Item Inserted",description:"An item is inserted using the Insert Menu.",version:1}),"Visual Editing Overlay Clicked":bG({name:"Visual Editing Overlay Clicked",description:"An Overlay is clicked.",version:1})},bI=(0,r.createContext)(void 0);function bJ(){let a=(0,r.useContext)(bI);if(!a)throw Error("Telemetry context is missing");return a}let bK={"insert-menu.filter.all-items":"All","insert-menu.search.no-results":"No results","insert-menu.search.placeholder":"Filter types…","insert-menu.toggle-grid-view.tooltip":"Toggle grid view","insert-menu.toggle-list-view.tooltip":"Toggle list view"},bL=a=>{let b,c,d,e,f=(0,p.c)(11),{node:g,onSelect:h}=a;f[0]!==g.options?.insertMenu?(b=g.options?.insertMenu||{},f[0]=g.options?.insertMenu,f[1]=b):b=f[1];let i=b;f[2]!==i.views?(c=i.views?.map(bM),f[2]=i.views,f[3]=c):c=f[3];let j=c;return f[4]!==g.of?(d=g.of.map(bN),f[4]=g.of,f[5]=d):d=f[5],f[6]!==i||f[7]!==h||f[8]!==d||f[9]!==j?(e=(0,o.jsx)(bx.Z,{...i,labels:bK,schemaTypes:d,onSelect:h,views:j}),f[6]=i,f[7]=h,f[8]=d,f[9]=j,f[10]=e):e=f[10],e};function bM(a){return"grid"===a.name?{...a,previewImageUrl:b=>a.previewImageUrls?.[b]}:a}function bN(a){return{...a,icon:bz(a)}}let bO=a=>{let b,c,d,e,f,g=(0,p.c)(10);return g[0]!==a?({children:b,style:d,...c}=a,g[0]=a,g[1]=b,g[2]=c,g[3]=d):(b=g[1],c=g[2],d=g[3]),g[4]!==d?(e={...d,pointerEvents:"all"},g[4]=d,g[5]=e):e=g[5],g[6]!==b||g[7]!==c||g[8]!==e?(f=(0,o.jsx)("div",{style:e,"data-sanity-overlay-element":!0,...c,children:b}),g[6]=b,g[7]=c,g[8]=e,g[9]=f):f=g[9],f};var bP=c(72330),bQ=c(64631),bR=c(35173),bS=c(20735),bT=c(83676),bU="object"==typeof global&&global&&global.Object===Object&&global,bV="object"==typeof self&&self&&self.Object===Object&&self,bW=bU||bV||Function("return this")(),bX=bW.Symbol,bY=Object.prototype,bZ=bY.hasOwnProperty,b$=bY.toString,b_=bX?bX.toStringTag:void 0;let b0=function(a){var b=bZ.call(a,b_),c=a[b_];try{a[b_]=void 0;var d=!0}catch(a){}var e=b$.call(a);return d&&(b?a[b_]=c:delete a[b_]),e};var b1=Object.prototype.toString,b2=bX?bX.toStringTag:void 0;let b3=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":b2&&b2 in Object(a)?b0(a):b1.call(a)},b4=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)},b5=function(a){if(!b4(a))return!1;var b=b3(a);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b};var b6=bW["__core-js_shared__"],b7=function(){var a=/[^.]+$/.exec(b6&&b6.keys&&b6.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),b8=Function.prototype.toString;let b9=function(a){if(null!=a){try{return b8.call(a)}catch(a){}try{return a+""}catch(a){}}return""};var ca=/^\[object .+?Constructor\]$/,cb=Object.prototype,cc=Function.prototype.toString,cd=cb.hasOwnProperty,ce=RegExp("^"+cc.call(cd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let cf=function(a){return!!b4(a)&&(!b7||!(b7 in a))&&(b5(a)?ce:ca).test(b9(a))},cg=function(a,b){var c=null==a?void 0:a[b];return cf(c)?c:void 0};var ch=function(){try{var a=cg(Object,"defineProperty");return a({},"",{}),a}catch(a){}}();let ci=function(a,b,c){"__proto__"==b&&ch?ch(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c},cj=function(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d},ck=function(a,b,c){for(var d=-1,e=Object(a),f=c(a),g=f.length;g--;){var h=f[++d];if(!1===b(e[h],h,e))break}return a},cl=function(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d},cm=function(a){return null!=a&&"object"==typeof a},cn=function(a){return cm(a)&&"[object Arguments]"==b3(a)};var co=Object.prototype,cp=co.hasOwnProperty,cq=co.propertyIsEnumerable,cr=cn(function(){return arguments}())?cn:function(a){return cm(a)&&cp.call(a,"callee")&&!cq.call(a,"callee")},cs=Array.isArray,ct="object"==typeof exports&&exports&&!exports.nodeType&&exports,cu=ct&&"object"==typeof module&&module&&!module.nodeType&&module,cv=cu&&cu.exports===ct?bW.Buffer:void 0;let cw=(cv?cv.isBuffer:void 0)||function(){return!1};var cx=/^(?:0|[1-9]\d*)$/;let cy=function(a,b){var c=typeof a;return!!(b=null==b?0x1fffffffffffff:b)&&("number"==c||"symbol"!=c&&cx.test(a))&&a>-1&&a%1==0&&a<b},cz=function(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=0x1fffffffffffff};var cA={};cA["[object Float32Array]"]=cA["[object Float64Array]"]=cA["[object Int8Array]"]=cA["[object Int16Array]"]=cA["[object Int32Array]"]=cA["[object Uint8Array]"]=cA["[object Uint8ClampedArray]"]=cA["[object Uint16Array]"]=cA["[object Uint32Array]"]=!0,cA["[object Arguments]"]=cA["[object Array]"]=cA["[object ArrayBuffer]"]=cA["[object Boolean]"]=cA["[object DataView]"]=cA["[object Date]"]=cA["[object Error]"]=cA["[object Function]"]=cA["[object Map]"]=cA["[object Number]"]=cA["[object Object]"]=cA["[object RegExp]"]=cA["[object Set]"]=cA["[object String]"]=cA["[object WeakMap]"]=!1;var cB="object"==typeof exports&&exports&&!exports.nodeType&&exports,cC=cB&&"object"==typeof module&&module&&!module.nodeType&&module,cD=cC&&cC.exports===cB&&bU.process,cE=function(){try{var a=cC&&cC.require&&cC.require("util").types;if(a)return a;return cD&&cD.binding&&cD.binding("util")}catch(a){}}(),cF=cE&&cE.isTypedArray,cG=cF?function(a){return cF(a)}:function(a){return cm(a)&&cz(a.length)&&!!cA[b3(a)]},cH=Object.prototype.hasOwnProperty;let cI=function(a,b){var c=cs(a),d=!c&&cr(a),e=!c&&!d&&cw(a),f=!c&&!d&&!e&&cG(a),g=c||d||e||f,h=g?cl(a.length,String):[],i=h.length;for(var j in a)(b||cH.call(a,j))&&!(g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||cy(j,i)))&&h.push(j);return h};var cJ=Object.prototype;let cK=function(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||cJ)};var cL=(i=Object.keys,j=Object,function(a){return i(j(a))}),cM=Object.prototype.hasOwnProperty;let cN=function(a){if(!cK(a))return cL(a);var b=[];for(var c in Object(a))cM.call(a,c)&&"constructor"!=c&&b.push(c);return b},cO=function(a){return null!=a&&cz(a.length)&&!b5(a)},cP=function(a){return cO(a)?cI(a):cN(a)};var cQ=(g=function(a,b){return a&&ck(a,b,cP)},function(a,b){if(null==a)return a;if(!cO(a))return g(a,b);for(var c=a.length,d=-1,e=Object(a);++d<c&&!1!==b(e[d],d,e););return a});let cR=function(a,b,c,d){return cQ(a,function(a,e,f){b(d,a,c(a),f)}),d},cS=function(a,b){return a===b||a!=a&&b!=b},cT=function(a,b){for(var c=a.length;c--;)if(cS(a[c][0],b))return c;return -1};var cU=Array.prototype.splice;function cV(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}cV.prototype.clear=function(){this.__data__=[],this.size=0},cV.prototype.delete=function(a){var b=this.__data__,c=cT(b,a);return!(c<0)&&(c==b.length-1?b.pop():cU.call(b,c,1),--this.size,!0)},cV.prototype.get=function(a){var b=this.__data__,c=cT(b,a);return c<0?void 0:b[c][1]},cV.prototype.has=function(a){return cT(this.__data__,a)>-1},cV.prototype.set=function(a,b){var c=this.__data__,d=cT(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this};var cW=cg(bW,"Map"),cX=cg(Object,"create"),cY=Object.prototype.hasOwnProperty,cZ=Object.prototype.hasOwnProperty;function c$(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}c$.prototype.clear=function(){this.__data__=cX?cX(null):{},this.size=0},c$.prototype.delete=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=!!b,b},c$.prototype.get=function(a){var b=this.__data__;if(cX){var c=b[a];return"__lodash_hash_undefined__"===c?void 0:c}return cY.call(b,a)?b[a]:void 0},c$.prototype.has=function(a){var b=this.__data__;return cX?void 0!==b[a]:cZ.call(b,a)},c$.prototype.set=function(a,b){var c=this.__data__;return this.size+=+!this.has(a),c[a]=cX&&void 0===b?"__lodash_hash_undefined__":b,this};let c_=function(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a},c0=function(a,b){var c=a.__data__;return c_(b)?c["string"==typeof b?"string":"hash"]:c.map};function c1(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function c2(a){var b=this.__data__=new cV(a);this.size=b.size}function c3(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new c1;++b<c;)this.add(a[b])}c1.prototype.clear=function(){this.size=0,this.__data__={hash:new c$,map:new(cW||cV),string:new c$}},c1.prototype.delete=function(a){var b=c0(this,a).delete(a);return this.size-=!!b,b},c1.prototype.get=function(a){return c0(this,a).get(a)},c1.prototype.has=function(a){return c0(this,a).has(a)},c1.prototype.set=function(a,b){var c=c0(this,a),d=c.size;return c.set(a,b),this.size+=+(c.size!=d),this},c2.prototype.clear=function(){this.__data__=new cV,this.size=0},c2.prototype.delete=function(a){var b=this.__data__,c=b.delete(a);return this.size=b.size,c},c2.prototype.get=function(a){return this.__data__.get(a)},c2.prototype.has=function(a){return this.__data__.has(a)},c2.prototype.set=function(a,b){var c=this.__data__;if(c instanceof cV){var d=c.__data__;if(!cW||d.length<199)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new c1(d)}return c.set(a,b),this.size=c.size,this},c3.prototype.add=c3.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},c3.prototype.has=function(a){return this.__data__.has(a)};let c4=function(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1},c5=function(a,b,c,d,e,f){var g=1&c,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a),k=f.get(b);if(j&&k)return j==b&&k==a;var l=-1,m=!0,n=2&c?new c3:void 0;for(f.set(a,b),f.set(b,a);++l<h;){var o=a[l],p=b[l];if(d)var q=g?d(p,o,l,b,a,f):d(o,p,l,a,b,f);if(void 0!==q){if(q)continue;m=!1;break}if(n){if(!c4(b,function(a,b){if(!n.has(b)&&(o===a||e(o,a,c,d,f)))return n.push(b)})){m=!1;break}}else if(!(o===p||e(o,p,c,d,f))){m=!1;break}}return f.delete(a),f.delete(b),m};var c6=bW.Uint8Array;let c7=function(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c},c8=function(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c};var c9=bX?bX.prototype:void 0,da=c9?c9.valueOf:void 0;let db=function(a,b,c,d,e,f,g){switch(c){case"[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer,b=b.buffer;case"[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new c6(a),new c6(b)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return cS(+a,+b);case"[object Error]":return a.name==b.name&&a.message==b.message;case"[object RegExp]":case"[object String]":return a==b+"";case"[object Map]":var h=c7;case"[object Set]":var i=1&d;if(h||(h=c8),a.size!=b.size&&!i)break;var j=g.get(a);if(j)return j==b;d|=2,g.set(a,b);var k=c5(h(a),h(b),d,e,f,g);return g.delete(a),k;case"[object Symbol]":if(da)return da.call(a)==da.call(b)}return!1},dc=function(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a},dd=function(a,b,c){var d=b(a);return cs(a)?d:dc(d,c(a))},de=function(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f};var df=Object.prototype.propertyIsEnumerable,dg=Object.getOwnPropertySymbols,dh=dg?function(a){return null==a?[]:de(dg(a=Object(a)),function(b){return df.call(a,b)})}:function(){return[]};let di=function(a){return dd(a,cP,dh)};var dj=Object.prototype.hasOwnProperty;let dk=function(a,b,c,d,e,f){var g=1&c,h=di(a),i=h.length;if(i!=di(b).length&&!g)return!1;for(var j=i;j--;){var k=h[j];if(!(g?k in b:dj.call(b,k)))return!1}var l=f.get(a),m=f.get(b);if(l&&m)return l==b&&m==a;var n=!0;f.set(a,b),f.set(b,a);for(var o=g;++j<i;){var p=a[k=h[j]],q=b[k];if(d)var r=g?d(q,p,k,b,a,f):d(p,q,k,a,b,f);if(!(void 0===r?p===q||e(p,q,c,d,f):r)){n=!1;break}o||(o="constructor"==k)}if(n&&!o){var s=a.constructor,t=b.constructor;s!=t&&"constructor"in a&&"constructor"in b&&!("function"==typeof s&&s instanceof s&&"function"==typeof t&&t instanceof t)&&(n=!1)}return f.delete(a),f.delete(b),n};var dl=cg(bW,"DataView"),dm=cg(bW,"Promise"),dn=cg(bW,"Set"),dp=cg(bW,"WeakMap"),dq="[object Map]",dr="[object Promise]",ds="[object Set]",dt="[object WeakMap]",du="[object DataView]",dv=b9(dl),dw=b9(cW),dx=b9(dm),dy=b9(dn),dz=b9(dp),dA=b3;(dl&&dA(new dl(new ArrayBuffer(1)))!=du||cW&&dA(new cW)!=dq||dm&&dA(dm.resolve())!=dr||dn&&dA(new dn)!=ds||dp&&dA(new dp)!=dt)&&(dA=function(a){var b=b3(a),c="[object Object]"==b?a.constructor:void 0,d=c?b9(c):"";if(d)switch(d){case dv:return du;case dw:return dq;case dx:return dr;case dy:return ds;case dz:return dt}return b});let dB=dA;var dC="[object Arguments]",dD="[object Array]",dE="[object Object]",dF=Object.prototype.hasOwnProperty;let dG=function(a,b,c,d,e,f){var g=cs(a),h=cs(b),i=g?dD:dB(a),j=h?dD:dB(b);i=i==dC?dE:i,j=j==dC?dE:j;var k=i==dE,l=j==dE,m=i==j;if(m&&cw(a)){if(!cw(b))return!1;g=!0,k=!1}if(m&&!k)return f||(f=new c2),g||cG(a)?c5(a,b,c,d,e,f):db(a,b,i,c,d,e,f);if(!(1&c)){var n=k&&dF.call(a,"__wrapped__"),o=l&&dF.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new c2),e(p,q,c,d,f)}}return!!m&&(f||(f=new c2),dk(a,b,c,d,e,f))},dH=function a(b,c,d,e,f){return b===c||(null!=b&&null!=c&&(cm(b)||cm(c))?dG(b,c,d,e,a,f):b!=b&&c!=c)},dI=function(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var i=(h=c[e])[0],j=a[i],k=h[1];if(g&&h[2]){if(void 0===j&&!(i in a))return!1}else{var l=new c2;if(d)var m=d(j,k,i,a,b,l);if(!(void 0===m?dH(k,j,3,d,l):m))return!1}}return!0},dJ=function(a){return a==a&&!b4(a)},dK=function(a){for(var b=cP(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,dJ(e)]}return b},dL=function(a,b){return function(c){return null!=c&&c[a]===b&&(void 0!==b||a in Object(c))}},dM=function(a){var b=dK(a);return 1==b.length&&b[0][2]?dL(b[0][0],b[0][1]):function(c){return c===a||dI(c,a,b)}},dN=function(a){return"symbol"==typeof a||cm(a)&&"[object Symbol]"==b3(a)};var dO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dP=/^\w*$/;let dQ=function(a,b){if(cs(a))return!1;var c=typeof a;return!!("number"==c||"symbol"==c||"boolean"==c||null==a||dN(a))||dP.test(a)||!dO.test(a)||null!=b&&a in Object(b)};function dR(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw TypeError("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(dR.Cache||c1),c}dR.Cache=c1;var dS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dT=/\\(\\)?/g,dU=function(a){var b=dR(a,function(a){return 500===c.size&&c.clear(),a}),c=b.cache;return b}(function(a){var b=[];return 46===a.charCodeAt(0)&&b.push(""),a.replace(dS,function(a,c,d,e){b.push(d?e.replace(dT,"$1"):c||a)}),b});let dV=function(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e};var dW=1/0,dX=bX?bX.prototype:void 0,dY=dX?dX.toString:void 0;let dZ=function a(b){if("string"==typeof b)return b;if(cs(b))return dV(b,a)+"";if(dN(b))return dY?dY.call(b):"";var c=b+"";return"0"==c&&1/b==-dW?"-0":c},d$=function(a,b){return cs(a)?a:dQ(a,b)?[a]:dU(null==a?"":dZ(a))};var d_=1/0;let d0=function(a){if("string"==typeof a||dN(a))return a;var b=a+"";return"0"==b&&1/a==-d_?"-0":b},d1=function(a,b){b=d$(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[d0(b[c++])];return c&&c==d?a:void 0},d2=function(a,b,c){var d=null==a?void 0:d1(a,b);return void 0===d?c:d},d3=function(a,b){return null!=a&&b in Object(a)},d4=function(a,b,c){b=d$(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=d0(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:!!(e=null==a?0:a.length)&&cz(e)&&cy(g,e)&&(cs(a)||cr(a))},d5=function(a){return a},d6=function(a){var b;return dQ(a)?(b=d0(a),function(a){return null==a?void 0:a[b]}):function(b){return d1(b,a)}},d7=function(a){if("function"==typeof a)return a;if(null==a)return d5;if("object"==typeof a){var b,c;return cs(a)?(b=a[0],c=a[1],dQ(b)&&dJ(c)?dL(d0(b),c):function(a){var d=d2(a,b);return void 0===d&&d===c?null!=a&&d4(a,b,d3):dH(c,d,3)}):dM(a)}return d6(a)};var d8=Object.prototype.hasOwnProperty,d9=(h=function(a,b,c){d8.call(a,c)?a[c].push(b):ci(a,c,[b])},function(a,b){return(cs(a)?cj:cR)(a,h,d7(b,2),{})});function ea(a){return null!==a&&"object"==typeof a&&!Array.isArray(a)}var eb=c(99237),ec=c(77598);function ed(a,b){if("number"==typeof b){var c=a.length,d=b;if(0===c&&(-1===d||0===d))return 0;let e=d<0?c+d:d;return e>=c||e<0?null:e}if(N(b)){let c=a.findIndex(a=>(null!==a&&"object"==typeof a&&"string"==typeof a._key&&a._key||null)===b._key);return -1===c?null:c}throw Error(`Expected path segment to be addressing a single array item either by numeric index or by '_key'. Instead saw ${JSON.stringify(b)}`)}function ee(a,b,c,d){let e=a.slice();return e.splice(b,c,...d||[]),e}function ef(a,b){var c;if(!Array.isArray(b))throw TypeError('Cannot apply "insert()" on non-array value');let d=ed(b,a.referenceItem);if(null===d)throw Error(`Found no matching array element to insert ${a.position}`);return 0===b.length?a.items:ee(b,(c=a.position,"before"===c?d:d+1),0,a.items)}let eg=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);var eh=Object.freeze({__proto__:null,assign:function(a,b){if(!ea(b))throw TypeError('Cannot apply "assign()" on non-object value');return!function(a){for(let b in a)if(eg(a,b))return!1;return!0}(a.value)?{...b,...a.value}:b},dec:function(a,b){if("number"!=typeof b)throw TypeError('Cannot apply "dec()" on non-numeric value');return b-a.amount},diffMatchPatch:function(a,b){if("string"!=typeof b)throw TypeError('Cannot apply "diffMatchPatch()" on non-string value');return(0,eb.$i)((0,eb.iz)(a.value),b)[0]},inc:function(a,b){if("number"!=typeof b)throw TypeError('Cannot apply "inc()" on non-numeric value');return b+a.amount},insert:ef,remove:function(a,b){if(!Array.isArray(b))throw TypeError('Cannot apply "remove()" on non-array value');let c=ed(b,a.referenceItem);if(null===c)throw Error("Found no matching array element to replace");return ee(b,c,1,[])},replace:function(a,b){if(!Array.isArray(b))throw TypeError('Cannot apply "replace()" on non-array value');let c=ed(b,a.referenceItem);if(null===c)throw Error("Found no matching array element to replace");return ee(b,c,a.items.length,a.items)},set:function(a,b){return a.value},setIfMissing:function(a,b){return b??a.value},truncate:function(a,b){if(!Array.isArray(b))throw TypeError('Cannot apply "truncate()" on non-array value');return"number"==typeof a.endIndex?b.slice(0,a.startIndex).concat(b.slice(a.endIndex)):b.slice(0,a.startIndex)},unassign:function(a,b){if(!ea(b))throw TypeError('Cannot apply "unassign()" on non-object value');return 0===a.keys.length?b:function(a,b){let c={...a};for(let a of b)delete c[a];return c}(b,a.keys)},unset:function(a){},upsert:function(a,b){if(!Array.isArray(b))throw TypeError('Cannot apply "upsert()" on non-array value');if(0===a.items.length)return b;let c=[],d=[];if(a.items.forEach((a,e)=>{let f=b.findIndex(b=>b?._key===a._key);f>=0?c[f]=e:d.push(a)}),0===c.length&&0==d.length)return b;let e=[...b];for(let b of c)e[b]=a.items[c[b]];return ef({type:"insert",items:d,referenceItem:a.referenceItem,position:a.position},e)}});function ei(a,b){return a.reduce((a,b)=>ej(b,a),b)}function ej(a,b){return function a(b,c,d){if(!(b.length>0)){if(!(c.type in eh))throw Error(`Invalid operation type: "${c.type}"`);return eh[c.type](c,d)}let[e,...f]=b;if(O(e)&&Array.isArray(d)){var g=e,h=f,i=c,j=d;let b=ed(j,g);if(null===b||-1===b)return j;let k=j[b],l=a(h,i,k);return l===k?j:ee(j,b,1,[l])}if("string"==typeof e&&ea(d)){var k=e,l=f,m=c,n=d;let b=n[k];if(void 0===b&&l.length>0)return n;let g=a(l,m,b);return g===b?n:{...n,[k]:g}}throw Error(`Cannot apply operation of type "${c.type}" to path ${Q(b)} on ${typeof d} value`)}(a.path,a.op,b)}function ek(a=21){var b;b=a-=0,!e||e.length<b?(e=Buffer.allocUnsafe(128*b),ec.webcrypto.getRandomValues(e),f=0):f+b>e.length&&(ec.webcrypto.getRandomValues(e),f=0),f+=b;let c="";for(let b=f-a;b<f;b++)c+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&e[b]];return c}function el(a){return"_id"in a}function em(a,b){if(0===a.length)return b;let c=b;for(let b of a){if(O(b)){if(!Array.isArray(c))return;if(N(b)){c=c.find(a=>a._key===b._key);continue}c=c[b];continue}c=c[b]}return c}function en(a){if("patch"===a.type)return a.id;if("create"===a.type)return a.document._id;if("delete"===a.type)return a.id;if("createIfNotExists"===a.type||"createOrReplace"===a.type)return a.document._id;throw Error("Invalid mutation type")}function eo(a,b){return b.reduce((a,b)=>{let c=ep(a,b);if("error"===c.status)throw Error(c.message);return"noop"===c.status?a:c.after},a)}function ep(a,b){if("create"===b.type)return function(a,b){var c;if(a)return{status:"error",message:"Document already exist"};let d=(c=b.document,el(c)?c:{...c,_id:ek()});return{status:"created",id:d._id,after:d}}(a,b);if("createIfNotExists"===b.type){return c=a,el((d=b).document)?c?{status:"noop"}:{status:"created",id:d.document._id,after:d.document}:{status:"error",message:"Cannot createIfNotExists on document without _id"}}if("delete"===b.type){return e=a,f=b,e?f.id!==e._id?{status:"error",message:"Delete mutation targeted wrong document"}:{status:"deleted",id:f.id,before:e,after:void 0}:{status:"noop"}}if("createOrReplace"===b.type){return g=a,el((h=b).document)?g?{status:"updated",id:h.document._id,before:g,after:h.document}:{status:"created",id:h.document._id,after:h.document}:{status:"error",message:"Cannot createIfNotExists on document without _id"}}if("patch"===b.type){var c,d,e,f,g,h,i=a,j=b;if(!i)return{status:"error",message:"Cannot apply patch on nonexistent document"};let k=function(a,b){if(a.options?.ifRevision&&b._rev!==a.options.ifRevision)throw Error("Revision mismatch");if(a.id!==b._id)throw Error(`Document id mismatch. Refusing to apply mutation for document with id="${a.id}" on the given document with id="${b._id}"`);return ei(a.patches,b)}(j,i);return i===k?{status:"noop"}:{status:"updated",id:j.id,before:i,after:k}}throw Error(`Invalid mutation type: ${b.type}`)}function eq(a,b,c){let d=[];for(let c of a.slice().reverse()){if(b(c))return d;d.push(c)}return d.reverse()}function er(a,b){return Q(a)===Q(b)}function es(a,b){let c=a;return b.reduce((a,b)=>{let d=c;if(c=ej(b,c),"set"===b.op.type&&"string"==typeof b.op.value){let c=em(b.path,d);if("string"==typeof c){let d={...b,op:{type:"diffMatchPatch",value:(0,eb.w1)((0,eb.jW)(c,b.op.value))}};return a.flatMap(a=>er(a.path,b.path)&&"diffMatchPatch"===a.op.type?[]:a).concat(d)}}return a.push(b),a},[])}function et(a,b,c,d){let e=b,f=d.map(b=>{let c=b.mutations.flatMap(b=>{if(en(b)!==a)return[];let c=e;return e=eo(e,[b]),c&&"patch"===b.type?{type:"dmpified",mutation:{...b,dmpPatches:es(c,b.patches),original:b.patches}}:b});return{...b,mutations:c}}),g=c;return f.map(b=>{let c=[];return b.mutations.forEach(b=>{if("dmpified"===b.type)try{g=ei(b.mutation.dmpPatches,g),c.push(b)}catch{console.warn("Failed to apply dmp patch, falling back to original");try{g=ei(b.mutation.original,g),c.push(b)}catch(b){throw Error(`Failed to apply patch for document "${a}": ${b.message}`)}}else g=eo(g,[b])})}),[d.map(b=>({...b,mutations:b.mutations.map(b=>"patch"!==b.type||en(b)!==a?b:{...b,patches:b.patches.map(a=>"set"!==a.op.type?a:{...a,op:{...a.op,value:em(a.path,g)}})})})),g]}var eu=c(62154),ev=c(79504),ew=c(91258),ex=c(36984);function ey(a){let b=a.listen('*[!(_id in path("_.**"))]',{},{events:["welcome","mutation","reconnect"],includeResult:!1,includePreviousRevision:!1,visibility:"transaction",effectFormat:"mendoza",includeMutations:!1}).pipe((0,bT.share)({resetOnRefCountZero:!0})),c=b.pipe((0,bT.filter)(a=>"reconnect"===a.type)),d=b.pipe((0,bT.filter)(a=>"welcome"===a.type)),e=b.pipe((0,bT.filter)(a=>"mutation"===a.type)),f=(0,bT.merge)(d,c).pipe((0,bT.shareReplay)({bufferSize:1,refCount:!0})).pipe((0,bT.filter)(a=>"welcome"===a.type));return(0,bT.merge)(f,e,c)}let ez=(0,ev.mj)({types:{},actions:{"assign error to context":(0,ew.a)({error:({event:a})=>a}),"clear error from context":(0,ew.a)({error:void 0}),"connect to server-sent events":(0,bS.r)({type:"connect"}),"listen to server-sent events":(0,bS.h)("server-sent events",{id:"listener",input:({context:a})=>({listener:a.sharedListener||ey(a.client),id:a.id})}),"stop listening to server-sent events":(0,bS.k)("listener"),"buffer remote mutation events":(0,ew.a)({mutationEvents:({event:a,context:b})=>((0,ev.DT)(a,"mutation"),[...b.mutationEvents,a])}),"restore stashed changes":(0,ew.a)({stagedChanges:({event:a,context:b})=>((0,ev.DT)(a,"xstate.done.actor.submitTransactions"),b.stashedChanges),stashedChanges:[]}),"rebase fetched remote snapshot":(0,ex.a)(({enqueue:a})=>{a.assign(({event:a,context:b})=>{(0,ev.DT)(a,"xstate.done.actor.getDocument");let c=b.remote,d=a.output,e=!1;for(let a of b.mutationEvents)a.effects?.apply&&(a.previousRev||"appear"===a.transition)&&(e||a.previousRev!==d?._rev||(e=!0),e&&(d=eA(d,a.effects.apply,a.resultRev)));b.cache&&(!b.cache.has(b.id)||b.cache.get(b.id)._rev!==d?._rev)&&b.cache.set(b.id,d);let[f,g]=et(b.id,null===c?void 0:c,null===d?void 0:d,b.stagedChanges);return{remote:d,local:g,stagedChanges:f,mutationEvents:[]}}),a.sendParent(({context:a})=>({type:"rebased.remote",id:a.id,document:a.remote}))}),"apply mendoza patch":(0,ew.a)(({event:a,context:b})=>{(0,ev.DT)(a,"mutation");let c=b.remote;if(a.transactionId===c?._rev)return{};let d=eA(c,a.effects.apply,a.resultRev);b.cache&&(!b.cache.has(b.id)||b.cache.get(b.id)._rev!==d?._rev)&&b.cache.set(b.id,d);let[e,f]=et(b.id,null===c?void 0:c,null===d?void 0:d,b.stagedChanges);return{remote:d,local:f,stagedChanges:e}}),"increment fetch attempts":(0,ew.a)({fetchRemoteSnapshotAttempts:({context:a})=>a.fetchRemoteSnapshotAttempts+1}),"reset fetch attempts":(0,ew.a)({fetchRemoteSnapshotAttempts:0}),"increment submit attempts":(0,ew.a)({submitTransactionsAttempts:({context:a})=>a.submitTransactionsAttempts+1}),"reset submit attempts":(0,ew.a)({submitTransactionsAttempts:0}),"stage mutation":(0,ew.a)({stagedChanges:({event:a,context:b})=>((0,ev.DT)(a,"mutate"),[...b.stagedChanges,{transaction:!1,mutations:a.mutations}])}),"stash mutation":(0,ew.a)({stashedChanges:({event:a,context:b})=>((0,ev.DT)(a,"mutate"),[...b.stashedChanges,{transaction:!1,mutations:a.mutations}])}),"rebase local snapshot":(0,ex.a)(({enqueue:a})=>{a.assign({local:({event:a,context:b})=>{(0,ev.DT)(a,"mutate");let c=new Map;return b.local&&c.set(b.id,b.local),function(a,b){a.forEach(a=>{("created"===a.status||"updated"===a.status)&&b.set(a.id,a.after),"deleted"===a.status&&b.delete(a.id)})}(function(a,b){let c=Object.create(null);for(let d of a){let a=en(d);if(!a)throw Error("Unable to get document id from mutation");let e=c[a]?.after||b.get(a),f=ep(e,d);if("error"===f.status)throw Error(f.message);"noop"!==f.status&&("updated"===f.status||"created"===f.status||"deleted"===f.status)&&(a in c||(c[a]={before:e,after:void 0,muts:[]}),c[a].after=f.after)}return Object.entries(c).map(([a,{before:b,after:c,muts:d}])=>({id:a,status:c?b?"updated":"created":"deleted",mutations:d,before:b,after:c}))}(a.mutations,c),c),c.get(b.id)}}),a.sendParent(({context:a})=>({type:"rebased.local",id:a.id,document:a.local}))}),"send pristine event to parent":(0,ex.s)(({context:a})=>({type:"pristine",id:a.id})),"send sync event to parent":(0,ex.s)(({context:a})=>({type:"sync",id:a.id,document:a.remote})),"send mutation event to parent":(0,ex.s)(({context:a,event:b})=>((0,ev.DT)(b,"mutation"),{type:"mutation",id:a.id,previousRev:b.previousRev,resultRev:b.resultRev,effects:b.effects}))},actors:{"server-sent events":(0,ab.OX)(({input:a})=>{let{listener:b,id:c}=a;return(0,bT.defer)(()=>b).pipe((0,bT.filter)(a=>"welcome"===a.type||"reconnect"===a.type||"mutation"===a.type&&a.documentId===c),(0,bT.observeOn)(bT.asapScheduler))}),"fetch remote snapshot":(0,ab.Sx)(async({input:a,signal:b})=>{let{client:c,id:d}=a;return await c.getDocument(d,{signal:b}).catch(a=>{if(!(a instanceof Error&&"AbortError"===a.name))throw a})}),"submit mutations as transactions":(0,ab.Sx)(async({input:a,signal:b})=>{let{client:c,transactions:d}=a;for(let a of d){if(b.aborted)return;await c.dataRequest("mutate",V(a),{visibility:"async",returnDocuments:!1,signal:b}).catch(a=>{if(!(a instanceof Error&&"AbortError"===a.name))throw a})}})},delays:{fetchRemoteSnapshotTimeout:({context:a})=>1e3*Math.pow(2,a.fetchRemoteSnapshotAttempts),submitTransactionsTimeout:({context:a})=>1e3*Math.pow(2,a.submitTransactionsAttempts)}}).createMachine({id:"document-mutator",context:({input:a})=>({client:a.client.withConfig({allowReconfigure:!1}),sharedListener:a.sharedListener,id:a.id,remote:void 0,local:void 0,mutationEvents:[],stagedChanges:[],stashedChanges:[],error:void 0,fetchRemoteSnapshotAttempts:0,submitTransactionsAttempts:0,cache:a.cache}),entry:["connect to server-sent events"],on:{mutate:{actions:["rebase local snapshot","stage mutation"]}},initial:"disconnected",states:{disconnected:{on:{connect:{target:"connecting",actions:["listen to server-sent events"]}}},connecting:{on:{welcome:"connected",reconnect:"reconnecting",error:"connectFailure"},tags:["busy"]},connectFailure:{on:{connect:{target:"connecting",actions:["listen to server-sent events"]}},entry:["stop listening to server-sent events","assign error to context"],exit:["clear error from context"],tags:["error"]},reconnecting:{on:{welcome:{target:"connected"},error:{target:"connectFailure"}},tags:["busy","error"]},connected:{on:{mutation:{actions:["buffer remote mutation events"]},reconnect:"reconnecting"},entry:["clear error from context"],initial:"loading",states:{loading:{invoke:{src:"fetch remote snapshot",id:"getDocument",input:({context:a})=>({client:a.client,id:a.id}),onError:{target:"loadFailure"},onDone:{target:"loaded",actions:["rebase fetched remote snapshot","reset fetch attempts"]}},tags:["busy"]},loaded:{entry:["send sync event to parent"],on:{mutation:{actions:["apply mendoza patch","send mutation event to parent"]}},initial:"pristine",states:{pristine:{on:{mutate:{actions:["rebase local snapshot","stage mutation"],target:"dirty"}},tags:["ready"]},dirty:{on:{submit:"submitting"},tags:["ready"]},submitting:{on:{mutate:{actions:["rebase local snapshot","stash mutation"]}},invoke:{src:"submit mutations as transactions",id:"submitTransactions",input:({context:a})=>{let b=new Map;return b.set(a.id,a.remote),{client:a.client,transactions:(function(a,b){let c=[],d=[];return a.forEach(a=>{b(a)?d.push(a):(d.length>0&&c.push(d),d=[],c.push([a]))}),d.length>0&&c.push(d),c})(a.stagedChanges,a=>!a.transaction).flatMap(a=>({...a[0],mutations:a.flatMap(a=>a.mutations)})).map(a=>({...a,mutations:Object.values(d9(a.mutations,en)).flatMap(a=>{var b,c;return(0===(c=0===(b=a).length?b:b.reduce((a,b)=>"delete"===b.type?[b]:(a.push(b),a),[])).length?c:c.reduce((a,b)=>("createIfNotExists"!==b.type?a.push(b):eq(a,a=>"delete"===a.type).find(a=>"createIfNotExists"===a.type)||a.push(b),a),[])).flat().reduce((a,b)=>{let c=a[a.length-1];return c&&"patch"!==c.type||"patch"!==b.type?a.concat(b):a.slice(0,-1).concat({...b,patches:(c?.patches||[]).concat(b.patches)})},[])})})).map(a=>({...a,mutations:a.mutations.map(a=>"patch"!==a.type?a:{...a,patches:a.patches.reduce((a,b)=>{if("unset"!==b.op.type)return a.push(b),a;let c=a.filter(a=>{var c,d;return c=b.path,d=a.path,!(c.length<=d.length&&c.every((a,b)=>{var c,e;return c=a,e=function(a,b){if(b<0||b>=a.length)throw Error("Index out of bounds");return a[b]}(d,b),M(c)&&M(e)?c._key===e._key:"number"==typeof c?Number(c)===Number(e):c===e}))});return c.push(b),c},[]).reduceRight((a,b)=>(a.find(a=>{var c,d;return c=a.op,("set"===(d=b.op).type||"unset"===d.type)&&("set"===c.type||"unset"===c.type)&&er(a.path,b.path)})||a.unshift(b),a),[]).reduce((a,b)=>("setIfMissing"!==b.op.type?a.push(b):eq(a,a=>"unset"===a.op.type).find(a=>"setIfMissing"===a.op.type&&er(a.path,b.path))||a.push(b),a),[])})})).map(a=>{var c;return{...a,mutations:(c=b,a.mutations.map((a,b)=>{var d,e;return"patch"===a.type?(d=c.get(a.id),e=a,d?{...e,patches:es(d,e.patches)}:e):a}))}}).map(a=>a.transaction&&void 0!==a.id?{id:a.id,mutations:a.mutations}:{mutations:a.mutations})}},onError:{target:"submitFailure"},onDone:{target:"pristine",actions:["restore stashed changes","reset submit attempts","send pristine event to parent"]}},tags:["busy","ready"]},submitFailure:{exit:["clear error from context"],after:{submitTransactionsTimeout:{actions:["increment submit attempts"],target:"submitting"}},on:{retry:"submitting"},tags:["error","ready"]}}},loadFailure:{exit:["clear error from context"],after:{fetchRemoteSnapshotTimeout:{actions:["increment fetch attempts"],target:"loading"}},on:{retry:"loading"},tags:["error"]}}}}});function eA(a,b,c){let d=(0,eu.X)(function(a){if(!a)return null;let{_rev:b,...c}=a;return c}(a),b);return d?Object.assign(d,{_rev:c}):null}let eB=(0,ev.mj)({types:{},actions:{"emit sync event":(0,ex.e)(({event:a})=>((0,ev.DT)(a,"sync"),a)),"emit mutation event":(0,ex.e)(({event:a})=>((0,ev.DT)(a,"mutation"),a)),"emit rebased event":(0,ex.e)(({event:a})=>((0,ev.DT)(a,["rebased.local","rebased.remote"]),a)),"emit pristine event":(0,ex.e)(({event:a})=>((0,ev.DT)(a,["pristine"]),a)),"add document actor":(0,ew.a)({documents:({context:a,event:b,spawn:c})=>{(0,ev.DT)(b,"observe");let d=b.documentId;return a.documents[d]?a.documents:{...a.documents,[d]:c("documentMutatorMachine",{input:{id:d,client:a.client,sharedListener:a.sharedListener||ey(a.client)},id:d})}}}),"stop remote snapshot":(0,bS.k)(({context:a,event:b})=>((0,ev.DT)(b,"unobserve"),a.documents[b.documentId])),"remove remote snapshot from context":(0,ew.a)({documents:({context:a,event:b})=>{if((0,ev.DT)(b,"unobserve"),!a.documents[b.documentId])return a.documents;let{[b.documentId]:c,...d}=a.documents;return d}})},actors:{documentMutatorMachine:ez}}).createMachine({id:"dataset-mutator",context:({input:a})=>({documents:{},client:a.client,sharedListener:a.sharedListener}),on:{sync:{actions:["emit sync event"]},mutation:{actions:["emit mutation event"]},"rebased.*":{actions:["emit rebased event"]},pristine:{actions:["emit pristine event"]},observe:{actions:["add document actor"]},unobserve:{actions:["stop remote snapshot","remove remote snapshot from context"]}},initial:"pristine",states:{pristine:{}}}),eC=a=>{let b,c,d,e,f=(0,p.c)(8),{comlink:g,history:h}=a;return f[0]!==g||f[1]!==h?(b=()=>g?.on("presentation/navigate",a=>{h?.update(a)}),c=[g,h],f[0]=g,f[1]=h,f[2]=b,f[3]=c):(b=f[2],c=f[3]),(0,r.useEffect)(b,c),f[4]!==g||f[5]!==h?(d=()=>{if(h)return h.subscribe(a=>{a.title=a.title||document.title,g?.post("visual-editing/navigate",a)})},e=[g,h],f[4]=g,f[5]=h,f[6]=d,f[7]=e):(d=f[6],e=f[7]),(0,r.useEffect)(d,e),null},eD=a=>{let b,c,d=(0,p.c)(3),{comlink:e}=a;return d[0]!==e?(b=()=>{let a=()=>{e.post("visual-editing/meta",{title:document.title})},b=new MutationObserver(b=>{let[c]=b;"TITLE"===c.target.nodeName&&a()});return b.observe(document.head,{subtree:!0,characterData:!0,childList:!0}),a(),()=>b.disconnect()},c=[e],d[0]=e,d[1]=b,d[2]=c):(b=d[1],c=d[2]),(0,r.useEffect)(b,c),null};function eE(a){let b=new CustomEvent("sanity/dragEnd",{detail:a,cancelable:!0});window.dispatchEvent(b)}let eF=(0,r.createContext)(null);function eG(){let a=(0,r.useContext)(eF);if(!a)throw Error("Schema context is missing");return a}function eH(a,b,c,d){if(!a.type)throw Error("Node type is missing");return()=>b.patch(()=>(function(a,b,c){let{path:d,key:e}=ax(a);return[aa(d,Z([{_type:b,_key:aw()}],c,{_key:e}))]})(a,c,d))}function eI(a){let{node:b,doc:c}=a;return c?[{type:"action",label:"Duplicate",icon:by.TdU,action:function(a,b){if(!a.type)throw Error("Node type is missing");return()=>b.patch(async({getSnapshot:b})=>(function(a,b,c="after"){let{path:d,key:e}=ax(a);return[aa(d,Z({...am(b,a.path),_key:aw()},c,{_key:e}))]})(a,await b()))}(b,c),telemetryEvent:"Visual Editing Context Menu Item Duplicated"}]:[]}function eJ(a){let{node:b,doc:c}=a;return c?[{type:"action",label:"Remove",icon:by.YPx,action:function(a,b){if(!a.type)throw Error("Node type is missing");return()=>b.patch(async({getSnapshot:b})=>(function(a,b){let{path:c,key:d}=ax(a),e=am(b,c).findIndex(a=>a._key===d);return[aa(c,$(e,e+1))]})(a,await b()))}(b,c),telemetryEvent:"Visual Editing Context Menu Item Removed"}]:[]}async function eK(a,b=!0){let{node:c,doc:d}=a;if(!d)return[];let e=[],f=[],[g,h,i,j]=await Promise.all([ay(c,d,"previous"),ay(c,d,"next"),ay(c,d,"first"),ay(c,d,"last")]);return i.length&&f.push({type:"action",label:"To top",icon:by.VQ$,action:()=>d.patch(i),telemetryEvent:"Visual Editing Context Menu Item Moved"}),g.length&&f.push({type:"action",label:"Up",icon:by.Kpk,action:()=>d.patch(g),telemetryEvent:"Visual Editing Context Menu Item Moved"}),h.length&&f.push({type:"action",label:"Down",icon:by.ZLN,action:()=>d.patch(h),telemetryEvent:"Visual Editing Context Menu Item Moved"}),j.length&&f.push({type:"action",label:"To bottom",icon:by.wvk,action:()=>d.patch(j),telemetryEvent:"Visual Editing Context Menu Item Moved"}),f.length&&(e.push({type:"group",label:"Move",icon:by.ycB,items:f}),b&&e.push({type:"divider"})),e}async function eL(a){let{node:b,field:c,doc:d}=a,e=[];return e.push(...eI(a)),e.push(...eJ(a)),e.push(...await eK(a)),e.push({type:"action",label:"Insert before",icon:by.SKY,action:eH(b,d,c.name,"before"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}),e.push({type:"action",label:"Insert after",icon:by.amD,action:eH(b,d,c.name,"after"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}),e}let eM=a=>{let b,c,d,e,f,g=(0,p.c)(12),{label:h,parent:i,width:j,onSelect:k,boundaryElement:l}=a;return g[0]===Symbol.for("react.memo_cache_sentinel")?(b=["left-start","right","left","right-end","left-end","bottom","top"],g[0]=b):b=g[0],g[1]===Symbol.for("react.memo_cache_sentinel")?(c=[4,4,4,4],g[1]=c):c=g[1],g[2]!==l||g[3]!==j?(d={arrow:!1,constrainSize:!0,floatingBoundary:l,padding:0,placement:"right-start",fallbackPlacements:b,preventOverflow:!0,width:j,__unstable_margins:c},g[2]=l,g[3]=j,g[4]=d):d=g[4],g[5]!==k||g[6]!==i?(e=(0,o.jsx)(bL,{node:i,onSelect:k}),g[5]=k,g[6]=i,g[7]=e):e=g[7],g[8]!==h||g[9]!==d||g[10]!==e?(f=(0,o.jsx)(I.rX,{fontSize:1,icon:by.amD,padding:2,popover:d,space:2,text:h,children:e}),g[8]=h,g[9]=d,g[10]=e,g[11]=f):f=g[11],f};async function eN(a){let{doc:b,node:c,parent:d}=a,e=[];if(e.push(...eI(a)),e.push(...eJ(a)),e.push(...await eK(a)),d.options?.insertMenu){let a=(d.options.insertMenu||{}).views?.some(a=>"grid"===a.name)?0:void 0;e.push({type:"custom",component:({boundaryElement:e,sendTelemetry:f})=>(0,o.jsx)(eM,{label:"Insert before",onSelect:a=>{eH(c,b,a.name,"before")(),f("Visual Editing Context Menu Item Inserted",null)},parent:d,width:a,boundaryElement:e})}),e.push({type:"custom",component:({boundaryElement:e,sendTelemetry:f})=>(0,o.jsx)(eM,{label:"Insert after",onSelect:a=>{eH(c,b,a.name,"after")(),f("Visual Editing Context Menu Item Inserted",null)},parent:d,width:a,boundaryElement:e})})}else e.push({type:"group",label:"Insert before",icon:by.SKY,items:d.of.filter(a=>"unionOption"===a.type).map(a=>({type:"action",icon:bz(a),label:"block"===a.name?"Paragraph":a.title||a.name,action:eH(c,b,a.name,"before"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}))}),e.push({type:"group",label:"Insert after",icon:by.amD,items:d.of.filter(a=>"unionOption"===a.type).map(a=>({type:"action",label:"block"===a.name?"Paragraph":a.title||a.name,icon:bz(a),action:eH(c,b,a.name,"after"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}))});return e}let eO=[-4,4,-4,4];function eP(a){let b,c=(0,p.c)(27),{node:d,onDismiss:e,boundaryElement:f}=a,g=bJ();c[0]!==d||c[1]!==e||c[2]!==g?(b=()=>{"action"===d.type&&(d.action?.(),e?.(),d.telemetryEvent&&g(d.telemetryEvent,null))},c[0]=d,c[1]=e,c[2]=g,c[3]=b):b=c[3];let h=b;if("divider"===d.type){let a;return c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(I.Nj,{}),c[4]=a):a=c[4],a}if("action"===d.type){let a,b=!d.action;return c[5]!==d.hotkeys||c[6]!==d.icon||c[7]!==d.label||c[8]!==h||c[9]!==b?(a=(0,o.jsx)(I.Dr,{fontSize:1,hotkeys:d.hotkeys,icon:d.icon,padding:2,space:2,text:d.label,disabled:b,onClick:h}),c[5]=d.hotkeys,c[6]=d.icon,c[7]=d.label,c[8]=h,c[9]=b,c[10]=a):a=c[10],a}if("group"===d.type){let a,b,g,h=d.icon;c[11]===Symbol.for("react.memo_cache_sentinel")?(a={arrow:!1,constrainSize:!0,placement:"right-start",fallbackPlacements:["left-start","right","left","right-end","left-end","bottom","top"],preventOverflow:!0,__unstable_margins:eO},c[11]=a):a=c[11];let i=d.label;if(c[12]!==f||c[13]!==d.items||c[14]!==e){let a;c[16]!==f||c[17]!==e?(a=(a,b)=>(0,o.jsx)(eP,{node:a,onDismiss:e,boundaryElement:f},b),c[16]=f,c[17]=e,c[18]=a):a=c[18],b=d.items.map(a),c[12]=f,c[13]=d.items,c[14]=e,c[15]=b}else b=c[15];return c[19]!==d.icon||c[20]!==d.label||c[21]!==b?(g=(0,o.jsx)(I.rX,{fontSize:1,icon:h,padding:2,popover:a,space:2,text:i,children:b}),c[19]=d.icon,c[20]=d.label,c[21]=b,c[22]=g):g=c[22],g}if("custom"===d.type){let a,{component:b}=d;return c[23]!==b||c[24]!==f||c[25]!==g?(a=(0,o.jsx)(b,{boundaryElement:f,sendTelemetry:g}),c[23]=b,c[24]=f,c[25]=g,c[26]=a):a=c[26],a}return null}let eQ=a=>{let b,c,d,e,f,g,h,i,j,k,l,m,n,q,s,t=(0,p.c)(43),{node:u,onDismiss:v,position:w}=a,{x,y}=w,[z,A]=(0,r.useState)(null),{getField:B}=eG(),{getDocument:C}=au();t[0]!==B||t[1]!==u?(b=B(u),t[0]=B,t[1]=u,t[2]=b):b=t[2];let{field:D,parent:E}=b,F=D?.title||D?.name||"Unknown type",[G,H]=(0,r.useState)(void 0);t[3]!==D||t[4]!==C||t[5]!==u||t[6]!==E?(c=()=>{(async()=>{let a=C(u.id);a&&H(await function(a){let{node:b,field:c,parent:d,doc:e}=a;return c?.type==="arrayItem"?eL({node:b,field:c,doc:e}):d?.type==="union"?eN({node:b,parent:d,doc:e}):Promise.resolve([])}({node:u,field:D,parent:E,doc:a}))})()},d=[D,u,E,C],t[3]=D,t[4]=C,t[5]=u,t[6]=E,t[7]=c,t[8]=d):(c=t[7],d=t[8]),(0,r.useEffect)(c,d),t[9]!==x||t[10]!==y?(e={getBoundingClientRect:()=>({bottom:y,left:x,right:x,top:y,width:0,height:0})},t[9]=x,t[10]=y,t[11]=e):e=t[11];let J=e;t[12]!==D?(f=bz(D),t[12]=D,t[13]=f):f=t[13];let K=f;t[14]===Symbol.for("react.memo_cache_sentinel")?(g={minWidth:120,maxWidth:160},t[14]=g):g=t[14],t[15]!==K||t[16]!==G?(h=(0,o.jsx)(I.az,{flex:"none",children:G?(0,o.jsx)(I.EY,{size:1,children:K}):(0,o.jsx)(I.y$,{size:1})}),t[15]=K,t[16]=G,t[17]=h):h=t[17];let L=G?F:"Loading...";t[18]!==L?(i=(0,o.jsx)(I.BJ,{flex:1,space:2,children:(0,o.jsx)(I.EY,{size:1,weight:"semibold",children:L})}),t[18]=L,t[19]=i):i=t[19],t[20]!==h||t[21]!==i?(j=(0,o.jsxs)(I.so,{gap:2,padding:2,children:[h,i]}),t[20]=h,t[21]=i,t[22]=j):j=t[22],t[23]!==z||t[24]!==G||t[25]!==v?(k=G&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I.Nj,{}),G.map((a,b)=>(0,o.jsx)(eP,{node:a,onDismiss:v,boundaryElement:z},b))]}),t[23]=z,t[24]=G,t[25]=v,t[26]=k):k=t[26],t[27]!==j||t[28]!==k?(l=(0,o.jsxs)(I.W1,{style:g,children:[j,k]}),t[27]=j,t[28]=k,t[29]=l):l=t[29];let M=`${x}-${y}`;return t[30]!==x||t[31]!==y?(m={position:"absolute",left:x,top:y},t[30]=x,t[31]=y,t[32]=m):m=t[32],t[33]!==M||t[34]!==m?(n=(0,o.jsx)("div",{style:m},M),t[33]=M,t[34]=m,t[35]=n):n=t[35],t[36]!==J||t[37]!==l||t[38]!==n?(q=(0,o.jsx)(I.AM,{__unstable_margins:eO,arrow:!1,open:!0,placement:"right-start",referenceElement:J,content:l,children:n}),t[36]=J,t[37]=l,t[38]=n,t[39]=q):q=t[39],t[40]!==v||t[41]!==q?(s=(0,o.jsx)(bD,{setBoundaryElement:A,onDismiss:v,children:q}),t[40]=v,t[41]=q,t[42]=s):s=t[42],s},eR=(0,r.createContext)(null),eS=(0,J.I4)(I.Zp)`
  background-color: var(--overlay-bg);
  border-radius: 3px;
  pointer-events: none;
  position: absolute;
  will-change: transform;
  box-shadow: var(--overlay-box-shadow);
  transition: none;

  --overlay-bg: transparent;
  --overlay-box-shadow: inset 0 0 0 1px transparent;

  [data-overlays] & {
    --overlay-bg: color-mix(in srgb, transparent 95%, var(--card-focus-ring-color));
    --overlay-box-shadow: inset 0 0 0 2px
      color-mix(in srgb, transparent 50%, var(--card-focus-ring-color));
  }

  [data-fading-out] & {
    transition:
      box-shadow 1550ms,
      background-color 1550ms;

    --overlay-bg: rgba(0, 0, 255, 0);
    --overlay-box-shadow: inset 0 0 0 1px transparent;
  }

  &[data-focused] {
    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);
  }

  &[data-hovered]:not([data-focused]) {
    transition: none;
    --overlay-box-shadow: inset 0 0 0 2px var(--card-focus-ring-color);
  }

  /* [data-unmounted] & {
    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);
  } */

  :link {
    text-decoration: none;
  }
`,eT=(0,J.I4)(I.so)`
  bottom: 100%;
  cursor: pointer;
  pointer-events: none;
  position: absolute;
  right: 0;

  [data-hovered]:not([data-menu-open]) & {
    pointer-events: all;
  }

  [data-flipped] & {
    bottom: auto;
    top: 100%;
  }
`,eU=(0,J.I4)(I.so)`
  top: 100%;
  cursor: pointer;
  pointer-events: none;
  position: absolute;
  left: 0;

  gap: 4px;
  padding: 4px 0;
  flex-wrap: wrap;

  [data-hovered]:not([data-menu-open]) & {
    pointer-events: all;
  }

  [data-flipped] & {
    top: calc(100% + 2rem);
  }
`,eV=(0,J.I4)(I.so)`
  margin: -0.5rem;

  [data-hovered]:not([data-menu-open]) & {
    pointer-events: all;
  }
`,eW=(0,J.I4)(I.so)`
  bottom: 100%;
  cursor: pointer;
  pointer-events: none;
  position: absolute;
  left: 0;

  [data-hovered]:not([data-menu-open]) & {
    pointer-events: all;
  }

  [data-flipped] & {
    bottom: auto;
    top: 100%;
  }
`,eX=(0,J.I4)(I.Zp)`
  cursor: pointer;
  background-color: var(--card-focus-ring-color);
  right: 0;
  border-radius: 3px;

  & [data-ui='Text'] {
    color: #fff;
    white-space: nowrap;
  }
`,eY=(0,J.I4)(I.so)`
  display: flex;
  align-items: center;
  background-color: var(--card-focus-ring-color);
  right: 0;
  border-radius: 3px;
  & [data-ui='Text'],
  & [data-sanity-icon] {
    color: #fff;
    white-space: nowrap;
  }
`,eZ=J.I4.div`
  position: absolute;
  inset: 0;
  pointer-events: all;
`,e$=a=>{let b,c,d,e,f,g,h,i,j,k,l,m,n,q,s,t,u,v=(0,p.c)(59),{id:w,element:x,focused:y,componentResolver:A,node:B,showActions:D,draggable:G,targets:J,elementType:K,comlink:L,onActivateExclusivePlugin:M,onMenuOpenChange:N}=a,{getField:O,getType:P}=eG();v[0]!==P||v[1]!==B?(b=P(B),v[0]=P,v[1]=B,v[2]=b):b=v[2];let Q=b;v[3]!==B?(c="path"in B?function(a){let{id:b,type:c,path:d,baseUrl:e,tool:f,workspace:g}=a;return function(a){let{baseUrl:b,workspace:c="default",tool:d="default",id:e,type:f,path:g,projectId:h,dataset:i}=a;if(!b)throw Error("baseUrl is required");if(!g)throw Error("path is required");if(!e)throw Error("id is required");if("/"!==b&&b.endsWith("/"))throw Error("baseUrl must not end with a slash");let j="default"===c?void 0:c,k="default"===d?void 0:d,l=H(e),m=Array.isArray(g)?z(g.map(a=>{if("string"==typeof a||"number"==typeof a)return a;if(""!==a._key)return{_key:a._key};if(-1!==a._index)return a._index;throw Error(`invalid segment:${JSON.stringify(a)}`)})):g,n=new URLSearchParams({baseUrl:b,id:l,type:f,path:m});if(j&&n.set("workspace",j),k&&n.set("tool",k),h&&n.set("projectId",h),i&&n.set("dataset",i),E(e)||F(e)){if(F(e)){let a=function(a){if(!F(a))return;let[b,c,...d]=a.split(".");return c}(e);n.set("perspective",a)}}else n.set("perspective","published");let o=["/"===b?"":b];j&&o.push(j);let p=["mode=presentation",`id=${l}`,`type=${f}`,`path=${encodeURIComponent(m)}`];return k&&p.push(`tool=${k}`),o.push("intent","edit",`${p.join(";")}?${n}`),o.join("/")}({baseUrl:e,workspace:g,tool:f,type:c,id:b,path:d?function(a){let b="";for(let c of a){if("string"==typeof c){b&&(b+="."),b+=c;continue}if("number"==typeof c){b&&(b+=":"),b+=`${c}`;continue}if(null!==c&&Array.isArray(c)){b&&(b+=":"),b+=`${c.join(",")}}`;continue}if(c._key){b&&(b+=":"),b+=`${c._key}`;continue}}return b}(C.fromString(d)):[]})}(B):B.href,v[3]=B,v[4]=c):c=v[4];let R=c,S=function(){let a=(0,r.useContext)(eR);if(!a)throw Error("Preview Snapshots context is missing");return a}();a:{let a;if(!("path"in B)){d=void 0;break a}v[5]!==B||v[6]!==S?(a=S.find(a=>a._id===B.id)?.title,v[5]=B,v[6]=S,v[7]=a):a=v[7],d=a}let T=d;v[8]!==x||v[9]!==y||v[10]!==O||v[11]!==P?(e=function(a,b){let c=P(a),{field:d,parent:e}=O(a);if(!("id"in a)||!d||!c)return;let f=d.value.type;return{document:c,element:x,targetElement:b||x,field:d,focused:!!y,node:a,parent:e,type:f}},v[8]=x,v[9]=y,v[10]=O,v[11]=P,v[12]=e):e=v[12];let U=e;if(v[13]!==K||v[14]!==U||v[15]!==B?(f="element"===K?U(B):void 0,v[13]=K,v[14]=U,v[15]=B,v[16]=f):f=v[16],v[17]!==U||v[18]!==J){let a;v[20]!==U?(a=a=>U(a.sanity,a.element),v[20]=U,v[21]=a):a=v[21],g=J.map(a).filter(e2),v[17]=U,v[18]=J,v[19]=g}else g=v[19];v[22]!==f||v[23]!==g?(h={legacyComponentContext:f,pluginContexts:g},v[22]=f,v[23]=g,v[24]=h):h=v[24];let V=h,W=function(a,b){let c,d=(0,p.c)(4);a:{let e;if(!a){c=void 0;break a}if(d[0]!==a||d[1]!==b){let f=b?.(a);if(!f){c=void 0;break a}if((0,r.isValidElement)(f)){c=f;break a}e=(Array.isArray(f)?f:[f]).map(e0),d[0]=a,d[1]=b,d[2]=e,d[3]=c}else e=d[2],c=d[3];c=e}return c}(V.legacyComponentContext,A),X=function(a,b){let c,d=(0,p.c)(5);if(d[0]!==a||d[1]!==b){let e;d[3]!==b?(e=a=>{let c={id:a2(),context:a,hud:[],exclusive:[]};return b?.forEach(b=>{b.guard?.(a)&&("hud"===b.type&&c.hud.push(b),"exclusive"===b.type&&c.exclusive.push(b))}),c},d[3]=b,d[4]=e):e=d[4],c=a.map(e),d[0]=a,d[1]=b,d[2]=c}else c=d[2];return c}(V.pluginContexts,a.plugins);v[25]!==Q?(i=Q?.icon?(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:Q.icon}}):(0,o.jsx)(by.pyG,{}),v[25]=Q,v[26]=i):i=v[26];let Y=i,Z=(0,r.useId)();v[27]!==X?(j=X?.some(e3),v[27]=X,v[28]=j):j=v[28];let $=j||X?.length>1;v[29]!==w?(k=()=>{window.dispatchEvent(new CustomEvent("sanity-overlay/label-click",{detail:{id:w}}))},v[29]=w,v[30]=k):k=v[30];let _=k;return v[31]!==R||v[32]!==D?(l=D?(0,o.jsx)(eT,{gap:1,paddingY:1,children:(0,o.jsx)(e1,{href:R})}):null,v[31]=R,v[32]=D,v[33]=l):l=v[33],v[34]!==L||v[35]!==G||v[36]!==_||v[37]!==Y||v[38]!==Z||v[39]!==X||v[40]!==M||v[41]!==N||v[42]!==$||v[43]!==T?(m=(T||$)&&(0,o.jsx)(eW,{gap:1,paddingY:1,onClick:_,children:(0,o.jsxs)(eY,{gap:2,padding:2,children:[G&&(0,o.jsx)(I.az,{marginRight:1,children:(0,o.jsx)(I.EY,{className:"drag-handle",size:0,children:(0,o.jsx)(by.GG1,{})})}),(0,o.jsx)(I.EY,{size:0,children:Y}),T&&(0,o.jsx)(I.EY,{size:1,weight:"medium",children:T}),$&&(0,o.jsx)(I.az,{paddingLeft:2,onClick:e4,children:(0,o.jsx)(eV,{children:(0,o.jsx)(bP.IU,{id:Z,popover:{animate:!0,placement:"bottom-start",constrainSize:!0,tone:"default"},onOpen:()=>{N?.(!0)},onClose:()=>{N?.(!1)},button:(0,o.jsx)(I.$n,{icon:by.Lz$,tone:"primary",padding:2}),menu:(0,o.jsx)(I.W1,{paddingY:0,children:(0,o.jsx)(bO,{children:X?.map((a,b)=>(0,o.jsxs)(r.Fragment,{children:[(0,o.jsxs)(I.BJ,{role:"group",paddingY:1,space:0,children:[(0,o.jsx)(I.Dr,{paddingY:2,text:(0,o.jsx)(I.az,{paddingY:2,children:(0,o.jsx)(I.EY,{muted:!0,size:1,style:{textTransform:"capitalize"},children:`${a.context.document.name}: ${a.context.field?.name}`})}),onClick:()=>{a.context.node&&L?.post("visual-editing/focus",a.context.node)}}),a.exclusive.map(b=>b.component?(0,o.jsx)(I.Dr,{paddingY:2,icon:b.icon||(0,o.jsx)(by.gP2,{}),text:(0,o.jsx)(I.az,{paddingY:2,children:(0,o.jsx)(I.EY,{size:1,children:b.title||b.name})}),onClick:()=>M?.(b,a.context)},b.name):null)]}),b<X.length-1&&(0,o.jsx)(I.Nj,{})]},a.id))})})})})})]})}),v[34]=L,v[35]=G,v[36]=_,v[37]=Y,v[38]=Z,v[39]=X,v[40]=M,v[41]=N,v[42]=$,v[43]=T,v[44]=m):m=v[44],v[45]!==X?(n=X?.map(e5),v[45]=X,v[46]=n):n=v[46],v[47]!==n?(q=(0,o.jsx)(eU,{children:n}),v[47]=n,v[48]=q):q=v[48],v[49]!==l||v[50]!==m||v[51]!==q?(s=(0,o.jsxs)(bO,{children:[l,m,q]}),v[49]=l,v[50]=m,v[51]=q,v[52]=s):s=v[52],v[53]!==W||v[54]!==V.legacyComponentContext?(t=Array.isArray(W)?W.map((a,b)=>{let{component:c,props:d}=a;return(0,o.jsx)(c,{PointerEvents:bO,...V.legacyComponentContext,...d},b)}):W,v[53]=W,v[54]=V.legacyComponentContext,v[55]=t):t=v[55],v[56]!==s||v[57]!==t?(u=(0,o.jsxs)(o.Fragment,{children:[s,t]}),v[56]=s,v[57]=t,v[58]=u):u=v[58],u},e_=(0,r.memo)(function(a){let b,c,d,e,f,g,h,i,j,k,l,m,n,q=(0,p.c)(38),{draggable:s,focused:t,hovered:u,rect:v,wasMaybeCollapsed:w,enableScrollIntoView:x}=a,y=(0,r.useRef)(null),z=(0,r.useRef)(!1),A=`${v.w}px`,B=`${v.h}px`,C=`translate(${v.x}px, ${v.y}px)`;q[0]!==A||q[1]!==B||q[2]!==C?(b={width:A,height:B,transform:C},q[0]=A,q[1]=B,q[2]=C,q[3]=b):b=q[3];let D=b;q[4]!==x||q[5]!==t||q[6]!==w?(c=()=>{if(!z.current&&!w&&!0===t&&y.current&&x){let a=y.current;(0,bQ.A)(y.current,{behavior:b=>{0!==b.length&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},scrollMode:"if-needed",block:"center",inline:"nearest"})}z.current=!0===t},d=[t,w,x],q[4]=x,q[5]=t,q[6]=w,q[7]=c,q[8]=d):(c=q[7],d=q[8]),(0,r.useEffect)(c,d);let[E,F]=(0,r.useState)(!1);q[9]!==u?(e=()=>{if(!y.current||!u)return;let a=new IntersectionObserver(a=>{let[b]=a;F(b.boundingClientRect.top<0)},{threshold:1});return a.observe(y.current),()=>a.disconnect()},q[9]=u,q[10]=e):e=q[10],q[11]!==u||q[12]!==E?(f=[u,E],q[11]=u,q[12]=E,q[13]=f):f=q[13],(0,r.useEffect)(e,f);let[G,H]=(0,r.useState)(null);q[14]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{H(null),window.dispatchEvent(new CustomEvent("sanity-overlay/exclusive-plugin-closed"))},q[14]=g):g=q[14];let I=g;q[15]===Symbol.for("react.memo_cache_sentinel")?(h=(a,b)=>{H({plugin:a,context:b})},q[15]=h):h=q[15];let J=h,K=G?.plugin.component,[L,M]=(0,r.useState)(!1);q[16]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{M(!1)},q[16]=i):i=q[16],q[17]!==u?(j=[u],q[17]=u,q[18]=j):j=q[18],(0,r.useEffect)(i,j),q[19]!==K||q[20]!==L?(k=L||K?(0,o.jsx)(bE,{onDismiss:I,blockScroll:L}):null,q[19]=K,q[20]=L,q[21]=k):k=q[21];let N=t?"":void 0,O=u?"":void 0,P=E?"":void 0,Q=s?"":void 0,R=L?"":void 0;return q[22]!==K||q[23]!==G||q[24]!==u||q[25]!==a?(l=K?(0,o.jsx)(eZ,{"data-sanity-overlay-element":!0,onClick:e6,children:(0,o.jsx)(K,{...G.context,closeExclusiveView:I})}):u?(0,o.jsx)(e$,{...a,onActivateExclusivePlugin:J,onMenuOpenChange:M}):null,q[22]=K,q[23]=G,q[24]=u,q[25]=a,q[26]=l):l=q[26],q[27]!==D||q[28]!==N||q[29]!==O||q[30]!==P||q[31]!==Q||q[32]!==R||q[33]!==l?(m=(0,o.jsx)(eS,{"data-focused":N,"data-hovered":O,"data-flipped":P,"data-draggable":Q,"data-menu-open":R,ref:y,style:D,children:l}),q[27]=D,q[28]=N,q[29]=O,q[30]=P,q[31]=Q,q[32]=R,q[33]=l,q[34]=m):m=q[34],q[35]!==k||q[36]!==m?(n=(0,o.jsxs)(o.Fragment,{children:[k,m]}),q[35]=k,q[36]=m,q[37]=n):n=q[37],n});function e0(a){return"object"==typeof a&&"component"in a?a:{component:a,props:{}}}let e1=(0,r.memo)(function(a){let b,c,d,e=(0,p.c)(6),f=(0,r.useSyncExternalStore)(e7,e8);e[0]!==a.href||e[1]!==f?(b=function a(b,c){try{let d=new URL(b,typeof location>"u"?void 0:location.origin);if(d.hash){let b=new URL(a(d.hash.slice(1),c));return`${d.origin}${d.pathname}${d.search}#${b.pathname}${b.search}`}return d.searchParams.set("preview",c),d.toString()}catch{return b}}(a.href,f),e[0]=a.href,e[1]=f,e[2]=b):b=e[2];let g=b;return e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(eX,{padding:2,children:(0,o.jsx)(I.EY,{size:1,weight:"medium",children:"Open in Studio"})}),e[3]=c):c=e[3],e[4]!==g?(d=(0,o.jsx)(I.az,{as:"a",href:g,target:"_blank",rel:"noopener noreferrer",children:c}),e[4]=g,e[5]=d):d=e[5],d});function e2(a){return void 0!==a}function e3(a){return a.exclusive.length>0}function e4(a){a.stopPropagation()}function e5(a){return(0,o.jsx)(r.Fragment,{children:a.hud.map(b=>{let c=b.component;return c?(0,o.jsx)(c,{...a.context},b.name):null})},a.id)}function e6(a){a.stopPropagation()}function e7(a){let b=()=>a();return window.addEventListener("popstate",b),()=>window.removeEventListener("popstate",b)}function e8(){return window.location.href}let e9=a=>{let b,c=(0,p.c)(5),{dragGroupRect:d}=a,e=`${d.y}px`,f=`${d.x}px`,g=`${d.w-1}px`,h=`${d.h-1}px`;return c[0]!==e||c[1]!==f||c[2]!==g||c[3]!==h?(b=(0,o.jsx)("div",{style:{position:"absolute",top:e,left:f,width:g,height:h,border:"1px dashed #f0709b",pointerEvents:"none"}}),c[0]=e,c[1]=f,c[2]=g,c[3]=h,c[4]=b):b=c[4],b},fa=a=>{let b,c=(0,p.c)(4),{dragInsertPosition:d}=a;if(null===d)return;let e=d?.left||d?.right?"horizontal":"vertical",f=0,g=0,h=0,i=0;if("horizontal"===e){let{left:a,right:b}=d;if(h=6,b&&a){let c=a.rect.x+a.rect.w,d=b.rect.x,e=.0125*Math.min(b.rect.h,a.rect.h);f=.5*c+.5*d-3,g=a.rect.y+e,i=Math.min(b.rect.h,a.rect.h)-2*e}else if(b&&!a){let a=.0125*b.rect.h;f=b.rect.x-3,g=b.rect.y+a,i=b.rect.h-2*a}else if(a&&!b){let b=.0125*a.rect.h;f=a.rect.x+a.rect.w-3,g=a.rect.y+b,i=a.rect.h-2*b}}else{let{bottom:a,top:b}=d;if(a&&b){let c=Math.min(b.rect.x,a.rect.x),d=b.rect.y+b.rect.h,e=a.rect.y,j=.0125*Math.min(a.rect.w,b.rect.w);i=6,f=c+j,g=.5*d+.5*e-3,h=Math.max(a.rect.w,b.rect.w)-2*j}else if(a&&!b){let b=.0125*a.rect.w;f=a.rect.x+b,g=a.rect.y-3,h=a.rect.w-2*b,i=6}else if(b&&!a){let a=.0125*b.rect.w;f=b.rect.x+a,g=b.rect.y+b.rect.h-3,h=b.rect.w-2*a,i=6}}let j=`${h}px`,k=`${i}px`,l=`translate(${f}px, ${g}px)`;return c[0]!==j||c[1]!==k||c[2]!==l?(b=(0,o.jsx)("div",{style:{position:"absolute",width:j,height:k,transform:l,background:"#556bfc",border:"2px solid white",borderRadius:"999px",zIndex:"999999"}}),c[0]=j,c[1]=k,c[2]=l,c[3]=b):b=c[3],b},fb=J.I4.div`
  --drag-preview-opacity: 0.98;
  --drag-preview-skeleton-stroke: #ffffff;

  @media (prefers-color-scheme: dark) {
    --drag-preview-skeleton-stroke: #383d51;
  }

  position: fixed;
  display: grid;
  transform: ${({$scaleFactor:a,$width:b,$height:c})=>`translate(calc(var(--drag-preview-x) - ${b/2}px), calc(var(--drag-preview-y) - ${c/2}px)) scale(${a})`};
  width: ${({$width:a})=>`${a}px`};
  height: ${({$height:a})=>`${a}px`};
  z-index: 9999999;
  opacity: var(--drag-preview-opacity);
  cursor: move;

  .drag-preview-content-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    container-type: inline-size;
  }

  [data-ui='card'] {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .drag-preview-skeleton {
    position: absolute;
    inset: 0;

    rect {
      stroke: var(--drag-preview-skeleton-stroke);
    }
  }

  .drag-preview-handle {
    position: absolute;
    top: 4cqmin;
    left: 4cqmin;
    width: 6cqmin;
    fill: var(--drag-preview-handle-fill);
  }
`,fc=a=>{let b,c,d,e,f,g,h,i,j,k,l,m,n,q,r,s,t,u,v,w,x,y=(0,p.c)(50),{skeleton:z}=a,A=Math.min(z.maxWidth,window.innerWidth/2),B=z.w>A?A/z.w:1,C=z.offsetX*B,D=z.offsetY*B,E=(0,I.Xy)(),F=(0,I.M4)(),G=F.radius[~~function(a,b,c,d,e){var f;return f=(a-0)*(e-1)/1920+1,f<d?d:f>e?e:f}(z.w,0,0,1,F.radius.length-2)];if(y[0]!==C||y[1]!==D||y[2]!==E||y[3]!==G||y[4]!==B||y[5]!==z.childRects||y[6]!==z.h||y[7]!==z.w){let a=z.childRects.filter(fd),o=z.childRects.filter(fe);c=fb,e=z.w,f=z.h,g=C,h=D,i=B,b=I.Zp,m=G,n=4,q="hidden",r="transparent",s=E?"dark":"light",l="drag-preview-content-wrapper",j="drag-preview-skeleton",k=`0 0 ${z.w} ${z.h}`,d=[...a,...o],y[0]=C,y[1]=D,y[2]=E,y[3]=G,y[4]=B,y[5]=z.childRects,y[6]=z.h,y[7]=z.w,y[8]=b,y[9]=c,y[10]=d,y[11]=e,y[12]=f,y[13]=g,y[14]=h,y[15]=i,y[16]=j,y[17]=k,y[18]=l,y[19]=m,y[20]=n,y[21]=q,y[22]=r,y[23]=s}else b=y[8],c=y[9],d=y[10],e=y[11],f=y[12],g=y[13],h=y[14],i=y[15],j=y[16],k=y[17],l=y[18],m=y[19],n=y[20],q=y[21],r=y[22],s=y[23];return y[24]!==d||y[25]!==F.color?(t=d.map((a,b)=>(0,o.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,fill:F.color.skeleton.from},b)),y[24]=d,y[25]=F.color,y[26]=t):t=y[26],y[27]!==t||y[28]!==j||y[29]!==k?(u=(0,o.jsx)("svg",{className:j,viewBox:k,children:t}),y[27]=t,y[28]=j,y[29]=k,y[30]=u):u=y[30],y[31]!==u||y[32]!==l?(v=(0,o.jsx)("div",{className:l,children:u}),y[31]=u,y[32]=l,y[33]=v):v=y[33],y[34]!==b||y[35]!==v||y[36]!==m||y[37]!==n||y[38]!==q||y[39]!==r||y[40]!==s?(w=(0,o.jsx)(b,{radius:m,shadow:n,overflow:q,tone:r,scheme:s,children:v}),y[34]=b,y[35]=v,y[36]=m,y[37]=n,y[38]=q,y[39]=r,y[40]=s,y[41]=w):w=y[41],y[42]!==c||y[43]!==e||y[44]!==f||y[45]!==g||y[46]!==h||y[47]!==i||y[48]!==w?(x=(0,o.jsx)(c,{$width:e,$height:f,$offsetX:g,$offsetY:h,$scaleFactor:i,children:w}),y[42]=c,y[43]=e,y[44]=f,y[45]=g,y[46]=h,y[47]=i,y[48]=w,y[49]=x):x=y[49],x};function fd(a){return"IMG"===a.tagName}function fe(a){return"IMG"!==a.tagName}let ff=(0,J.I4)(I.Zp)`
  position: fixed;
  bottom: 2rem;
  left: 2rem;
`,fg=()=>{let a,b,c=(0,p.c)(2);return c[0]===Symbol.for("react.memo_cache_sentinel")?(a={zIndex:"999999"},c[0]=a):a=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(b=(0,o.jsx)(ff,{padding:2,shadow:2,radius:2,style:a,children:(0,o.jsxs)(I.so,{align:"center",gap:2,children:[(0,o.jsx)(I.qW,{keys:["Shift"]}),(0,o.jsx)(I.EY,{size:1,children:"Zoom Out"}),(0,o.jsx)(by.mSu,{})]})}),c[1]=b):b=c[1],b};function fh(a,b){let{type:c}=b,{contextMenu:d,focusPath:e,perspective:f,isDragging:g,dragInsertPosition:h,dragShowMinimap:i,dragShowMinimapPrompt:j,dragSkeleton:k,dragMinimapTransition:l,dragGroupRect:m}=a,n=!1;if("presentation/focus"===c){let c=a.focusPath;c!==(e=b.data.path)&&(n=c.slice(e.length).startsWith("["))}return"presentation/perspective"===c&&(f=b.data.perspective),"element/contextmenu"===c&&(d="sanity"in b?{node:b.sanity,position:b.position}:null),("element/click"===c||"element/mouseleave"===c||"overlay/blur"===c||"presentation/blur"===c||"presentation/focus"===c)&&(d=null),"overlay/dragUpdateInsertPosition"===c&&(h=b.insertPosition),"overlay/dragStart"===c&&(g=!0),"overlay/dragUpdateSkeleton"===b.type&&(k=b.skeleton),"overlay/dragEnd"===c&&(g=!1),"overlay/dragToggleMinimapPrompt"===b.type&&(j=b.display),"overlay/dragStartMinimapTransition"===c&&(l=!0),"overlay/dragEndMinimapTransition"===c&&(l=!1),"overlay/dragUpdateGroupRect"===c&&(m=b.groupRect),"overlay/dragToggleMinimap"===c&&(i=b.display),{...a,contextMenu:d,elements:((a,b)=>{let{type:c}=b;switch(c){case"element/register":return a.find(a=>a.id===b.id)?a:[...a,{id:b.id,activated:!1,element:b.element,focused:!1,hovered:!1,rect:b.rect,sanity:b.sanity,dragDisabled:b.dragDisabled,targets:b.targets,elementType:b.elementType}];case"element/activate":return a.map(a=>a.id===b.id?{...a,activated:!0}:a);case"element/update":return a.map(a=>a.id===b.id?{...a,sanity:b.sanity,rect:b.rect,targets:b.targets,elementType:b.elementType}:a);case"element/unregister":return a.filter(a=>a.id!==b.id);case"element/deactivate":return a.map(a=>a.id===b.id?{...a,activated:!1,hovered:!1}:a);case"element/mouseenter":return a.map(a=>a.id===b.id?{...a,rect:b.rect,hovered:!0}:{...a,hovered:!1});case"element/mouseleave":return a.map(a=>a.id===b.id?{...a,hovered:!1}:a);case"element/updateRect":return a.map(a=>a.id===b.id?{...a,rect:b.rect}:a);case"element/click":return a.map(a=>({...a,focused:a.id===b.id&&"clicked"}));case"overlay/reset-mouse-state":return a.map(a=>({...a,focused:!1,hovered:!1}));case"overlay/blur":return a.map(a=>({...a,focused:!1}));case"presentation/blur":return a.map(a=>({...a,focused:!1}));case"presentation/focus":{let c=a.find(a=>"clicked"===a.focused);return a.map(a=>{let d="path"in a.sanity&&a.sanity.id===b.data.id&&a.sanity.path===b.data.path;return c&&a===c&&d?a:{...a,focused:d&&c?"duplicate":d}})}default:return a}})(a.elements,b),dragInsertPosition:h,dragSkeleton:k,dragGroupRect:m,isDragging:g,focusPath:e,perspective:f,wasMaybeCollapsed:n,dragShowMinimap:i,dragShowMinimapPrompt:j,dragMinimapTransition:l}}let fi=function(a){let b,c,d,e,f,g,h,i=(0,p.c)(13),{comlink:j,children:k}=a;i[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],i[0]=b):b=i[0];let[l,m]=(0,r.useState)(b);i[1]!==j?(c=async a=>{if(j)try{let b=await j.fetch("visual-editing/preview-snapshots",void 0,{signal:a,suppressWarnings:!0});m(b.snapshots)}catch{}},i[1]=j,i[2]=c):c=i[2];let n=c;return i[3]!==j||i[4]!==n?(d=()=>{if(!j)return;let a=new AbortController,b=j.onStatus(()=>{n(a.signal)},"connected");return()=>{a.abort(),b()}},e=[j,n],i[3]=j,i[4]=n,i[5]=d,i[6]=e):(d=i[5],e=i[6]),(0,r.useEffect)(d,e),i[7]!==j?(f=()=>j?.on("presentation/preview-snapshots",a=>{m(a.snapshots)}),g=[j],i[7]=j,i[8]=f,i[9]=g):(f=i[8],g=i[9]),(0,r.useEffect)(f,g),i[10]!==k||i[11]!==l?(h=(0,o.jsx)(eR.Provider,{value:l,children:k}),i[10]=k,i[11]=l,i[12]=h):h=i[12],h};function fj(a){return"document"===a.type}function fk(a){return"type"===a.type}let fl=function(a){let b,c,d,e,f,g,h,i,j,k,l,m=(0,p.c)(22),{comlink:n,children:q,elements:s}=a;m[0]===Symbol.for("react.memo_cache_sentinel")?(b=new Map,m[0]=b):b=m[0];let[t,u]=(0,r.useState)(b),[v,w]=(0,r.useState)(null);m[1]!==n?(c=()=>{if(!n)return;let a=async function(a){if(n)try{let b=await n.fetch("visual-editing/schema",void 0,{signal:a,suppressWarnings:!0});w(b.schema)}catch{}},b=new AbortController,c=n.onStatus(()=>{a(b.signal)},"connected");return()=>{b.abort(),c()}},d=[n],m[1]=n,m[2]=c,m[3]=d):(c=m[2],d=m[3]),(0,r.useEffect)(c,d),m[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],m[4]=e):e=m[4];let x=(0,r.useRef)(e),y=(0,r.useDeferredValue)(s);m[5]!==y?(f=y.reduce((a,b)=>{let{sanity:c}=b;if(!("id"in c)||!c.path.includes("[_key=="))return a;let d=c.path.split(".").toReversed().reduce((a,b)=>a.length?[b,...a]:b.includes("[_key==")?[b]:[],[]).join(".");return a.find(a=>a.id===c.id&&a.path===d)||a.push({id:c.id,path:d}),a},[]),m[5]=y,m[6]=f):f=m[6];let z=f,A=(0,r.useRef)(null);m[7]!==n||m[8]!==z?(g=()=>{if(!z.length||!n)return;let a=async(a,b)=>{let c=x.current;try{x.current=a;let c=await n.fetch("visual-editing/schema-union-types",{paths:a},{signal:b,suppressWarnings:!0});if(b.aborted)return;u(c.types),A.current=null}catch{}b.aborted&&(x.current=c)};z.some(a=>!x.current.find(b=>{let{id:c,path:d}=b;return c===a.id&&d===a.path}))&&(A.current?.abort(),A.current=new AbortController,a(z,A.current.signal))},h=[n,z],m[7]=n,m[8]=z,m[9]=g,m[10]=h):(g=m[9],h=m[10]),(0,r.useEffect)(g,h),m[11]!==v?(i=(a,b)=>{if(!v||"string"!=typeof a&&(!("path"in a)||!Array.isArray(v)))return;let c="string"==typeof a?a:a.type;return v.filter("document"===(b||"document")?fj:fk).find(a=>a.name===c)},m[11]=v,m[12]=i):i=m[12];let B=i;m[13]!==B||m[14]!==t?(j=a=>{if(!("path"in a))return{field:void 0,parent:void 0};let b=B(a);if(!b)return{field:void 0,parent:void 0};let c=a.path.split(".").flatMap(fm);try{return function b(c,d,e,f){let g=void 0===f?[]:f;if(!c)return{field:void 0,parent:void 0};let[h,...i]=d;if("fields"in c){let a=c.fields[h];if(!a&&"rest"in c)return b(c.rest,d,c,g);if(!i.length)return{field:a,parent:e};if(!a)throw Error(`[@sanity/visual-editing] No field could be resolved at path: "${[...g,...d].join(".")}"`);return b(a.value,i,c,[...g,h])}if("array"===c.type)return b(c.of,d,c,g);if("arrayItem"===c.type)return i.length?b(c.value,i,c,[...g,h]):{field:c,parent:e};if("union"===c.type){let d=h.startsWith("[_key==")?t?.get(a.id)?.get([g.join("."),h].filter(Boolean).join("")):h;return b(c.of.find(a=>"unionOption"===a.type?a.name===d:a),i,c,[...g,h])}if("unionOption"===c.type)return h?b(c.value,d,c,g):{field:c,parent:e};if("inline"===c.type)return b(B(c.name,"type").value,d,c,g);throw Error(`[@sanity/visual-editing] No field could be resolved at path: "${[...g,...d].join(".")}"`)}(b,c,void 0)}catch(a){return a instanceof Error&&console.warn(a.message),{field:void 0,parent:void 0}}},m[13]=B,m[14]=t,m[15]=j):j=m[15];let C=j;m[16]!==C||m[17]!==B?(k={getField:C,getType:B},m[16]=C,m[17]=B,m[18]=k):k=m[18];let D=k;return m[19]!==q||m[20]!==D?(l=(0,o.jsx)(eF.Provider,{value:D,children:q}),m[19]=q,m[20]=D,m[21]=l):l=m[21],l};function fm(a){return a.includes("[")?a.split(/(\[.+\])/,2):[a]}let fn=(a=>{let b=a,c=new Set;return{getState:()=>b,setState:a=>{b=a(b),c.forEach(a=>a())},subscribe:a=>(c.add(a),()=>c.delete(a))}})({}),fo=a=>{let b,c,d,e,f,g,h=(0,p.c)(11),{comlink:i,children:j}=a;h[0]!==i?(b=()=>i?.on("presentation/shared-state",fp),c=[i],h[0]=i,h[1]=b,h[2]=c):(b=h[1],c=h[2]),(0,r.useEffect)(b,c),h[3]!==i?(d=()=>{(async function(){let a=await i?.fetch("visual-editing/shared-state",void 0,{suppressWarnings:!0});a&&fn.setState(()=>a.state)})().catch(fq)},e=[i],h[3]=i,h[4]=d,h[5]=e):(d=h[4],e=h[5]),(0,r.useEffect)(d,e),h[6]!==i?(f={comlink:i,store:fn},h[6]=i,h[7]=f):f=h[7];let k=f;return h[8]!==j||h[9]!==k?(g=(0,o.jsx)(bw.Provider,{value:k,children:j}),h[8]=j,h[9]=k,h[10]=g):g=h[10],g};function fp(a){"value"in a?fn.setState(b=>({...b,[a.key]:a.value})):fn.setState(b=>Object.fromEntries(Object.entries(b).filter(b=>{let[c]=b;return c!==a.key})))}function fq(a){console.debug(a),console.warn("[@sanity/visual-editing]: Failed to fetch shared state. Check your version of `sanity` is up-to-date")}let fr=a=>{let b,c,d=(0,p.c)(5),{children:e,comlink:f}=a;d[0]!==f?(b=(a,b)=>{if(!f)return;let c=bH[a];if(c)f.post("visual-editing/telemetry-log",{event:c,data:b});else throw Error(`Telemetry event: ${a} does not exist`)},d[0]=f,d[1]=b):b=d[1];let g=b;return d[2]!==e||d[3]!==g?(c=(0,o.jsx)(bI.Provider,{value:g,children:e}),d[2]=e,d[3]=g,d[4]=c):c=d[4],c};function fs(){}function ft(a){return a.id}function fu(a){return!!a}function fv(a){let{sanity:b}=a;return b&&"id"in b?b:null}let fw=J.I4.div`
  background-color: transparent;
  direction: ltr;
  inset: 0;
  pointer-events: none;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${({$zIndex:a})=>a??"9999999"};
`;function fx(a){let b,c;return b=requestAnimationFrame(()=>{c=requestAnimationFrame(a)}),()=>{void 0!==b&&cancelAnimationFrame(b),void 0!==c&&cancelAnimationFrame(c)}}let fy=a=>{let b,c,d,e,f,g=(0,p.c)(8),{documentIds:h}=a;g[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],g[0]=b):b=g[0];let[i,j]=(0,r.useState)(b);g[1]!==h?(c=()=>{j(a=>{let b=Array.from(new Set(h));return a.length===b.length&&a.reduce(fD,b)?.length===0?a:b})},d=[h],g[1]=h,g[2]=c,g[3]=d):(c=g[2],d=g[3]),(0,r.useEffect)(c,d);let k=ao();return g[4]!==k||g[5]!==i?(e=()=>{for(let a of i)k.send({type:"observe",documentId:G(a)}),k.send({type:"observe",documentId:H(a)});return()=>{for(let a of i)k.send({type:"unobserve",documentId:G(a)}),k.send({type:"unobserve",documentId:H(a)})}},f=[k,i],g[4]=k,g[5]=i,g[6]=e,g[7]=f):(e=g[6],f=g[7]),(0,r.useEffect)(e,f),null},fz=a=>{let{comlink:b,dispatch:c,inFrame:d,inPopUp:e,onDrag:f,overlayEnabled:g,rootElement:h}=a,{dispatchDragEndEvent:i}=function(){let a,b,c,d=(0,p.c)(4),{getDocument:e}=au();return d[0]!==e?(a=()=>{let a=a=>{let{insertPosition:b,target:c,preventInsertDefault:d}=a.detail;if(d)return;let f=function(a){if(a){let{top:b,right:c,bottom:d,left:e}=a;if(e||b)return{node:(e??b).sanity,position:"after"};if(c||d)return{node:(c??d).sanity,position:"before"}}}(b);if(f){let a=e(c.id),{node:b,position:d}=f,{key:g,hasExplicitKey:h}=ax(c),{path:i,key:j}=ax(b);i&&j&&j!==g&&a.patch(async a=>{let{getSnapshot:b}=a,e=am(await b(),c.path);return h?[aa(i,_({_key:g})),aa(i,Z(e,d,{_key:j}))]:[aa(i,_(~~g)),aa(i,Z(e,d,j>g?~~j-1:~~j))]})}};return window.addEventListener("sanity/dragEnd",a),()=>{window.removeEventListener("sanity/dragEnd",a)}},b=[e],d[0]=e,d[1]=a,d[2]=b):(a=d[1],b=d[2]),(0,r.useEffect)(a,b),d[3]===Symbol.for("react.memo_cache_sentinel")?(c={dispatchDragEndEvent:eE},d[3]=c):c=d[3],c}(),j=bJ(),k=function(a,b,c,d){let e,f,g=(0,p.c)(7),h=(0,r.useRef)(void 0),i=ao()!==ac;return g[0]!==a||g[1]!==b||g[2]!==c||g[3]!==d||g[4]!==i?(e=()=>{if(a)return h.current=function({handler:a,overlayElement:b,inFrame:c,inPopUp:d,optimisticActorReady:e}){let f=!1,g=new Map,h=new WeakMap,i=new Set,j=new WeakMap,k=new WeakMap,l,m,n,o=!1,p=[],q=()=>p[p.length-1];function r(a,b){a.removeEventListener("click",b.click,{capture:!0}),a.removeEventListener("contextmenu",b.contextmenu,{capture:!0}),a.removeEventListener("mousemove",b.mousemove,{capture:!0}),a.removeEventListener("mousedown",b.mousedown,{capture:!0}),a.removeEventListener("mouseenter",b.mouseenter),a.removeEventListener("mouseleave",b.mouseleave)}function s({id:b,elements:c,handlers:d}){let{element:e,measureElement:f}=c;e.addEventListener("click",d.click,{capture:!0}),e.addEventListener("contextmenu",d.contextmenu,{capture:!0}),e.addEventListener("mousemove",d.mousemove,{once:!0,capture:!0}),e.addEventListener("mousedown",d.mousedown,{capture:!0}),l.observe(f),a({type:"element/activate",id:b})}function t({id:b,elements:c,handlers:d}){let{element:e,measureElement:f}=c;r(e,d),l.unobserve(f),p=p.filter(a=>a!==e),a({type:"element/deactivate",id:b})}function u(b){if(!(!c&&!d||!e))for(let c of p){if(b===c){let c=h.get(b)?.sanity;if(!c||!bq(c))return;if(bv(b,c,i,h)){let c=b.style.cursor;c&&k.set(b,c),a({type:"overlay/setCursor",element:b,cursor:"move"});continue}}v(c)}}function v(b){let c=k.get(b);a({type:"overlay/setCursor",element:b,cursor:c})}function w(k){for(let l of function a(b){let c=[];function d(a,b,c,d){let e=function(a){if("object"==typeof a&&null!==a)return aT(a);try{let b=JSON.parse(a);return aT(b)}catch{let b=a.split(";").reduce((a,b)=>{let[c,d]=b.split("=");if(!c||b.includes("=")&&!d)return a;switch(c){case"id":a.id=d;break;case"type":a.type=d;break;case"path":a.path=az.C.toString(function(a){let b=[];for(let c of a.split(".")){let a=aO.exec(c);if(a){b.push(a[1],Number(a[2]));continue}let d=aP.exec(c);if(d){b.push(d[1],[Number(d[2]),Number(d[3])]);continue}let e=aQ.exec(c);if(e){b.push(e[1],{_key:e[2]});continue}b.push(c)}return b}(d));break;case"base":a.baseUrl=decodeURIComponent(d);break;case"tool":a.tool=d;break;case"workspace":a.workspace=d;break;case"projectId":a.projectId=d;break;case"dataset":a.dataset=d}return a},{});if(!aN["~run"]({value:b},{abortEarly:!0}).issues)return b;return}}(b);if(!e)return;let f=function a(b){let{display:c}=window.getComputedStyle(b);if("inline"!==c)return b;let d=b.parentElement;return d?a(d):null}(a);if(f)return{elements:{element:a,measureElement:f},sanity:e,reason:c,preventGrouping:d}}if(b)for(let e of b.childNodes)!function b(e,f){let g=function(b){let{nodeType:c,parentElement:e,textContent:f}=b;if(b.nodeType===Node.ELEMENT_NODE&&b.dataset?.sanityEditTarget!==void 0){let c=br(a(b).map(a=>"element"===a.type?a.commonSanity:void 0).filter(a=>void 0!==a));if(c)return{reason:"edit-target",elements:{element:b,measureElement:b},sanity:c}}else if(c===Node.TEXT_NODE&&e&&f){let a=bp(f);return a?d(e,a,"stega-text",!0):void 0}else if(b.nodeType===Node.ELEMENT_NODE){if("SCRIPT"===b.tagName||"SANITY-VISUAL-EDITING"===b.tagName)return;if(b.dataset?.sanity)return d(b,b.dataset.sanity,"data-attribute",!!(b.textContent&&bo(b.textContent)));if(b.dataset?.sanityEditInfo)return d(b,b.dataset.sanityEditInfo,"data-attribute",!!(b.textContent&&bo(b.textContent)));if("IMG"===b.tagName){let a=bp(b.alt,!0);return a?d(b,a,"stega-attribute"):void 0}if("TIME"===b.tagName){let a=bp(b.dateTime,!0);return a?d(b,a,"stega-attribute"):void 0}if("SVG"===b.tagName.toUpperCase()){if(!b.ariaLabel)return;let a=bp(b.ariaLabel,!0);return a?d(b,a,"stega-attribute"):void 0}}}(e),h=f;if(e.nodeType===Node.ELEMENT_NODE&&e.dataset?.sanityEditGroup!==void 0&&(h={type:"group",elements:{element:e,measureElement:e},targets:[]},c.push(h)),g){let a={elements:g.elements,sanity:g.sanity,reason:g.reason};h&&!g.preventGrouping?h.targets.push(a):c.push({elements:g.elements,type:"element",targets:[a]})}if(e.nodeType===Node.ELEMENT_NODE&&"IMG"!==e.tagName&&"SCRIPT"!==e.tagName&&"SANITY-VISUAL-EDITING"!==e.tagName)for(let a of e.childNodes)b(a,h)}(e,void 0);return c.map(a=>{if(0===a.targets.length&&"group"===a.type)return{...a,commonSanity:void 0};let b=1===a.targets.length?a.targets[0].sanity:br(a.targets.map(({sanity:a})=>a).filter(a=>void 0!==a))||a.targets[0].sanity;return b?{...a,commonSanity:b}:null}).filter(a=>null!==a)}(k)){if("group"===l.type){for(let a of l.targets){let b=h.get(a.elements.element);b&&"element"===b.type&&x(a.elements.element)}0===l.targets.length&&x(l.elements.element)}if(!l.commonSanity)continue;let{element:k}=l.elements;h.has(k)?function(b){let{element:c}=b.elements,d=h.get(c);d&&(h.set(c,{...d,sanity:b.commonSanity}),a({type:"element/update",elementType:d.type,id:d.id,rect:a3(c),sanity:b.commonSanity,targets:b.targets.map(a=>({sanity:a.sanity,element:a.elements.element}))}))}(l):function({type:k,elements:l,commonSanity:n,targets:r}){let{element:t,measureElement:w}=l,x={click(b){let d=b.target;if(t===q()&&t.contains(d)){c&&(b.preventDefault(),b.stopPropagation());let d=h.get(t)?.sanity;d&&!o&&a({type:"element/click",id:y,sanity:d})}},contextmenu(b){if(!("path"in n)||!c&&!d||!e||!n.path.split(".").pop()?.includes("[_key=="))return;let f=b.target;t===q()&&t.contains(f)&&((c||d)&&(b.preventDefault(),b.stopPropagation()),a({type:"element/contextmenu",id:y,position:{x:b.clientX,y:b.clientY},sanity:n}))},mousedown(b){if(b.preventDefault(),b.currentTarget!==p.at(-1)||t.getAttribute("data-sanity-drag-disable")||!c&&!d||!e)return;let f=h.get(t)?.sanity;if(!f||!bq(f)||!bs(f.path))return;let g=bv(t,n,i,h);g&&function(a){var b;let{mouseEvent:c,element:d,overlayGroup:e,handler:f,target:g,onSequenceStart:h,onSequenceEnd:i}=a;if(0!==c.button)return;window.focus();let j=e.map(a=>a3(a.elements.element)),k=d.getAttribute("data-sanity-drag-flow")||((b=j).some(a=>b.filter(b=>!a5(a,b)).some(b=>a.y===b.y))?"horizontal":"vertical"),l=d.getAttribute("data-sanity-drag-group"),m=!!d.getAttribute("data-sanity-drag-minimap-disable"),n=!!d.getAttribute("data-sanity-drag-prevent-default"),o=d.getAttribute("data-unstable_sanity-drag-document-height"),p=d.getAttribute("data-unstable_sanity-drag-group-height"),q=null,r=bc(c),s=document.body,{minYScaled:t,scaleFactor:u}=function(a,b){let c=b||a9(a).height,d=(c+=200)>window.innerHeight?window.innerHeight/c:1,{min:e}=a9(a.map(a=>a8(a,d,{x:window.innerWidth/2,y:0})));return{scaleFactor:d,minYScaled:e-100*d}}(j,p?~~p:null),v=!1,w=!1,x=!0;bh||(bl={body:{overflow:window.getComputedStyle(document.body).overflow,height:window.getComputedStyle(document.body).height},documentElement:{overflow:window.getComputedStyle(document.documentElement).overflow,height:window.getComputedStyle(document.documentElement).height}},bk=o?~~o:document.documentElement.scrollHeight);let y=setInterval(()=>{j=e.map(a=>a3(a.elements.element))},150),z=()=>{u>=1||(f({type:"overlay/dragUpdateSkeleton",skeleton:bd(bj,d,u)}),f({type:"overlay/dragToggleMinimapPrompt",display:!1}),be(s,u,t,f,150).then(()=>{setTimeout(()=>{f({type:"overlay/dragUpdateGroupRect",groupRect:bf(j)})},300)}))},A=a=>{Math.abs(a.deltaY)>=10&&u<1&&!bh&&!w&&!m&&x&&(f({type:"overlay/dragToggleMinimapPrompt",display:!0}),w=!0),!a.shiftKey||bh||m||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),bh=!0,setTimeout(()=>{z()},50))},B=a=>{if(a.preventDefault(),bi=function(a){let b=document.body,c=window.getComputedStyle(b).transform;if("none"===c)return{x:a.x,y:a.y};let d=new DOMMatrix(c).inverse(),e=new DOMPoint(a.x,a.y).matrixTransform(d);return{x:e.x,y:e.y}}(bj=bc(a)),4>Math.abs(a6(bj,r)))return;if(!v){let a=bf(j),b=bd(bj,d,1);f({type:"overlay/dragStart",flow:k}),f({type:"overlay/dragUpdateSkeleton",skeleton:b}),f({type:"overlay/dragUpdateGroupRect",groupRect:a}),v=!0,h()}f({type:"overlay/dragUpdateCursorPosition",x:bj.x,y:bj.y}),!a.shiftKey||bh||m||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),bh=!0,setTimeout(()=>{z()},50));let b=function(a,b,c){if("horizontal"===c){let d={x1:a.x,y1:a.y,x2:a.x-1e8,y2:a.y},e={x1:a.x,y1:a.y,x2:a.x+1e8,y2:a.y};return{left:a7(d,b,c),right:a7(e,b,c)}}{let d={x1:a.x,y1:a.y,x2:a.x,y2:a.y-1e8},e={x1:a.x,y1:a.y,x2:a.x,y2:a.y+1e8};return{top:a7(d,b,c),bottom:a7(e,b,c)}}}(bj,j,k);JSON.stringify(q)!==JSON.stringify(b)&&f({type:"overlay/dragUpdateInsertPosition",insertPosition:bb(e,q=b,k)})},C=()=>{x=!1,f({type:"overlay/dragEnd",target:g,insertPosition:q?bb(e,q,k):null,dragGroup:l,flow:k,preventInsertDefault:n}),w&&f({type:"overlay/dragToggleMinimapPrompt",display:!1}),bh||(clearInterval(y),i(),H(),G()),F()},D=a=>{"Shift"===a.key&&bh&&(bh=!1,f({type:"overlay/dragUpdateSkeleton",skeleton:bd(bj,d,1/u)}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{bg(bi.y,s,bk,f,150,bl)},50),f({type:"overlay/dragUpdateGroupRect",groupRect:null}),x||(clearInterval(y),F(),H(),G(),i()))},E=()=>{f({type:"overlay/dragUpdateGroupRect",groupRect:null}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{bg(bi.y,s,bk,f,150,bl).then(()=>{bh=!1})},50),clearInterval(y),F(),H(),G(),i()},F=()=>{window.removeEventListener("mousemove",B),window.removeEventListener("wheel",A),window.removeEventListener("mouseup",C)},G=()=>{window.removeEventListener("keyup",D)},H=()=>{window.removeEventListener("blur",E)};window.addEventListener("blur",E),window.addEventListener("keyup",D),window.addEventListener("wheel",A),window.addEventListener("mousemove",B),window.addEventListener("mouseup",C)}({element:t,handler:a,mouseEvent:b,overlayGroup:g,target:f,onSequenceStart:()=>{o=!0},onSequenceEnd:()=>{setTimeout(()=>{o=!1},250)}})},mousemove(a){x.mouseenter(a);let b=a.currentTarget;b&&(b.addEventListener("mouseenter",x.mouseenter),b.addEventListener("mouseleave",x.mouseleave))},mouseenter(){document.querySelector("vercel-live-feedback")&&t.closest("[data-vercel-edit-info]")||t.closest("[data-vercel-edit-target]")||(p.push(t),a({type:"element/mouseenter",id:y,rect:a3(t)}),u(t))},mouseleave(c){function d(){p.pop();let b=q();if(a({type:"element/mouseleave",id:y}),b){u(b);let c=h.get(b);c&&a({type:"element/mouseenter",id:c.id,rect:a3(b)})}v(t)}let{relatedTarget:e}=c,f=bn(e),g=b.contains(f);if(bm(f)&&g)return function a(b){let c=e=>{let{relatedTarget:f}=e;bn(f)?f&&bm(f)&&(b.removeEventListener("mouseleave",c),a(f)):(b.removeEventListener("mouseleave",c),d())};b.addEventListener("mouseleave",c)}(f);d()}},y=a2(),z={type:k,id:y,elements:l,sanity:n,handlers:x};i.add(t),j.set(w,t),g.set(y,t),h.set(t,z),m?.observe(t),a({type:"element/register",elementType:k,id:y,element:t,rect:a3(t),sanity:n,dragDisabled:!!t.getAttribute("data-sanity-drag-disable"),targets:r.map(a=>({sanity:a.sanity,element:a.elements.element}))}),f&&s(z)}(l)}}function x(b){let c=h.get(b);if(c){let{id:d,handlers:e}=c;r(b,e),l.unobserve(b),h.delete(b),i.delete(b),g.delete(d),a({type:"element/unregister",id:d})}}function y(b){let c=h.get(b);c&&a({type:"element/updateRect",id:c.id,rect:a3(b)})}function z(a){if(f)for(let b of a){let{target:a}=b,c=bm(a)&&h.get(a);c&&(b.isIntersecting?s(c):t(c))}}function A(b){let c=bn(b.target);if(c){"capture"===c.dataset.sanityOverlayElement&&(b.preventDefault(),b.stopPropagation());return}p=[],a({type:"overlay/blur"})}function B(){p=[],a({type:"overlay/reset-mouse-state"})}function C(){for(let a of i)y(a)}function D(b){"Escape"===b.key&&(p=[],a({type:"overlay/blur"}))}function E(a){let{target:b}=a;if(!(b===window.document||!bm(b)))for(let a of i)b.contains(a)&&y(a)}function F(){f||(m=new IntersectionObserver(z,{threshold:.3}),i.forEach(a=>m.observe(a)),a({type:"overlay/activate"}),f=!0)}function G(){f&&(m?.disconnect(),i.forEach(a=>{let b=h.get(a);b&&t(b)}),a({type:"overlay/deactivate"}),f=!1)}function H(b){let{id:c}=b.detail,d=g.get(c);if(!d)return;let e=h.get(d)?.sanity;e&&a({type:"element/click",id:c,sanity:e})}return window.document.fonts.ready.then(()=>{for(let a of i)y(a)}),window.addEventListener("click",A),window.addEventListener("contextmenu",A),window.addEventListener("sanity-overlay/exclusive-plugin-closed",B),window.addEventListener("sanity-overlay/label-click",H),window.addEventListener("keydown",D),window.addEventListener("resize",C),window.addEventListener("scroll",E,{capture:!0,passive:!0}),l=new ResizeObserver(function(a){for(let b of a){let a=b.target;if(bm(a)){let b=j.get(a);if(!b)return;y(b)}}}),(n=new MutationObserver(function(a){let c=!1;for(let d of a){let{target:a,type:e}=d,f="characterData"===e?a.parentElement:a;if(!(f===b||b.contains(f))&&(c=!0,bm(f))){let a=f.parentElement?.closest("[data-sanity-edit-group]")||null;w({childNodes:[bm(a)?a:f]})}}if(c)for(let a of i)a.isConnected||x(a),h.get(a)?.type!=="group"||a.hasAttribute("data-sanity-edit-group")||x(a)})).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),w(document.body),F(),{activate:F,deactivate:G,destroy:function(){window.removeEventListener("click",A),window.removeEventListener("contextmenu",A),window.removeEventListener("sanity-overlay/exclusive-plugin-closed",B),window.removeEventListener("sanity-overlay/label-click",H),window.removeEventListener("keydown",D),window.removeEventListener("resize",C),window.removeEventListener("scroll",E),n.disconnect(),l.disconnect(),i.forEach(a=>{x(a)}),g.clear(),i.clear(),p=[],G()}}}({handler:b,overlayElement:a,inFrame:c,inPopUp:d,optimisticActorReady:i}),()=>{h.current?.destroy(),h.current=void 0}},f=[a,b,c,d,i],g[0]=a,g[1]=b,g[2]=c,g[3]=d,g[4]=i,g[5]=e,g[6]=f):(e=g[5],f=g[6]),(0,r.useEffect)(e,f),h}(h,(0,r.useCallback)(a=>{if("element/click"===a.type){let{sanity:c}=a;b?.post("visual-editing/focus",c),j("Visual Editing Overlay Clicked",null)}else if("overlay/activate"===a.type)b?.post("visual-editing/toggle",{enabled:!0});else if("overlay/deactivate"===a.type)b?.post("visual-editing/toggle",{enabled:!1});else if("overlay/dragEnd"===a.type){let{insertPosition:b,target:c,dragGroup:d,flow:e,preventInsertDefault:f}=a;i({insertPosition:b,target:c,dragGroup:d,flow:e,preventInsertDefault:f}),b&&j("Visual Editing Drag Sequence Completed",null)}else if("overlay/dragUpdateCursorPosition"===a.type)return void f(a.x,a.y);else if("overlay/dragToggleMinimap"===a.type&&!0===a.display)j("Visual Editing Drag Minimap Enabled",null);else if("overlay/setCursor"===a.type){let{element:b,cursor:c}=a;c?b.style.cursor=c:b.style.removeProperty("cursor")}c(a)},[b,c,i,f,j]),d,e);return(0,r.useEffect)(()=>{g?k.current?.activate():k.current?.deactivate()},[k,g]),null},fA=a=>{let b,c,d,e,f,g,h,i,j,k,l,m,n,q,s,t,u,v,w,x,y,z,A,B=(0,p.c)(76),{comlink:C,comlinkStatus:D,componentResolver:E,inFrame:F,inPopUp:G,zIndex:H}=a,J=(0,I.Xy)();B[0]===Symbol.for("react.memo_cache_sentinel")?(b={contextMenu:null,dragInsertPosition:null,dragShowMinimap:!1,dragShowMinimapPrompt:!1,dragSkeleton:null,elements:[],focusPath:"",isDragging:!1,perspective:"published",wasMaybeCollapsed:!1,dragMinimapTransition:!1,dragGroupRect:null},B[0]=b):b=B[0];let[K,L]=(0,r.useReducer)(fh,b),{contextMenu:M,dragInsertPosition:N,dragShowMinimap:O,dragShowMinimapPrompt:P,dragSkeleton:Q,elements:R,isDragging:S,perspective:T,wasMaybeCollapsed:U,dragMinimapTransition:V,dragGroupRect:W}=K,[X,Y]=(0,r.useState)(null),[Z,$]=(0,r.useState)(!0);B[1]!==C?(c=()=>{let a=[C?.on("presentation/focus",a=>{L({type:"presentation/focus",data:a})}),C?.on("presentation/blur",a=>{L({type:"presentation/blur",data:a})}),C?.on("presentation/toggle-overlay",()=>{$(fE)})].filter(Boolean);return()=>a.forEach(fF)},d=[C],B[1]=C,B[2]=c,B[3]=d):(c=B[2],d=B[3]),(0,r.useEffect)(c,d),function(a,b){let c,d,e=(0,p.c)(4);e[0]!==a||e[1]!==b?(c=()=>{let c=new AbortController;a?.fetch("visual-editing/fetch-perspective",void 0,{signal:c.signal,suppressWarnings:!0}).then(a=>{b({type:"presentation/perspective",data:a})}).catch(fs);let d=a?.on("presentation/perspective",a=>{b({type:"presentation/perspective",data:a})});return()=>{d?.(),c.abort()}},d=[a,b],e[0]=a,e[1]=b,e[2]=c,e[3]=d):(c=e[2],d=e[3]),(0,r.useEffect)(c,d)}(C,L),function(a,b,c){let d,e,f,g=(0,p.c)(7),h=(0,r.useRef)(void 0);g[0]!==a?(d=(b,c)=>{a?.post("visual-editing/documents",{documents:b,perspective:c})},g[0]=a,g[1]=d):d=g[1];let i=d;g[2]!==b||g[3]!==c||g[4]!==i?(e=()=>{let a=b.map(fv).filter(fu),d=new Set(a.map(ft));if(!h.current||!function(a,b){if(a===b)return!0;if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}(d,h.current.nodeIds)||c!==h.current.perspective){let b=Array.from(d).map(b=>{let{type:c,projectId:d,dataset:e}=a.find(a=>a.id===b);return d&&e?{_id:b,_type:c,_projectId:d,_dataset:e}:{_id:b,_type:c}});h.current={nodeIds:d,perspective:c},i(b,c)}},f=[b,c,i],g[2]=b,g[3]=c,g[4]=i,g[5]=e,g[6]=f):(e=g[5],f=g[6]),(0,r.useEffect)(e,f)}(C,R,T),B[4]!==X?(e=(a,b)=>{X&&(X.style.setProperty("--drag-preview-x",`${a}px`),X.style.setProperty("--drag-preview-y",`${b-window.scrollY}px`))},B[4]=X,B[5]=e):e=B[5];let _=e;B[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{let a=!1,b=b=>{fC(b)&&a&&(a=!1,$(fH))},c=b=>{if(fC(b)){if(b.ctrlKey||b.metaKey||b.shiftKey)return;a||(a=!0,$(fI))}(function(a,b){return a.every(a=>fB[a]?b[fB[a]]:b.key===a.toUpperCase())})(["mod","\\"],b)&&$(fJ)},d=()=>{a&&(a=!1,$(fK))};return window.addEventListener("click",fG),window.addEventListener("keydown",c),window.addEventListener("keyup",b),window.addEventListener("blur",d),()=>{window.removeEventListener("click",fG),window.removeEventListener("keydown",c),window.removeEventListener("keyup",b),window.removeEventListener("blur",d)}},g=[$],B[6]=f,B[7]=g):(f=B[6],g=B[7]),(0,r.useEffect)(f,g);let[aa,ab]=(0,r.useState)(!1),[ad,ae]=(0,r.useState)(!1),af=(0,r.useRef)(void 0);B[8]!==Z?(h=()=>{if(Z)return fx(()=>{ab(!0),fx(()=>{ae(!0),af.current=setTimeout(()=>{ae(!1),ab(!1)},1500)})});af.current&&(clearTimeout(af.current),ab(!1),ae(!1))},i=[Z],B[8]=Z,B[9]=h,B[10]=i):(h=B[9],i=B[10]),(0,r.useEffect)(h,i),B[11]!==R?(j=R.flatMap(fL),B[11]=R,B[12]=j):j=B[12];let ag=j;B[13]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{L({type:"overlay/blur"})},B[13]=k):k=B[13];let ah=k,ai=ao()!==ac,aj=ai?E:void 0;a:{let b;if((F||G)&&"connected"!==D||S){let a;B[14]===Symbol.for("react.memo_cache_sentinel")?(a=[],B[14]=a):a=B[14],l=a;break a}B[15]!==C||B[16]!==aj||B[17]!==V||B[18]!==O||B[19]!==R||B[20]!==F||B[21]!==S||B[22]!==ai||B[23]!==a.plugins||B[24]!==U?(b=R.filter(fM).map(b=>{let{id:c,element:d,focused:e,hovered:f,rect:g,sanity:h,dragDisabled:i,targets:j,elementType:k}=b,l=!i&&!!d.getAttribute("data-sanity")&&ai&&R.some(a=>"id"in a.sanity&&"id"in h&&bu(a.sanity,h)&&a.sanity.path!==h.path);return(0,o.jsx)(e_,{comlink:C,componentResolver:aj,plugins:a.plugins,element:d,enableScrollIntoView:!S&&!V&&!O,id:c,focused:e,hovered:f,node:h,rect:g,showActions:!F,draggable:l,isDragging:S||V,wasMaybeCollapsed:e&&U,targets:j,elementType:k},c)}),B[15]=C,B[16]=aj,B[17]=V,B[18]=O,B[19]=R,B[20]=F,B[21]=S,B[22]=ai,B[23]=a.plugins,B[24]=U,B[25]=b):b=B[25],l=b}let ak=l,al=J?"dark":"light",am=ad?"":void 0,an=aa?"":void 0;return B[26]!==ag||B[27]!==T?(m=(0,o.jsx)(fy,{documentIds:ag,perspective:T}),B[26]=ag,B[27]=T,B[28]=m):m=B[28],B[29]!==C||B[30]!==F||B[31]!==G||B[32]!==Z||B[33]!==X||B[34]!==_?(n=(0,o.jsx)(fz,{comlink:C,dispatch:L,inFrame:F,inPopUp:G,onDrag:_,overlayEnabled:Z,rootElement:X}),B[29]=C,B[30]=F,B[31]=G,B[32]=Z,B[33]=X,B[34]=_,B[35]=n):n=B[35],B[36]!==M?(q=M&&(0,o.jsx)(eQ,{...M,onDismiss:ah}),B[36]=M,B[37]=q):q=B[37],B[38]!==W||B[39]!==N||B[40]!==V||B[41]!==P||B[42]!==S?(s=S&&!V&&(0,o.jsxs)(o.Fragment,{children:[N&&(0,o.jsx)(fa,{dragInsertPosition:N}),P&&(0,o.jsx)(fg,{}),W&&(0,o.jsx)(e9,{dragGroupRect:W})]}),B[38]=W,B[39]=N,B[40]=V,B[41]=P,B[42]=S,B[43]=s):s=B[43],B[44]!==Q||B[45]!==S?(t=S&&Q&&(0,o.jsx)(fc,{skeleton:Q}),B[44]=Q,B[45]=S,B[46]=t):t=B[46],B[47]!==ak||B[48]!==am||B[49]!==an||B[50]!==m||B[51]!==n||B[52]!==q||B[53]!==s||B[54]!==t||B[55]!==H?(u=(0,o.jsxs)(fw,{"data-fading-out":am,"data-overlays":an,ref:Y,$zIndex:H,children:[m,n,q,ak,s,t]}),B[47]=ak,B[48]=am,B[49]=an,B[50]=m,B[51]=n,B[52]=q,B[53]=s,B[54]=t,B[55]=H,B[56]=u):u=B[56],B[57]!==C||B[58]!==u?(v=(0,o.jsx)(fo,{comlink:C,children:u}),B[57]=C,B[58]=u,B[59]=v):v=B[59],B[60]!==C||B[61]!==v?(w=(0,o.jsx)(fi,{comlink:C,children:v}),B[60]=C,B[61]=v,B[62]=w):w=B[62],B[63]!==C||B[64]!==R||B[65]!==w?(x=(0,o.jsx)(fl,{comlink:C,elements:R,children:w}),B[63]=C,B[64]=R,B[65]=w,B[66]=x):x=B[66],B[67]!==X||B[68]!==x?(y=(0,o.jsx)(I.XS,{children:(0,o.jsx)(I.GD,{element:X,children:x})}),B[67]=X,B[68]=x,B[69]=y):y=B[69],B[70]!==al||B[71]!==y?(z=(0,o.jsx)(I.NP,{scheme:al,theme:I.Qx,tone:"transparent",children:y}),B[70]=al,B[71]=y,B[72]=z):z=B[72],B[73]!==C||B[74]!==z?(A=(0,o.jsx)(fr,{comlink:C,children:z}),B[73]=C,B[74]=z,B[75]=A):A=B[75],A},fB={alt:"altKey",ctrl:"ctrlKey",mod:"u">typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey",shift:"shiftKey"};function fC(a){return"Alt"===a.key}function fD(a,b){return a.filter(a=>a!==b)}function fE(a){return!a}function fF(a){return a()}function fG(a){let b=a.target;if(((0,I.nY)(b)||(0,I.sb)(b)&&b.closest("a"))&&a.altKey){a.preventDefault(),a.stopPropagation();let b=new MouseEvent(a.type,{...a,altKey:!1,bubbles:!0,cancelable:!0});a.target?.dispatchEvent(b)}}function fH(a){return!a}function fI(a){return!a}function fJ(a){return!a}function fK(a){return!a}function fL(a){return"id"in a.sanity?[a.sanity.id]:[]}function fM(a){return a.activated||a.focused}let fN=a=>{let b,c,d=(0,p.c)(4),{comlink:e,refresh:f}=a,g=(0,r.useRef)(0),h=(0,r.useRef)(0);return d[0]!==e||d[1]!==f?(b=()=>e.on("presentation/refresh",a=>{if("manual"===a.source){clearTimeout(g.current);let b=f(a);if(!1===b)return;e.post("visual-editing/refreshing",a);let c=!1;g.current=window.setTimeout(()=>{e.post("visual-editing/refreshed",a),c=!0},3e3),b?.finally?.(()=>{c||(clearTimeout(g.current),e.post("visual-editing/refreshed",a))})}else if("mutation"===a.source){clearTimeout(h.current);let b=f(a);if(!1===b)return;e.post("visual-editing/refreshing",a),h.current=window.setTimeout(()=>{let b=f(a);!1!==b&&(e.post("visual-editing/refreshing",a),b?.finally?.(()=>{e.post("visual-editing/refreshed",a)})||e.post("visual-editing/refreshed",a))},1e3),b?.finally?.(()=>{e.post("visual-editing/refreshed",a)})||e.post("visual-editing/refreshed",a)}}),c=[e,f],d[0]=e,d[1]=f,d[2]=b,d[3]=c):(b=d[2],c=d[3]),(0,r.useEffect)(b,c),null};function fO(a){let{data:b,origin:c}=a;b&&"object"==typeof b&&"domain"in b&&"sanity/channels"===b.domain&&"from"in b&&"presentation"===b.from&&"type"in b&&"presentation/status"===b.type&&window.parent.postMessage({domain:"sanity/channels",type:"visual-editing/status",data:{origin:location.origin}},c)}function fP(){console.warn("[@sanity/visual-editing] Package version mismatch detected: Please update your Sanity studio to prevent potential compatibility issues.")}function fQ(){}let fR=a=>{let b,c,d,e,f,g,h,i,j=(0,p.c)(23),{components:k,plugins:l,history:m,portal:n,refresh:t,zIndex:u}=a,v=void 0===n||n,[w,x]=(0,r.useState)(null),[y,z]=(0,r.useState)(null);j[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{x((0,q.Fk)()),z((0,q.v$)())},c=[],j[0]=b,j[1]=c):(b=j[0],c=j[1]),(0,r.useEffect)(b,c);let[A,B]=(0,r.useState)(null);j[2]!==v?(d=()=>{if(!1===v)return;let a=document.createElement("sanity-visual-editing");return document.documentElement.appendChild(a),B(a),()=>{B(null),document.documentElement.contains(a)&&document.documentElement.removeChild(a)}},e=[v],j[2]=v,j[3]=d,j[4]=e):(d=j[3],e=j[4]),(0,r.useEffect)(d,e);let[C,D]=function(a){let b,c,d,e,f,g=(0,p.c)(9),h=void 0===a||a,[i,j]=(0,r.useState)(),[k,l]=(0,r.useState)("idle");return g[0]!==h?(b=()=>{if(!h)return;let a=(0,bR.RM)({name:"visual-editing",connectTo:"presentation"},(0,bR.Uc)().provide({actors:(0,q.jF)()})),b=a.onStatus(()=>l("connected"),"connected");j(a);let c=a.start();return()=>{b(),c(),j(void 0)}},c=[h],g[0]=h,g[1]=b,g[2]=c):(b=g[1],c=g[2]),(0,r.useEffect)(b,c),g[3]!==k?(d=()=>{if("connected"===k)return;let a=new AbortController;return window.addEventListener("message",fO,{signal:a.signal}),()=>{a.abort()}},e=[k],g[3]=k,g[4]=d,g[5]=e):(d=g[4],e=g[5]),(0,r.useEffect)(d,e),g[6]!==i||g[7]!==k?(f=[i,k],g[6]=i,g[7]=k,g[8]=f):f=g[8],f}(!0===w||!0===y);!function(a){let b,c,d=(0,p.c)(3);d[0]!==a?(b=()=>{if(!a)return;let b=function(a){let b=new bT.ReplaySubject(1),c=new bT.Subject;return a.fetch("visual-editing/snapshot-welcome",void 0,{suppressWarnings:!0}).then(a=>{b.next(a.event)}).catch(()=>{}),a.on("presentation/snapshot-event",a=>{"reconnect"===a.event.type&&b.next(a.event),"mutation"===a.event.type&&c.next(a.event)}),(0,bT.merge)(b,c)}(a),c=eB.provide({actors:{documentMutatorMachine:(a=>{let b=(0,ab.Sx)(async({input:b,signal:c})=>{let{id:d}=b,{snapshot:e}=await a.fetch("visual-editing/fetch-snapshot",{documentId:d},{signal:c});return e}),c=(0,ab.Sx)(async({input:b})=>{let{transactions:c}=b;for(let b of c){let c=Y.encodeTransaction(b);return a.post("visual-editing/mutate",c)}});return ez.provide({actions:{"send sync event to parent":(0,ex.a)(({enqueue:a})=>{a.sendParent(({context:a})=>({type:"sync",id:a.id,document:a.remote})),a.emit(({context:a})=>({type:"ready",snapshot:a.local}))})},actors:{"fetch remote snapshot":b,"submit mutations as transactions":c}})})(a)}}),d=(0,bS.c)(c,{input:{client:{withConfig:fQ},sharedListener:b}});d.start();let e=new AbortController;return a.fetch("visual-editing/features",void 0,{signal:e.signal,suppressWarnings:!0}).then(a=>{a.features.optimistic&&function(a){for(let b of(ad=a,ae))b()}(d)}).catch(fP),()=>{d.stop(),e.abort()}},c=[a],d[0]=a,d[1]=b,d[2]=c):(b=d[1],c=d[2]),(0,r.useEffect)(b,c)}("connected"===D?C:void 0),j[5]!==C||j[6]!==D||j[7]!==k||j[8]!==w||j[9]!==y||j[10]!==l||j[11]!==u?(f=null!==w&&null!==y&&(0,o.jsx)(fA,{comlink:C,comlinkStatus:D,componentResolver:k,plugins:l,inFrame:w,inPopUp:y,zIndex:u}),j[5]=C,j[6]=D,j[7]=k,j[8]=w,j[9]=y,j[10]=l,j[11]=u,j[12]=f):f=j[12],j[13]!==C||j[14]!==m||j[15]!==t?(g=C&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eC,{comlink:C,history:m}),(0,o.jsx)(eD,{comlink:C}),t&&(0,o.jsx)(fN,{comlink:C,refresh:t})]}),j[13]=C,j[14]=m,j[15]=t,j[16]=g):g=j[16],j[17]!==f||j[18]!==g?(h=(0,o.jsxs)(o.Fragment,{children:[f,g]}),j[17]=f,j[18]=g,j[19]=h):h=j[19];let E=h;return!1!==v&&A?(j[20]!==E||j[21]!==A?(i=(0,s.createPortal)(E,A),j[20]=E,j[21]=A,j[22]=i):i=j[22],i):E};fR.displayName="VisualEditing";var fS=c(42378),fT=c(85708);let fU=(0,fT.createServerReference)("7fc4baf737fba5f133e8e70ffefa80882a752af6b9",fT.callServer,void 0,fT.findSourceMapURL,"revalidateRootLayout");function fV(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}function fW(a,b){if(!function(a,b){if("string"!=typeof a)return!1;let{pathname:c}=fV(a);return c===b||c.startsWith(`${b}/`)}(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:`/${c}`}function fX(a){let{basePath:b="",plugins:c,components:d,refresh:e,trailingSlash:f=!1,zIndex:g}=a,h=(0,fS.useRouter)(),i=(0,r.useRef)(h),[j,k]=(0,r.useState)();(0,r.useEffect)(()=>{i.current=h},[h]);let l=(0,r.useMemo)(()=>({subscribe:a=>(k(()=>a),()=>k(void 0)),update:a=>{switch(a.type){case"push":return i.current.push(fW(a.url,b));case"pop":return i.current.back();case"replace":return i.current.replace(fW(a.url,b));default:throw Error(`Unknown update type: ${a.type}`)}}}),[b]),m=(0,fS.usePathname)(),n=(0,fS.useSearchParams)();(0,r.useEffect)(()=>{j&&j({type:"push",url:((a,b)=>{let{pathname:c,query:d,hash:e}=fV(a);return b?c.endsWith("/")?`${c}${d}${e}`:`${c}/${d}${e}`:`${c.replace(/\/$/,"")||"/"}${d}${e}`})(function(a,b){if(!a.startsWith("/")||!b)return a;if("/"===a&&b)return b;let{pathname:c,query:d,hash:e}=fV(a);return`${b}${c}${d}${e}`}(`${m}${n?.size?`?${n}`:""}`,b),f)})},[b,j,m,n,f]);let p=(0,r.useCallback)(a=>{if(e)return e(a);switch(a.source){case"manual":return a.livePreviewEnabled?(console.debug("Live preview is setup, calling router.refresh() to refresh the server components without refetching cached data"),i.current.refresh(),Promise.resolve()):(console.debug("No loaders in live mode detected, or preview kit setup, revalidating root layout"),fU());case"mutation":return a.livePreviewEnabled?(console.debug("Live preview is setup, mutation is skipped assuming its handled by the live preview"),!1):(console.debug("No loaders in live mode detected, or preview kit setup, revalidating root layout"),fU());default:throw Error("Unknown refresh source",{cause:a})}},[e]);return(0,o.jsx)(fR,{plugins:c,components:d,history:l,portal:!0,refresh:p,zIndex:g})}}};