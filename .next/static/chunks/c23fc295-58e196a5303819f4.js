"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5478],{7331:(e,t,n)=>{let i;n.d(t,{Cw:()=>og,EG:()=>r5,GG:()=>sP,GU:()=>lO,Gp:()=>n0,Gt:()=>lr,Ih:()=>e4,KN:()=>te,QM:()=>ty,RG:()=>tR,Ru:()=>l$,Zv:()=>e8,bV:()=>nq,bt:()=>tI,c0:()=>rL,pl:()=>tO,y6:()=>tt});var r=n(29395),l=n(8341),s=n(95155),o=n(11748),a=n(64509),d=n(59452),c=n(12115),u=n(4893),p=n(96241),m=n(39160),h=n(8490),f=n(79020),x=n(50625),g=n(75794),b=n(1733),y=n(71408),j=n(60452),v=n(46521),_=n(78411),w=n(35138),S=n(62057),k=n(40073),C=n(64711),I=n(63704),E=n(77133),z=n(9618),T=n(25828),A=n(29279),P=n(18362),R=n(91436),M=n(34098),D=n(98203),$=n(65333),B=n(42764),Y=n(16433),L=n(60732),O=n(77241),H=n(43279),V=n(31536),Z=n(85755),N=n(32466),F=n(61270),K=n(28775),W=n(43198),J=n(86238),U=n(34438),G=n(25259),Q=n(47211),q=n(78242),X=n(40712),ee=n(27887),et=n(28303),en=n(12718),ei=n(43756),er=n(54145),el=n(67547),es=n(63270),eo=n(27768),ea=n(15779),ed=n(27754),ec=n(34875),eu=n(55520),ep=n(29894),em=n(66265),eh=n(8186),ef=n(86697),ex=n(97341),eg=n(84264),eb=n(14996),ey=n(68086),ej=n(63378),ev=n(45821),e_=n(34574),ew=n(88106),eS=n(56555),ek=n(22991),eC=n(76096),eI=n(43475),eE=n(58626),ez=n(30563),eT=n(92273);let eA="diffView",eP="previousDocument",eR="nextDocument";function eM(){let e,t,n,i=(0,o.c)(9),{navigate:r,state:l}=(0,v.rd)();i[0]!==r||i[1]!==l?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,s={...ec(l._searchParams),...t?{[eA]:t}:{},...n?{[eP]:[n.type,n.id].join(",")}:{},...i?{[eR]:[i.type,i.id].join(",")}:{}};r({...l,_searchParams:eu(s)})},i[0]=r,i[1]=l,i[2]=e):e=i[2];let s=e;i[3]!==r||i[4]!==l?(t=()=>{r({...l,_searchParams:(l._searchParams??[]).filter(eD)})},i[3]=r,i[4]=l,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==s?(n={navigateDiffView:s,exitDiffView:a},i[6]=a,i[7]=s,i[8]=n):n=i[8],n}function eD(e){let[t]=e;return![eA,eP,eR].includes(t)}let e$=["version"];function eB({onParamsError:e}={}){let{state:t}=(0,v.rd)(),n=new URLSearchParams(t._searchParams),i=n.get(eP),r=n.get(eR),l=n.get(eA),s=[i,r,l].some(e=>null!==e),o=(0,c.useMemo)(()=>(function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[r,l]=e.split(",").filter(Boolean),[s,o]=t.split(",").filter(Boolean);return e$.includes(n)||i.push(["invalidModeParam",n]),(typeof r>"u"||typeof l>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof s>"u"||typeof o>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:r,id:l},next:{type:s,id:o}}}}})({previousDocument:i??"",nextDocument:r??"",mode:l??""}),[l,r,i]);return(0,c.useEffect)(()=>{"error"===o.result&&s&&e?.(o.errors)},[s,e,o]),"error"===o.result?{isActive:!1}:{state:"ready",isActive:!0,...o.params}}function eY(e){return null!==e}function eL(e,t){return(0,m._4P)(e)?"published":(0,m.R8D)(e)?"draft":t.find(({_id:t})=>(0,m._hI)(t)===(0,m._Sr)(e))}let eO=x.I4.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,eH=x.I4.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,eV=({documentId:e,state:t})=>{let{t:n}=(0,m.Bdt)(r.Z7),{data:i}=(0,m.gn8)({documentId:e}),{exitDiffView:l,navigateDiffView:o}=eM(),{documents:d}=eB(),u=(0,m.K0D)(),h=i.flatMap(e=>(0,m._Sr)(e)??[]),f=(0,c.useMemo)(()=>u.data.filter(e=>{let t=(0,m._hI)(e._id);return"u">typeof t&&h.includes(t)}),[u.data,h]),x=(0,c.useCallback)(e=>{"u">typeof d?.previous&&o({previousDocument:{...d.previous,id:e}})},[d?.previous,o]),g=(0,c.useCallback)(e=>{"u">typeof d?.next&&o({nextDocument:{...d.next,id:e}})},[d?.next,o]);return(0,s.jsxs)(eO,{children:[(0,s.jsxs)(eH,{children:[(0,s.jsx)(a.az,{padding:4,children:(0,s.jsx)(a.EY,{as:"h1",size:1,muted:!0,children:n("compare-versions.title")})}),"u">typeof d?.previous&&(0,s.jsx)(eZ,{releases:f,onSelectRelease:x,role:"previous",documentId:e,state:t,document:d.previous})]}),(0,s.jsx)(a.so,{align:"center",paddingX:3,children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(p.ppF,{})})}),(0,s.jsxs)(eH,{children:["u">typeof d?.next&&(0,s.jsx)(eZ,{releases:f,onSelectRelease:g,role:"next",documentId:e,state:t,document:d.next}),(0,s.jsx)(a.az,{padding:3,style:{justifySelf:"end"},children:(0,s.jsx)(a.$n,{icon:p.USm,mode:"bleed",onClick:l,padding:2})})]})]})},eZ=({releases:e=[],onSelectRelease:t,role:n,documentId:i,document:o})=>{let{published:d,draft:u}=(0,m.zX2)((0,m.IMx)(o.id),o.type),h=(0,c.useMemo)(()=>eL(o.id,e),[o.id,e]),{t:f}=(0,m.Bdt)(r.Z7),{t:x}=(0,m.Bdt)(),{document:{drafts:{enabled:g}}}=(0,m.hA9)();return(0,s.jsx)(l.IU,{id:n,button:(0,s.jsx)(a.$n,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function({selected:e,tCore:t,tStructure:n}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,m.Jrl)(e)){let n=e?(0,m.Y73)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,s.jsx)(m.Rdi,{padding:1,tone:n}),iconRight:e&&(0,m.KJ$)(e)?(0,s.jsx)(p.XAi,{}):void 0,tone:n}}let i="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,s.jsx)(m.Rdi,{padding:1,tone:i}),tone:i}}({selected:h,tCore:x,tStructure:f})}),menu:(0,s.jsxs)(a.W1,{children:[d&&(0,s.jsx)(eN,{type:"published",onSelect:t,isSelected:"published"===h,documentId:i}),g&&u&&(0,s.jsx)(eN,{type:"draft",onSelect:t,isSelected:"draft"===h,documentId:i}),e.map(e=>(0,s.jsx)(eN,{release:e,onSelect:t,isSelected:"string"!=typeof h&&h?._id===e._id,documentId:i},e._id))]})})},eN=({type:e,release:t,onSelect:n,isSelected:i,documentId:l})=>{let{t:o}=(0,m.Bdt)(),{t:d}=(0,m.Bdt)(r.Z7),u=(0,c.useCallback)(()=>"draft"===e?void n((0,m.T4)(l)):"published"===e?void n((0,m.IMx)(l)):void("u">typeof t?._id&&n((0,m.ctg)(l,(0,m._hI)(t._id)))),[e,n,l,t?._id]);if(e)return(0,s.jsx)(a.Dr,{padding:1,paddingRight:3,onClick:u,pressed:i,children:(0,s.jsxs)(a.so,{gap:1,children:[(0,s.jsx)(m.Rdi,{padding:2,tone:"published"===e?"positive":"caution"}),(0,s.jsx)(a.az,{paddingY:2,children:(0,s.jsx)(a.EY,{size:1,weight:"medium",children:d(["compare-versions.status",e].join("."))})})]})});let h=t?(0,m.Y73)(t):"neutral";return(0,s.jsx)(a.Dr,{padding:1,paddingRight:3,onClick:u,pressed:i,children:(0,s.jsxs)(a.so,{gap:1,children:[(0,s.jsx)(m.Rdi,{padding:2,tone:h}),(0,s.jsxs)(a.BJ,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,s.jsx)(a.EY,{size:1,weight:"medium",children:t.metadata.title||o("release.placeholder-untitled-release")}),["asap","undecided"].includes(t.metadata.releaseType)&&(0,s.jsx)(a.EY,{muted:!0,size:1,children:o(`release.type.${t.metadata.releaseType}`)}),"scheduled"===t.metadata.releaseType&&(0,s.jsx)(a.EY,{muted:!0,size:1,children:(0,m.drb)(t)})]}),(0,s.jsx)(a.so,{flex:"none",children:(0,m.KJ$)(t)&&(0,s.jsx)(a.az,{padding:2,children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(p.XAi,{})})})})]})})},eF=x.I4.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function eK(e){return e.document?.components?.unstable_layout}function eW(e){return e.path}function eJ(e,t){return ef(e.path,t.path)}let eU=x.I4.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,eG=(0,x.I4)(a.Zp)`
  position: relative;
  grid-area: var(--grid-area);
`,eQ=(0,x.I4)(a.mc)`
  width: auto;
`,eq=(0,c.forwardRef)(function(e,t){let n,i,r,l,p,h,f,x,g,b,y,j,v=(0,o.c)(36),{role:_,documentType:w,documentId:S,scrollElement:k,syncChannel:C,compareDocument:I}=e,E=(0,c.useRef)(null),[z,T]=(0,c.useState)(null),[A,P]=(0,c.useState)(null);v[0]!==I||v[1]!==S||v[2]!==w||v[3]!==_||v[4]!==k||v[5]!==C?(n=()=>(0,s.jsx)(eX,{compareDocument:I,documentId:S,documentType:w,role:_,scrollElement:k,syncChannel:C}),v[0]=I,v[1]=S,v[2]=w,v[3]=_,v[4]=k,v[5]=C,v[6]=n):n=v[6];let R=n;v[7]!==R?(i={pick:eK,defaultComponent:R},v[7]=R,v[8]=i):i=v[8];let M=(0,m.A1m)(i);v[9]===Symbol.for("react.memo_cache_sentinel")?(r={isInteractive:!1,onOpenReviewChanges:eh,onSetFocus:eh,isReviewChangesOpen:!1},v[9]=r):r=v[9];let D=`${_}-document`;v[10]!==D?(l={"--grid-area":D},v[10]=D,v[11]=l):l=v[11];let $=l,B="next"===_,Y="next"!==_&&"none";v[12]!==Y?(p={"--scrollbar-width":Y},v[12]=Y,v[13]=p):p=v[13];let L=p;return v[14]!==M||v[15]!==S||v[16]!==w?(h=(0,s.jsx)(d.Co,{position:"absolute",children:(0,s.jsx)(eQ,{ref:E,padding:4,width:1,children:(0,s.jsx)(M,{documentId:S,documentType:w})})}),v[14]=M,v[15]=S,v[16]=w,v[17]=h):h=v[17],v[18]!==z||v[19]!==h?(f=(0,s.jsx)(a.GD,{element:z,children:h}),v[18]=z,v[19]=h,v[20]=f):f=v[20],v[21]!==t||v[22]!==L||v[23]!==f?(x=(0,s.jsx)(eU,{ref:t,style:L,children:f}),v[21]=t,v[22]=L,v[23]=f,v[24]=x):x=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:T}),v[25]=g):g=v[25],v[26]!==x||v[27]!==$||v[28]!==B?(b=(0,s.jsxs)(eG,{ref:P,style:$,borderLeft:B,children:[x,g]}),v[26]=x,v[27]=$,v[28]=B,v[29]=b):b=v[29],v[30]!==A||v[31]!==b?(y=(0,s.jsx)(a.EZ,{element:A,children:b}),v[30]=A,v[31]=b,v[32]=y):y=v[32],v[33]!==k||v[34]!==y?(j=(0,s.jsx)(u.HJ.Provider,{value:r,children:(0,s.jsx)(m.tmD,{children:(0,s.jsx)(m.jsZ,{scrollElement:k,containerElement:E,children:y})})}),v[33]=k,v[34]=y,v[35]=j):j=v[35],j}),eX=({role:e,documentType:t,documentId:n,syncChannel:i,compareDocument:r})=>{var l;let a=function(e){let t,n,i,r=(0,o.c)(4),{compareDocument:l}=e;r[0]!==l.id?(t=(0,m.IMx)(l.id),r[0]=l.id,r[1]=t):t=r[1];let s=l.type;r[2]!==l.id?(n=(0,m._Sr)(l.id),r[2]=l.id,r[3]=n):n=r[3];let a=(0,m.zX2)(t,s,"low",n);e:{if((0,m.A_X)(l.id)){i=a.version??void 0;break e}if((0,m.R8D)(l.id)){i=a.draft??void 0;break e}if((0,m._4P)(l.id)){i=a.published??void 0;break e}i=void 0}return i}({compareDocument:r}),{data:d}=(0,m.K0D)(),[p]=(0,c.useState)(()=>(0,m.Ijd)()),h=(0,c.useMemo)(()=>eL(n,d),[n,d]),{formState:f,onChange:x,onFocus:g,onBlur:b,onSetActiveFieldGroup:y,onSetCollapsedFieldSet:j,onSetCollapsedPath:v,collapsedFieldSets:_,ready:w,collapsedPaths:S,schemaType:k,value:C,onProgrammaticFocus:E,...z}=(0,m.Lay)({documentId:(0,m.IMx)(n),documentType:t,selectedPerspectiveName:function(e){return(0,m.A_X)(e)?(0,m._Sr)(e):(0,m._4P)(e)?"published":void 0}(n),releaseId:(0,m._Sr)(n),comparisonValue:a}),T=null===f||!w,A=function(e){let t,n,i,r=(0,o.c)(11),{syncChannel:l,id:s}=e;r[0]!==s||r[1]!==l?(t=e=>l.next({...e,source:s}),r[0]=s,r[1]=l,r[2]=t):t=r[2];let a=t;if(r[3]!==s||r[4]!==l){let e;r[6]!==s?(e=e=>{let{source:t}=e;return t!==s},r[6]=s,r[7]=e):e=r[7],n=l.pipe((0,P.F)(eJ),(0,B.p)(e),(0,I.T)(eW)),r[3]=s,r[4]=l,r[5]=n}else n=r[5];let d=n;return r[8]!==d||r[9]!==a?(i={path:d,push:a},r[8]=d,r[9]=a,r[10]=i):i=r[10],i}({id:e,syncChannel:i}),R=(0,c.useCallback)(t=>{z.onPathOpen(t),A.push({source:e,path:t})},[z,A,e]);return(0,c.useEffect)(()=>{let e=A.path.subscribe(E);return()=>e.unsubscribe()},[E,A.path]),T?(0,s.jsx)(m.gd4,{showText:!0}):(0,s.jsx)(u.pn.Provider,{value:{enabled:!1,mode:null},children:(0,s.jsx)(m.okx,{__internal_patchChannel:p,id:`diffView-pane-${e}`,onChange:x,onPathFocus:g,onPathOpen:R,onPathBlur:b,onFieldGroupSelect:y,onSetFieldSetCollapsed:j,onSetPathCollapsed:v,collapsedPaths:S,collapsedFieldSets:_,focusPath:f.focusPath,changed:f.changed,focused:f.focused,groups:f.groups,validation:f.validation,members:f.members,perspective:"draft"===(l=h)?"drafts":l,presence:f.presence,schemaType:k,value:C,compareValue:a})})},e0=x.I4.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,e1=e=>{let t,n,i=(0,o.c)(6),{children:r,documentId:l,documentType:a}=e;i[0]!==l||i[1]!==a?(t={intent:"edit",params:{id:l,type:a}},i[0]=l,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,v.cQ)(t);return i[3]!==r||i[4]!==d?(n=(0,s.jsx)(e0,{href:d,target:"_blank",rel:"noopener noreferrer",children:r}),i[3]=r,i[4]=d,i[5]=n):n=i[5],n},e2=e=>{let t,n,i,r,a,d,p,m=(0,o.c)(24),{documentId:h}=e,{documents:f,state:x,mode:g}=eB(),{exitDiffView:b}=eM(),y=function(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new V.B,t[0]=e):e=t[0],e}(),[j,v]=(0,c.useState)(null),[_,w]=(0,c.useState)(null),S=(0,c.useContext)(u.DA);m[0]!==S?(t={...S,disableNew:!0,EditReferenceLinkComponent:e1},m[0]=S,m[1]=t):t=m[1];let k=t;return m[2]!==_||m[3]!==j?(n=[j,_],m[2]=_,m[3]=j,m[4]=n):n=m[4],function(e){let t,n,i=(0,o.c)(3);i[0]!==e?(t=()=>{let t=e.filter(eY);if(0===t.length)return;let n=new em.Ay(t);return()=>n.destroy()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,c.useEffect)(t,n)}(n),m[5]!==h||m[6]!==g||m[7]!==x?(i="version"===g&&(0,s.jsx)(eV,{documentId:h,state:x}),m[5]=h,m[6]=g,m[7]=x,m[8]=i):i=m[8],m[9]!==f||m[10]!==_||m[11]!==j||m[12]!==x||m[13]!==y?(r="ready"===x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eq,{documentType:f.previous.type,documentId:f.previous.id,role:"previous",ref:v,scrollElement:j,syncChannel:y,compareDocument:f.previous}),(0,s.jsx)(eq,{documentType:f.next.type,documentId:f.next.id,role:"next",ref:w,scrollElement:_,syncChannel:y,compareDocument:f.previous})]}),m[9]=f,m[10]=_,m[11]=j,m[12]=x,m[13]=y,m[14]=r):r=m[14],m[15]!==i||m[16]!==r?(a=(0,s.jsxs)(eF,{children:[i,r]}),m[15]=i,m[16]=r,m[17]=a):a=m[17],m[18]!==b||m[19]!==a?(d=(0,s.jsx)(l.lG,{id:"diffView",width:"auto",onClose:b,padding:!1,__unstable_hideCloseButton:!0,children:a}),m[18]=b,m[19]=a,m[20]=d):d=m[20],m[21]!==k||m[22]!==d?(p=(0,s.jsx)(u.DA.Provider,{value:k,children:d}),m[21]=k,m[22]=d,m[23]=p):p=m[23],p},e3=e=>{let t,n,i,l=(0,o.c)(9),{children:a,documentId:c}=e,u=(0,d.dj)(),{t:p}=(0,m.Bdt)(r.Z7);l[0]!==p||l[1]!==u?(t={onParamsError:e=>{u.push({id:"diffViewParamsParsingError",status:"error",title:p("compare-version.error.invalidParams.title"),description:(0,s.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,s.jsx)("li",{children:p(`compare-version.error.${t}`,{input:n})},t)})})})}},l[0]=p,l[1]=u,l[2]=t):t=l[2];let{isActive:h}=eB(t);return l[3]!==c||l[4]!==h?(n=h&&(0,s.jsx)(e2,{documentId:c}),l[3]=c,l[4]=h,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(i=(0,s.jsxs)(s.Fragment,{children:[a,n]}),l[6]=a,l[7]=n,l[8]=i):i=l[8],i};function e4(){let e=(0,c.useContext)(u._U);if(!e)throw Error("PaneLayout: missing context value");return e}let e5=(0,x.I4)(a.Wd)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function e6(e){let t,n,i=(0,o.c)(7),{disabled:r,element:l}=e,{resize:a}=e4(),[d,u]=(0,c.useState)(!1);i[0]!==l||i[1]!==a?(t=e=>{if(!l)return;u(!0),e.preventDefault();let t=e.pageX;a("start",l,0);let n=e=>{e.preventDefault(),a("move",l,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",l,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=l,i[1]=a,i[2]=t):t=i[2];let p=t,m=r?"":void 0,h=d?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,s.jsx)(e5,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let e7=(0,x.I4)(a.Zp)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,e8=(0,c.forwardRef)(function(e,t){let n,i,r,l,d,p,h,f,x,g,b,y,j,v,_,w,S,k,C,I,E,z,T,A,P,R,M,D,$,B=(0,o.c)(86);B[0]!==e?({children:n,currentMinWidth:r,currentMaxWidth:i,flex:f,id:l,minWidth:p,maxWidth:d,selected:x,...h}=e,B[0]=e,B[1]=n,B[2]=i,B[3]=r,B[4]=l,B[5]=d,B[6]=p,B[7]=h,B[8]=f,B[9]=x):(n=B[1],i=B[2],r=B[3],l=B[4],d=B[5],p=B[6],h=B[7],f=B[8],x=B[9]);let Y=void 0===f?1:f,L=void 0!==x&&x,[O,H]=(0,c.useState)(null),{collapse:V,collapsed:Z,expand:N,expandedElement:F,mount:K,panes:W}=e4();if(B[10]!==W||B[11]!==O){let e;B[14]!==O?(e=e=>e.element===O,B[14]=O,B[15]=e):e=B[15],b=(g=W.find(e))&&W.indexOf(g),B[10]=W,B[11]=O,B[12]=g,B[13]=b}else g=B[12],b=B[13];let J=b,U="number"==typeof J?W[J+1]:void 0,G=J===W.length-1,Q=F===O,q=!Z&&(g?.collapsed||!1),X=U?.collapsed||!1,ee=(0,c.useRef)(null),et=g?.flex??Y,en=g?.currentMinWidth??r,ei=g?.currentMaxWidth??i;B[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>ee.current,B[16]=y):y=B[16],(0,c.useImperativeHandle)(t,y),B[17]===Symbol.for("react.memo_cache_sentinel")?(j=e=>{H(e),ee.current=e},B[17]=j):j=B[17];let er=j;B[18]!==i||B[19]!==r||B[20]!==Y||B[21]!==l||B[22]!==d||B[23]!==p||B[24]!==K||B[25]!==O?(v=()=>{if(O)return K(O,{currentMinWidth:r,currentMaxWidth:i,flex:Y,id:l,minWidth:p,maxWidth:d})},_=[r,i,Y,l,p,d,K,O],B[18]=i,B[19]=r,B[20]=Y,B[21]=l,B[22]=d,B[23]=p,B[24]=K,B[25]=O,B[26]=v,B[27]=_):(v=B[26],_=B[27]),(0,c.useLayoutEffect)(v,_),B[28]!==V||B[29]!==O?(w=()=>{O&&V(O)},B[28]=V,B[29]=O,B[30]=w):w=B[30];let el=w;B[31]!==N||B[32]!==O?(S=()=>{O&&N(O)},B[31]=N,B[32]=O,B[33]=S):S=B[33];let es=S,eo=!Z&&q;B[34]!==el||B[35]!==es||B[36]!==G||B[37]!==J||B[38]!==O||B[39]!==eo?(k={collapse:el,collapsed:eo,expand:es,index:J,isLast:G,rootElement:O},B[34]=el,B[35]=es,B[36]=G,B[37]=J,B[38]=O,B[39]=eo,B[40]=k):k=B[40];let ea=k;e:{if(Z){C=void 0;break e}if(q){C=51;break e}if(0===en||G){C=p||204;break e}C=en||p||204}let ed=C;t:{if(q){I=51;break t}if(Z&&G){I=void 0;break t}if(G){if(d){I=ei??d;break t}I=void 0;break t}I=ei??d}let ec=I,eu=Z&&!G;B[41]!==q||B[42]!==G||B[43]!==Z||B[44]!==X||B[45]!==O?(E=!G&&!Z&&(0,s.jsx)(m.wG1,{zOffset:"paneResizer",children:(0,s.jsx)(e6,{disabled:q||X,element:O})}),B[41]=q,B[42]=G,B[43]=Z,B[44]=X,B[45]=O,B[46]=E):E=B[46];let ep=E,em=ec===1/0?void 0:ec;B[47]!==et||B[48]!==ed||B[49]!==em?(z={flex:et,minWidth:ed,maxWidth:em},B[47]=et,B[48]=ed,B[49]=em,B[50]=z):z=B[50];let eh=z,ef=Z?void 0:"hidden",ex=q?"":void 0,eg=L?"":void 0;return B[51]!==q||B[52]!==ei||B[53]!==en||B[54]!==Q||B[55]!==et||B[56]!==ec||B[57]!==ed||B[58]!==J?(T=!1,B[51]=q,B[52]=ei,B[53]=en,B[54]=Q,B[55]=et,B[56]=ec,B[57]=ed,B[58]=J,B[59]=T):T=B[59],B[60]!==n||B[61]!==eu?(A=!eu&&(0,s.jsx)(a.so,{direction:"column",height:"fill",children:n}),B[60]=n,B[61]=eu,B[62]=A):A=B[62],B[63]!==O||B[64]!==A?(P=(0,s.jsx)(a.EZ,{element:O,children:A}),B[63]=O,B[64]=A,B[65]=P):P=B[65],B[66]!==eu||B[67]!==l||B[68]!==J||B[69]!==h||B[70]!==eh||B[71]!==ef||B[72]!==ex||B[73]!==eg||B[74]!==T||B[75]!==P?(R=(0,s.jsxs)(e7,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:eu,id:l,overflow:ef,...h,"data-pane-collapsed":ex,"data-pane-index":J,"data-pane-selected":eg,ref:er,style:eh,children:[T,P]}),B[66]=eu,B[67]=l,B[68]=J,B[69]=h,B[70]=eh,B[71]=ef,B[72]=ex,B[73]=eg,B[74]=T,B[75]=P,B[76]=R):R=B[76],B[77]!==G||B[78]!==R?(M=(0,s.jsx)(m.mLG,{isLastPane:G,children:R}),B[77]=G,B[78]=R,B[79]=M):M=B[79],B[80]!==ea||B[81]!==M?(D=(0,s.jsx)(m.wG1,{zOffset:"pane",children:(0,s.jsx)(u.OD.Provider,{value:ea,children:M})}),B[80]=ea,B[81]=M,B[82]=D):D=B[82],B[83]!==ep||B[84]!==D?($=(0,s.jsxs)(s.Fragment,{children:[D,ep]}),B[83]=ep,B[84]=D,B[85]=$):$=B[85],$}),e9=(0,x.I4)(a.Zp)`
  position: relative;
  outline: none;
`;function te(){let e=(0,c.useContext)(u.OD);if(!e)throw Error("Pane: missing context value");return e}e9.displayName="PaneContent__root";let tt=(0,c.forwardRef)(function(e,t){let n,i,r,l,a,d,c=(0,o.c)(14);c[0]!==e?({as:n,children:i,overflow:r,padding:l,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=r,c[4]=l,c[5]=a):(n=c[1],i=c[2],r=c[3],l=c[4],a=c[5]);let{collapsed:u}=te(),{collapsed:p}=e4(),m=p?void 0:r;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==l||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,s.jsx)(e9,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:l,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=l,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function tn(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let ti={constrainSize:!0,placement:"left-start",portal:!0};function tr(e){let t,n,i,r,l=(0,o.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,m.Bvg)("i18n"in u?u:void 0);if("divider"===u.type){let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(a.Nj,{}),l[0]=e):e=l[0],e}l[1]!==p||l[2]!==u?(t=p(u),l[1]=p,l[2]=u,l[3]=t):t=l[3];let{title:h}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return l[4]!==c?(e=c&&(0,s.jsx)(a.Nj,{}),l[4]=c,l[5]=e):e=l[5],l[6]!==d||l[7]!==u.children||l[8]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tr,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),l[6]=d,l[7]=u.children,l[8]=u.disabled,l[9]=t):t=l[9],l[10]!==e||l[11]!==t?(n=(0,s.jsxs)(s.Fragment,{children:[e,t]}),l[10]=e,l[11]=t,l[12]=n):n=l[12],n}l[13]!==c?(e=c&&(0,s.jsx)(a.Nj,{}),l[13]=c,l[14]=e):e=l[14];let r=u.icon;return l[15]!==d||l[16]!==u.children||l[17]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tr,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),l[15]=d,l[16]=u.children,l[17]=u.disabled,l[18]=t):t=l[18],l[19]!==d||l[20]!==u.icon||l[21]!==t||l[22]!==h?(n=(0,s.jsx)(ea.r,{disabled:d,icon:r,popover:ti,text:h,children:t}),l[19]=d,l[20]=u.icon,l[21]=t,l[22]=h,l[23]=n):n=l[23],l[24]!==e||l[25]!==n?(i=(0,s.jsxs)(s.Fragment,{children:[e,n]}),l[24]=e,l[25]=n,l[26]=i):i=l[26],i}return l[27]!==c?(n=c&&(0,s.jsx)(a.Nj,{}),l[27]=c,l[28]=n):n=l[28],l[29]!==d||l[30]!==u?(i=(0,s.jsx)(tl,{disabled:d,node:u}),l[29]=d,l[30]=u,l[31]=i):i=l[31],l[32]!==n||l[33]!==i?(r=(0,s.jsxs)(s.Fragment,{children:[n,i]}),l[32]=n,l[33]=i,l[34]=r):r=l[34],r}function tl(e){let t,n=(0,o.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,s.jsx)(to,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,s.jsx)(ts,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ts(e){let t,n,i,r,d=(0,o.c)(17),{disabled:c,node:u}=e;d[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,s.jsx)(a.EY,{size:1,children:u.disabled.reason}),d[0]=u.disabled,d[1]=t):t=d[1];let h=t,{title:f}=(0,m.FP1)(u),x=c||!!u.disabled;d[2]!==u.hotkey?(n=u.hotkey?.split("+"),d[2]=u.hotkey,d[3]=n):n=d[3];let g=u.iconRight||u.selected&&p.Nrt,b=`action-${tn(u.title)}`;return d[4]!==u.icon||d[5]!==u.onAction||d[6]!==u.selected||d[7]!==u.tone||d[8]!==x||d[9]!==n||d[10]!==g||d[11]!==b||d[12]!==f?(i=(0,s.jsx)(l.Dr,{disabled:x,hotkeys:n,icon:u.icon,iconRight:g,onClick:u.onAction,pressed:u.selected,text:f,tone:u.tone,"data-testid":b}),d[4]=u.icon,d[5]=u.onAction,d[6]=u.selected,d[7]=u.tone,d[8]=x,d[9]=n,d[10]=g,d[11]=b,d[12]=f,d[13]=i):i=d[13],d[14]!==i||d[15]!==h?(r=(0,s.jsx)(m.FUn,{content:h,placement:"left",children:i}),d[14]=i,d[15]=h,d[16]=r):r=d[16],r}function to(e){let t,n,i,r,d,c,u=(0,o.c)(23),{disabled:h,intent:f,node:x}=e;u[0]!==x.disabled?(t="object"==typeof x.disabled&&(0,s.jsx)(a.EY,{size:1,children:x.disabled.reason}),u[0]=x.disabled,u[1]=t):t=u[1];let g=t;u[2]!==f.params||u[3]!==f.type?(n={intent:f.type,params:f.params},u[2]=f.params,u[3]=f.type,u[4]=n):n=u[4];let b=(0,v.cQ)(n);u[5]!==b||u[6]!==x?(i=e=>{b.onClick(e),x.onAction()},u[5]=b,u[6]=x,u[7]=i):i=u[7];let y=i,{title:j}=(0,m.FP1)(x),_=h||!!x.disabled;u[8]!==x.hotkey?(r=x.hotkey?.split("+"),u[8]=x.hotkey,u[9]=r):r=u[9];let w=x.selected?p.Nrt:void 0;return u[10]!==y||u[11]!==b.href||u[12]!==x.icon||u[13]!==x.selected||u[14]!==x.tone||u[15]!==_||u[16]!==r||u[17]!==w||u[18]!==j?(d=(0,s.jsx)(l.Dr,{as:"a",disabled:_,hotkeys:r,href:b.href,icon:x.icon,iconRight:w,onClick:y,pressed:x.selected,text:j,tone:x.tone}),u[10]=y,u[11]=b.href,u[12]=x.icon,u[13]=x.selected,u[14]=x.tone,u[15]=_,u[16]=r,u[17]=w,u[18]=j,u[19]=d):d=u[19],u[20]!==d||u[21]!==g?(c=(0,s.jsx)(m.FUn,{content:g,placement:"left",children:d}),u[20]=d,u[21]=g,u[22]=c):c=u[22],c}let ta={constrainSize:!0,placement:"bottom",portal:!0};function td(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&td(e.children,t))}function tc(e){let t,n,i,r,d,u=(0,o.c)(13),{nodes:p,actionsNodes:h}=e,f=(0,c.useId)(),x=td(p,"critical"),g=td(p,"caution"),b=x?"critical":g?"caution":void 0;return u[0]!==b?(t=(0,s.jsx)(m.VJU,{tone:b,"data-testid":"pane-context-menu-button"}),u[0]=b,u[1]=t):t=u[1],u[2]!==h?(n=h&&(0,s.jsxs)(s.Fragment,{children:[h,(0,s.jsx)(a.Nj,{})]}),u[2]=h,u[3]=n):n=u[3],u[4]!==p?(i=p.map((e,t)=>{let n=p[t-1]?.type==="group";return(0,s.jsx)(tr,{isAfterGroup:n,node:e},e.key)}),u[4]=p,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(r=(0,s.jsxs)(a.W1,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=r):r=u[8],u[9]!==f||u[10]!==t||u[11]!==r?(d=(0,s.jsx)(l.IU,{button:t,id:f,menu:r,popover:ta}),u[9]=f,u[10]=t,u[11]=r,u[12]=d):d=u[12],d}let tu=(0,x.I4)(a.Wd)`
  position: sticky;
  bottom: 0;
`,tp=(0,x.I4)(a.Zp)`
  padding-bottom: env(safe-area-inset-bottom);
`,tm=(0,c.forwardRef)(function(e,t){let n,i,r=(0,o.c)(7),{children:l,padding:d}=e,{collapsed:c}=te();return r[0]!==l||r[1]!==d?(n=(0,s.jsx)(tp,{tone:"inherit",children:(0,s.jsx)(a.az,{padding:d,children:l})}),r[0]=l,r[1]=d,r[2]=n):n=r[2],r[3]!==c||r[4]!==t||r[5]!==n?(i=(0,s.jsx)(m.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(tu,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),r[3]=c,r[4]=t,r[5]=n,r[6]=i):i=r[6],i}),th=(0,x.I4)(a.Wd)(({$border:e})=>(0,x.AH)`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),tf=(0,x.I4)(a.so)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,tx=(0,x.I4)(a.Zp)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return(0,x.AH)`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),tg=(0,x.I4)(d.r5)`
  width: 66%;
  max-width: 175px;
`,tb=(0,x.I4)(a.EY)`
  cursor: default;
  outline: none;
`,ty=(0,c.forwardRef)(function(e,t){let n,i,r,l,c,u,p,h,f,x,g,b,y,j=(0,o.c)(48),{actions:v,backButton:_,border:w,contentAfter:S,loading:k,subActions:C,tabs:I,tabIndex:E,title:z,appendTitle:T}=e,{collapse:A,collapsed:P,expand:R,rootElement:M}=te(),D=(0,d.sQ)(M||null),$=P?D?.height||window.innerHeight:void 0;j[0]!==$?(n={width:$},j[0]=$,j[1]=n):n=j[1];let B=n;j[2]!==A||j[3]!==P?(i=()=>{P||A()},j[2]=A,j[3]=P,j[4]=i):i=j[4];let Y=i;j[5]!==P||j[6]!==R?(r=()=>{P&&R()},j[5]=P,j[6]=R,j[7]=r):r=j[7];let L=r,O=!!(!P&&(I||C)),H=P?"":void 0,V=P?"":void 0;j[8]!==_?(l=_&&(0,s.jsx)(a.az,{flex:"none",children:_}),j[8]=_,j[9]=l):l=j[9];let Z=_?1:2;j[10]!==k?(c=k&&(0,s.jsx)(a.az,{children:(0,s.jsx)(tg,{animated:!0,radius:1,size:1})}),j[10]=k,j[11]=c):c=j[11],j[12]!==T||j[13]!==k||j[14]!==z?(u=!k&&(0,s.jsxs)(a.so,{align:"center",gap:1,children:[(0,s.jsx)(tb,{size:1,textOverflow:"ellipsis",weight:"semibold",children:z}),T]}),j[12]=T,j[13]=k,j[14]=z,j[15]=u):u=j[15],j[16]!==Y||j[17]!==Z||j[18]!==c||j[19]!==u||j[20]!==E?(p=(0,s.jsxs)(tx,{__unstable_focusRing:!0,flex:1,onClick:Y,paddingLeft:Z,padding:2,tabIndex:E,children:[c,u]}),j[16]=Y,j[17]=Z,j[18]=c,j[19]=u,j[20]=E,j[21]=p):p=j[21],j[22]!==v||j[23]!==P?(h=v&&(0,s.jsx)(a.az,{hidden:P,children:(0,s.jsx)(m.wG1,{zOffset:"paneHeader",children:v})}),j[22]=v,j[23]=P,j[24]=h):h=j[24],j[25]!==p||j[26]!==h||j[27]!==l?(f=(0,s.jsxs)(a.so,{align:"flex-start",gap:3,children:[l,p,h]}),j[25]=p,j[26]=h,j[27]=l,j[28]=f):f=j[28],j[29]!==P||j[30]!==O||j[31]!==C||j[32]!==I?(x=O&&(0,s.jsxs)(a.so,{align:"center",hidden:P,overflow:"auto",children:[(0,s.jsx)(a.az,{flex:1,marginRight:3*!!C,children:I}),C]}),j[29]=P,j[30]=O,j[31]=C,j[32]=I,j[33]=x):x=j[33],j[34]!==L||j[35]!==B||j[36]!==f||j[37]!==x?(g=(0,s.jsxs)(tf,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:B,children:[f,x]}),j[34]=L,j[35]=B,j[36]=f,j[37]=x,j[38]=g):g=j[38];let N=!P&&S;return j[39]!==g||j[40]!==N||j[41]!==V?(b=(0,s.jsx)(m.wG1,{zOffset:"paneHeader",children:(0,s.jsxs)(a.Zp,{"data-collapsed":V,tone:"inherit",children:[g,N]})}),j[39]=g,j[40]=N,j[41]=V,j[42]=b):b=j[42],j[43]!==w||j[44]!==t||j[45]!==b||j[46]!==H?(y=(0,s.jsx)(a.XS,{zOffset:100,children:(0,s.jsx)(th,{$border:w,"data-collapsed":H,"data-testid":"pane-header",ref:t,children:b})}),j[43]=w,j[44]=t,j[45]=b,j[46]=H,j[47]=y):y=j[47],y});function tj(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function tv(e){let t=(0,o.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,s.jsx)(t_,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,s.jsx)(tS,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function t_(e){let t,n,i,r,l,a=(0,o.c)(23),{node:d}=e,{title:c}=(0,m.FP1)(d),{t:u}=(0,m.Bdt)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,s.jsx)(tw,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=tj(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:h,isDisabled:f}=t;a[5]!==h||a[6]!==u||a[7]!==c?(n=h||c||u("status-button.aria-label"),a[5]=h,a[6]=u,a[7]=c,a[8]=n):n=a[8],a[9]!==f||a[10]!==d.hotkey?(i=!f&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=f,a[10]=d.hotkey,a[11]=i):i=a[11];let x=f?p:c;return a[12]!==i||a[13]!==x?(r={hotkeys:i,content:x},a[12]=i,a[13]=x,a[14]=r):r=a[14],a[15]!==f||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==n||a[21]!==r?(l=(0,s.jsx)(m.pfD,{disabled:f,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:r}),a[15]=f,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=n,a[21]=r,a[22]=l):l=a[22],l}function tw(e){let t,n,i,r,l,a,d,c=(0,o.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let h=(0,v.cQ)(t),{t:f}=(0,m.Bdt)();c[3]!==h||c[4]!==p?(n=e=>{h.onClick(e),p.onAction()},c[3]=h,c[4]=p,c[5]=n):n=c[5];let x=n;c[6]!==p?(i=tj(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:g,ariaLabel:b,isDisabled:y}=i;c[8]!==b||c[9]!==p.title||c[10]!==f?(r=b||p.title||f("status-button.aria-label"),c[8]=b,c[9]=p.title,c[10]=f,c[11]=r):r=c[11],c[12]!==y||c[13]!==p.hotkey?(l=!y&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=y,c[13]=p.hotkey,c[14]=l):l=c[14];let j=y?g:p.title;return c[15]!==l||c[16]!==j?(a={hotkeys:l,content:j,placement:"bottom",portal:!0},c[15]=l,c[16]=j,c[17]=a):a=c[17],c[18]!==x||c[19]!==h.href||c[20]!==y||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==r||c[25]!==a?(d=(0,s.jsx)(m.pfD,{forwardedAs:"a",disabled:y,href:h.href,icon:p.icon,onClick:x,selected:p.selected,tone:p.tone,"aria-label":r,tooltipProps:a}),c[18]=x,c[19]=h.href,c[20]=y,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=r,c[25]=a,c[26]=d):d=c[26],d}function tS(e){let t,n,i,r,d,u=(0,o.c)(16),{node:h}=e,{title:f}=(0,m.FP1)(h),x=!!h.disabled,g=h.icon??p.KSC;u[0]!==h.title?(t={content:h.title,portal:!0},u[0]=h.title,u[1]=t):t=u[1],u[2]!==x||u[3]!==g||u[4]!==t||u[5]!==f?(n=(0,s.jsx)(l.$n,{disabled:x,icon:g,label:f,mode:"bleed",tooltipProps:t}),u[2]=x,u[3]=g,u[4]=t,u[5]=f,u[6]=n):n=u[6];let b=(0,c.useId)();return u[7]!==h.children||u[8]!==h.disabled?(i=h.children.map((e,t)=>(0,s.jsx)(tr,{disabled:!!h.disabled,isAfterGroup:h.children[t-1]?.type==="group",node:e},e.key)),u[7]=h.children,u[8]=h.disabled,u[9]=i):i=u[9],u[10]!==i?(r=(0,s.jsx)(a.W1,{children:i}),u[10]=i,u[11]=r):r=u[11],u[12]!==n||u[13]!==b||u[14]!==r?(d=(0,s.jsx)(l.IU,{button:n,id:b,menu:r}),u[12]=n,u[13]=b,u[14]=r,u[15]=d):d=u[15],d}let tk=(0,x.I4)(a.Zp)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,tC=[];function tI(e){let t,n,i,r,l,a,p,m,h,f,x,g,b,y,j,v,_,w=(0,o.c)(41);w[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:r,...l}=e,w[0]=e,w[1]=t,w[2]=n,w[3]=i,w[4]=r,w[5]=l):(t=w[1],n=w[2],i=w[3],r=w[4],l=w[5]);let[S]=(0,c.useState)(tE),[k,C]=(0,c.useState)(null),I=(0,d.sQ)(k)?.width||0,E=void 0!==I&&n?I<n:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(a={expandedElement:null,panes:[],resizing:!1},w[6]=a):a=w[6];let[z,T]=(0,c.useState)(a);w[7]!==S||w[8]!==k?(p=()=>S.setRootElement(k),m=[S,k],w[7]=S,w[8]=k,w[9]=p,w[10]=m):(p=w[9],m=w[10]),(0,c.useEffect)(p,m),w[11]!==S||w[12]!==I?(h=()=>S.setRootWidth(I),f=[S,I],w[11]=S,w[12]=I,w[13]=h,w[14]=f):(h=w[13],f=w[14]),(0,c.useEffect)(h,f),w[15]!==S?(x=()=>S.subscribe(T),g=[S],w[15]=S,w[16]=x,w[17]=g):(x=w[16],g=w[17]),(0,c.useEffect)(x,g),w[18]!==E||w[19]!==i||w[20]!==r?(b=()=>{void 0!==E&&(E&&i&&i(),!E&&r&&r())},y=[E,i,r],w[18]=E,w[19]=i,w[20]=r,w[21]=b,w[22]=y):(b=w[21],y=w[22]),(0,c.useEffect)(b,y),w[23]!==E||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==z.expandedElement||w[29]!==z.panes||w[30]!==z.resizing?(j={collapse:S.collapse,collapsed:E,expand:S.expand,expandedElement:z.expandedElement,mount:S.mount,panes:z.panes,resize:S.resize,resizing:z.resizing},w[23]=E,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=z.expandedElement,w[29]=z.panes,w[30]=z.resizing,w[31]=j):j=w[31];let A=j,P=E?"":void 0,R=z.resizing?"":void 0,M=I?"":void 0;return w[32]!==t||w[33]!==l||w[34]!==P||w[35]!==R||w[36]!==M?(v=(0,s.jsx)(tk,{"data-ui":"PaneLayout",...l,"data-collapsed":P,"data-resizing":R,"data-mounted":M,ref:C,children:t}),w[32]=t,w[33]=l,w[34]=P,w[35]=R,w[36]=M,w[37]=v):v=w[37],w[38]!==A||w[39]!==v?(_=(0,s.jsx)(u._U.Provider,{value:A,children:v}),w[38]=A,w[39]=v,w[40]=_):_=w[40],_}function tE(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,r={},l=null,s=0,o=null,a=new Map,d=!1;function c(e){i.delete(e),o=e,u()}return{collapse:function(e){i.add(e),o===e&&(o=null),u()},expand:c,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),l&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let r=Array.from(t.childNodes).indexOf(i);if(n.unshift(r),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||tC,r=n.get(t)||tC,l=Math.max(i.length,r.length);for(let e=0;e<l;e+=1){let t=i[e]||-1,n=r[e]||-1;if(t!==n)return t-n}return 0})}(l,t),c(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,l){let s=t.indexOf(i),o=n.get(i);if(!o)return;let c=t[s+1],p=n.get(c);if(p){if("start"===e&&(d=!0,r.left={element:i,flex:o.flex||1,width:i.offsetWidth},r.right={element:c,flex:p.flex||1,width:c.offsetWidth},u()),"move"===e&&r.left&&r.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:s}=function(e,t,n,i){let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},l=t.minWidth??204,s=n.minWidth??204,o=Math.min(t.maxWidth||1/0,r.width-s),a=Math.min(n.maxWidth||1/0,r.width-l),d=l-e.left.width,c=e.right.width-a;d<c&&(d=c);let u=e.right.width-s,p=o-e.left.width;u>p&&(u=p);let m=Math.min(Math.max(i,d),u),h=e.left.width+m,f=e.right.width-m;return{leftFlex:h/r.width*r.flex,leftW:h,rightFlex:f/r.width*r.flex,rightW:f}}(r,o,p,l);a.set(i,{flex:n,width:e}),a.set(c,{flex:s,width:t}),u()}if("end"===e){d=!1;let e=a.get(i),t=a.get(c);n.set(i,{...o,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:e?.flex??o.flex}),n.set(c,{...p,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete r.left,delete r.right,u()}}},setRootElement:function(e){l=e},setRootWidth:function(e){s=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!s)return;let r=[];for(let e of t)e!==o&&r.unshift(e);o&&r.unshift(o);let l=new WeakMap,c=r.length,u=r[0],p=s-(c-1)*51;for(let e of r){let t=n.get(e);if(!t)continue;let r=t.currentMinWidth||t.minWidth||204,s=e===u,o=i.has(e),d=r>p,c=!s&&(o||d),m=a.get(e);l.set(e,{element:e,collapsed:c,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),c?p-=51:p-=r-51}let m=[];for(let e of t){let t=l.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:o||t[t.length-1]||null,panes:m,resizing:d})}}()}function tz(e){let t,n,i,r=(0,o.c)(12),{children:l,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,x=void 0===h?"critical":h;return r[0]!==f?(t=(0,s.jsx)(ty,{title:f}),r[0]=f,r[1]=t):t=r[1],r[2]!==l?(n=(0,s.jsx)(tt,{overflow:"auto",children:(0,s.jsx)(a.az,{paddingX:4,paddingY:5,children:l})}),r[2]=l,r[3]=n):n=r[3],r[4]!==d||r[5]!==c||r[6]!==u||r[7]!==p||r[8]!==t||r[9]!==n||r[10]!==x?(i=(0,s.jsxs)(e8,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:x,children:[t,n]}),r[4]=d,r[5]=c,r[6]=u,r[7]=p,r[8]=t,r[9]=n,r[10]=x,r[11]=i):i=r[11],i}function tT(e){let t,n,i,r=(0,o.c)(6),{children:l,ms:a}=e,d=void 0===a?0:a,[u,p]=(0,c.useState)(d<=0);if(r[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>p(!0),d);return()=>{clearTimeout(e)}},n=[d],r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,c.useEffect)(t,n),!u||!l){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==l?(i="function"==typeof l?l():l,r[4]=l,r[5]=i):i=r[5],i}function tA(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(m.Cu5){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,Z.of)(null);return(0,N.h)(...t.map(e=>n.pipe((0,k.u)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,C.c)(e.ms))))}let tP=(0,x.I4)(a.so)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,tR=(0,c.memo)(e=>{let t,n,i,l,a,u,p,h,f,x,g=(0,o.c)(28),{delay:b,flex:y,message:j,minWidth:v,paneKey:_,path:w,selected:S,title:k,tone:C}=e,I=void 0===b?300:b,E=void 0===j?tA:j,{t:z}=(0,m.Bdt)(r.Z7);e:{if("function"==typeof E){let e;g[0]!==E||g[1]!==w?(e=E(w?w.split(";"):[]),g[0]=E,g[1]=w,g[2]=e):e=g[2],t=e;break e}t=E}let T=t;g[3]!==T||g[4]!==z?(n=()=>"string"==typeof T?T:z("panes.resolving.default-message"),g[3]=T,g[4]=z,g[5]=n):n=g[5];let[A,P]=(0,c.useState)(n);g[6]!==T||g[7]!==z?(i=()=>{if("object"!=typeof T||"function"!=typeof T.subscribe)return;let e=T.subscribe(e=>{P("messageKey"in e?z(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[T,z],g[6]=T,g[7]=z,g[8]=i,g[9]=l):(i=g[8],l=g[9]),(0,c.useEffect)(i,l);let[R,M]=(0,c.useState)(null),[D,$]=(0,c.useState)(!1);g[10]!==R?(a=()=>{if(R)return(0,d.X)(()=>$(!0))},u=[R],g[10]=R,g[11]=a,g[12]=u):(a=g[11],u=g[12]),(0,c.useEffect)(a,u);let B=D?"":void 0,Y=k||A;g[13]!==Y?(p=(0,s.jsx)(m.gd4,{showText:!0,title:Y}),g[13]=Y,g[14]=p):p=g[14],g[15]!==p||g[16]!==B?(h=(0,s.jsx)(tP,{align:"center","data-mounted":B,direction:"column",height:"fill",justify:"center",ref:M,children:p}),g[15]=p,g[16]=B,g[17]=h):h=g[17];let L=h;return g[18]!==L||g[19]!==I?(f=(0,s.jsx)(tt,{children:L}),g[18]=L,g[19]=I,g[20]=f):f=g[20],g[21]!==y||g[22]!==v||g[23]!==_||g[24]!==S||g[25]!==f||g[26]!==C?(x=(0,s.jsx)(e8,{flex:y,id:_,minWidth:v,selected:S,tone:C,children:f}),g[21]=y,g[22]=v,g[23]=_,g[24]=S,g[25]=f,g[26]=C,g[27]=x):x=g[27],x});function tM(){let e=(0,c.useContext)(u.Fi);if(!e)throw Error("DocumentPane: missing context value");return e}function tD(e){let t,n,i=(0,o.c)(8),{children:r,documentId:l,documentType:a}=e;return i[0]!==r||i[1]!==l||i[2]!==a?(t=(0,s.jsx)(t$,{documentId:l,documentType:a,children:r}),i[0]=r,i[1]=l,i[2]=a,i[3]=t):t=i[3],i[4]!==l||i[5]!==a||i[6]!==t?(n=(0,s.jsx)(m.ByQ,{documentId:l,documentType:a,children:t}),i[4]=l,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function t$(e){let t,n,i,r,l,a,d=(0,o.c)(27),{children:u,documentId:p,documentType:h}=e,{enabled:f}=(0,m.Dsj)(),{connectionState:x,onPathOpen:g,inspector:b,openInspector:y}=tM(),{selectedReleaseId:j}=(0,m.QO2)(),{params:_,setParams:w}=tB(),{studioUrl:S}=(0,m.HuN)(window.location.origin),{resolveIntentLink:k}=(0,v.rd)(),C=_?.comment,I=(0,c.useRef)(_);d[0]!==_?(t=()=>{I.current=_},n=[_],d[0]=_,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,c.useLayoutEffect)(t,n),d[3]!==p||d[4]!==h||d[5]!==k||d[6]!==S?(i=e=>{let t=k("edit",{id:p,type:h,inspect:m.nHq,comment:e});return`${S}${t}`},d[3]=p,d[4]=h,d[5]=k,d[6]=S,d[7]=i):i=d[7];let E=i;d[8]!==w?(r=()=>{w({...I.current,comment:void 0})},d[8]=w,d[9]=r):r=d[9];let z=r;d[10]!==b?.name||d[11]!==y?(l=()=>{b?.name!==m.nHq&&y(m.nHq)},d[10]=b?.name,d[11]=y,d[12]=l):l=d[12];let T=l;if(!f){let e;return d[13]!==u?(e=(0,s.jsx)(s.Fragment,{children:u}),d[13]=u,d[14]=e):e=d[14],e}let A=b?.name===m.nHq,P="connecting"===x;return d[15]!==u||d[16]!==p||d[17]!==h||d[18]!==E||d[19]!==z||d[20]!==T||d[21]!==g||d[22]!==C||d[23]!==j||d[24]!==A||d[25]!==P?(a=(0,s.jsx)(m.ixz,{documentId:p,documentType:h,getCommentLink:E,isCommentsOpen:A,isConnecting:P,onClearSelectedComment:z,onCommentsOpen:T,onPathOpen:g,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:j,children:u}),d[15]=u,d[16]=p,d[17]=h,d[18]=E,d[19]=z,d[20]=T,d[21]=g,d[22]=C,d[23]=j,d[24]=A,d[25]=P,d[26]=a):a=d[26],a}function tB(){return(0,c.useContext)(u.l4)}function tY({displayed:e,documentId:t}){let{selectedReleaseId:n}=(0,m.QO2)(),{data:i}=(0,m.K0D)(),{data:r}=(0,m.gJZ)(),{data:l}=(0,m.gn8)({documentId:t}),s=e&&!e._createdAt,{params:o}=tB();return(0,c.useMemo)(()=>{if(!l)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let t=l.map(e=>(0,m._Sr)(e)),a=i.reduce((i,r)=>{let l=t.includes((0,m._hI)(r._id)),o=(0,m._hI)(r._id);return s&&o===(0,m._Sr)(e._id||"")&&o===n?i.inCreation=r:l?i.currentReleases.push(r):i.notCurrentReleases.push(r),i},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!o?.historyVersion)return a;let d=r.find(e=>(0,m._hI)(e._id)===o?.historyVersion);return d?.state==="archived"&&a.currentReleases.push(d),a},[r,s,e?._id,l,o?.historyVersion,i,n])}function tL({displayed:e,documentId:t,editState:n}){let{document:{drafts:{enabled:i}}}=(0,m.hA9)(),r=tY({displayed:e,documentId:t}),l=[n?.published?._id,i?n?.draft?._id:[]].flat(),s=r.currentReleases.map(e=>n?.id&&(0,m.ctg)(n.id,(0,m._hI)(e._id))),o=l.concat(s).filter(e=>"string"==typeof e),a=(0,c.useMemo)(()=>o.findIndex(t=>t===e?._id),[e?._id,o]),d=(0,c.useMemo)(()=>o[a-1]??void 0,[a,o]),u=(0,c.useMemo)(()=>o[a+1]??void 0,[a,o]);return{position:a,previousId:d,nextId:u,stack:o}}function tO(){let e=(0,c.useContext)(u.DI);if(!e)throw Error("StructureTool: missing context value");return e}tR.displayName="Memo(LoadingPane)";let tH={},tV="inspect:",tZ=[{id:"inspectors"},{id:"links"}],tN="sanity/structure/history";function tF(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:r}=e,l=i.length,[a,d]=(0,c.useState)(()=>Array.from(Array(l)));(0,c.useEffect)(()=>{if(a.length!==l){let e=Array.from(Array(l));for(let t=0;t<l;t++)e[t]=a[t];d(e)}},[l,a]);let u=(0,c.useCallback)((e,t)=>{d(n=>{let i=[...n];return i[e]=t,i})},[]);(0,c.useEffect)(()=>{r(a.filter(Boolean))},[a,r]);let p=(0,c.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:r}){return(0,c.memo)(function(){let l,s,a,d=(0,o.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(l={documentId:e,documentType:t},d[0]=l):l=d[0];let u=r(l),p=(0,m.$6H)(u);return d[1]!==p?(s=()=>{i(n,p)},a=[p],d[1]=p,d[2]=s,d[3]=a):(s=d[2],a=d[3]),(0,c.useEffect)(s,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:u,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,u]);return(0,s.jsx)(s.Fragment,{children:p.map(([e,t])=>t&&(0,s.jsx)(e,{},t))})}function tK(){let e,t,n,i=(0,o.c)(22),{connectionState:l,schemaType:s,editState:a,isDeleted:d,lastRevisionDocument:c}=tM(),{t:u}=(0,m.Bdt)(r.Z7),p=d?c:a?.version||a?.draft||a?.published,h=!!p;e:{if(d&&c&&s)try{let t;i[0]!==c||i[1]!==s?(t=(0,m.hCw)(c,s),i[0]=c,i[1]=s,i[2]=t):t=i[2],e=t;break e}catch(t){console.warn("Failed to prepare preview for deleted document:",t),e=null;break e}e=null}let f=e,x=h&&!d;i[3]!==p||i[4]!==s||i[5]!==x?(t={enabled:x,schemaType:s,value:p},i[3]=p,i[4]=s,i[5]=x,i[6]=t):t=i[6];let{error:g,value:b}=(0,m.MOl)(t);if("connecting"===l&&!h){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},i[7]=e):e=i[7],e}if(d&&f){let e;return i[8]!==f.title?(e={error:void 0,title:f.title},i[8]=f.title,i[9]=e):e=i[9],e}if(!b&&!d){let e,t,n=s?.title||s?.name;return i[10]!==u||i[11]!==n?(e=u("panes.document-header-title.new.text",{schemaType:n}),i[10]=u,i[11]=n,i[12]=e):e=i[12],i[13]!==e?(t={error:void 0,title:e},i[13]=e,i[14]=t):t=i[14],t}if(g){let e,t;return i[15]!==g.message||i[16]!==u?(e=u("panes.document-list-pane.error.text",{error:g.message}),i[15]=g.message,i[16]=u,i[17]=e):e=i[17],i[18]!==e?(t={error:e,title:void 0},i[18]=e,i[19]=t):t=i[19],t}let y=b?.title;return i[20]!==y?(n={error:void 0,title:y},i[20]=y,i[21]=n):n=i[21],n}tF.displayName="DocumentInspectorMenuItemsResolver";let tW=["patch","commit"],tJ=(0,c.memo)(function(){let e,t,n,i,l,a=(0,o.c)(13),{push:u}=(0,d.dj)(),{documentId:p,documentType:h,value:f}=tM(),x=tK(),g=x.error,b=(0,m.cUp)(p,h),y=(0,c.useRef)(b),j=tB(),{t:v}=(0,m.Bdt)(r.Z7),{handleOpenDialog:_}=(0,m.pDY)();e:{if(!x.title&&!g&&!tW.includes(b?.op)&&"string"==typeof f.title&&b?.type==="success"){e=f.title;break e}e=x.title}let w=e;a[0]!==v||a[1]!==w?(t=w||v("panes.document-operation-results.operation-undefined-title"),a[0]=v,a[1]=w,a[2]=t):t=a[2];let S=t;a[3]!==S?(n=S.length>25?`${S.slice(0,25)}...`:S,a[3]=S,a[4]=n):n=a[4];let k=n;return a[5]!==k||a[6]!==b||a[7]!==_||a[8]!==j||a[9]!==u||a[10]!==v?(i=()=>{let e;if(b&&b!==y.current){if("error"===b.type){if((0,m.rML)(b.error))return void _("document_action");u({closable:!0,duration:3e4,status:"error",title:v("panes.document-operation-results.operation-error",{context:b.op}),description:(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:v("panes.document-operation-results.error.summary.title")}),b.error.message]})})}return"success"!==b.type||tW.includes(b.op)||u({closable:!0,status:"success",title:(0,s.jsx)(m.HTc,{context:b.op,i18nKey:"panes.document-operation-results.operation-success",t:v,values:{op:b.op,title:k},components:{Strong:"strong"}})}),"success"===b.type&&"delete"===b.op&&(e=setTimeout(()=>j.closeCurrentAndAfter(),0)),y.current=b,()=>clearTimeout(e)}},l=[b,j,u,v,k,_],a[5]=k,a[6]=b,a[7]=_,a[8]=j,a[9]=u,a[10]=v,a[11]=i,a[12]=l):(i=a[11],l=a[12]),(0,c.useEffect)(i,l),null}),tU=(0,x.I4)(a.Zp)({position:"relative",zIndex:"1",lineHeight:"0"});function tG(e){let t,n,i,d,c,u,h,f,x,g,b,y,j=(0,o.c)(25);j[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:d,title:u,...c}=e,j[0]=e,j[1]=t,j[2]=n,j[3]=i,j[4]=d,j[5]=c,j[6]=u):(t=j[1],n=j[2],i=j[3],d=j[4],c=j[5],u=j[6]);let{t:v}=(0,m.Bdt)(r.Z7);return j[7]!==u?(h=(0,s.jsx)(a.az,{flex:1,padding:3,children:(0,s.jsx)(a.EY,{as:"h1",size:1,weight:"medium",children:u})}),j[7]=u,j[8]=h):h=j[8],j[9]!==v?(f=v("document-inspector.close-button.tooltip"),j[9]=v,j[10]=f):f=j[10],j[11]!==f?(x={content:f},j[11]=f,j[12]=x):x=j[12],j[13]!==n||j[14]!==d||j[15]!==x?(g=(0,s.jsx)(a.az,{flex:"none",padding:1,children:(0,s.jsx)(l.$n,{"aria-label":n,icon:p.USm,mode:"bleed",onClick:d,tooltipProps:x})}),j[13]=n,j[14]=d,j[15]=x,j[16]=g):g=j[16],j[17]!==h||j[18]!==g?(b=(0,s.jsxs)(a.so,{padding:2,children:[h,g]}),j[17]=h,j[18]=g,j[19]=b):b=j[19],j[20]!==t||j[21]!==i||j[22]!==c||j[23]!==b?(y=(0,s.jsxs)(tU,{...c,as:i,children:[b,t]}),j[20]=t,j[21]=i,j[22]=c,j[23]=b,j[24]=y):y=j[24],y}function tQ(e){let t,n,i,r=(0,o.c)(14),{documentId:l,documentType:d,flex:c}=e,{collapsed:u}=te(),{closeInspector:p,inspector:h}=tM(),{features:f}=tO();r[0]!==p||r[1]!==h?(t=()=>{h&&p(h.name)},r[0]=p,r[1]=h,r[2]=t):t=r[2];let x=t;if(u||!h)return null;let g=h.component;r[3]!==g||r[4]!==l||r[5]!==d||r[6]!==x?(n=(0,s.jsx)(g,{onClose:x,documentId:l,documentType:d}),r[3]=g,r[4]=l,r[5]=d,r[6]=x,r[7]=n):n=r[7];let b=n;if(f.resizablePanes){let e;return r[8]!==b||r[9]!==c?(e=(0,s.jsx)(m.cMO,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:b}),r[8]=b,r[9]=c,r[10]=e):e=r[10],e}return r[11]!==b||r[12]!==c?(i=(0,s.jsx)(a.az,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:b}),r[11]=b,r[12]=c,r[13]=i):i=r[13],i}function tq(e,t,n){let i,r,l,s,a=(0,o.c)(16),d=(0,m.P$5)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let c=i.join(".");if(a[3]!==n||a[4]!==d||a[5]!==c){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],r=d.getKey(c).pipe((0,I.T)(e)),a[3]=n,a[4]=d,a[5]=c,a[6]=r}else r=a[6];let u=(0,j.J)(r,n);a[9]!==d||a[10]!==c||a[11]!==u?(l=e=>{e!==u&&d.setKey(c,e)},a[9]=d,a[10]=c,a[11]=u,a[12]=l):l=a[12];let p=l;return a[13]!==p||a[14]!==u?(s=[u,p],a[13]=p,a[14]=u,a[15]=s):s=a[15],s}let tX={id:"parsed",title:"document-inspector.view-mode.parsed"},t0={id:"raw",title:"document-inspector.view-mode.raw-json"},t1=[tX,t0],t2=new eb({maxSize:1e3});function t3(e){let{path:t}=e,n=t2.get(t);void 0!==n&&t2.set(t,!n)}function t4(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function t5(e){t4(e.currentTarget)}function t6(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t4(e.currentTarget))}let t7=x.I4.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return(0,x.AH)`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,a.D0)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,a.D0)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,a.D0)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,a.D0)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,a.D0)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function t8(e){let t,n,i,l=(0,o.c)(8),{onChange:d,query:c}=e;l[0]!==d?(t=e=>d(e.target.value),l[0]=d,l[1]=t):t=l[1];let u=t,{t:h}=(0,m.Bdt)(r.Z7);l[2]!==h?(n=h("document-inspector.search.placeholder"),l[2]=h,l[3]=n):n=l[3];let f=c||"";return l[4]!==u||l[5]!==n||l[6]!==f?(i=(0,s.jsx)(a.ks,{icon:p.WIv,onChange:u,placeholder:n,radius:2,value:f}),l[4]=u,l[5]=n,l[6]=f,l[7]=i):i=l[7],i}function t9(e){let t,n,i,c,u,p,h,f,x,g,b,y,j,v,_,w,S=(0,o.c)(49),{value:k}=e,{onInspectClose:C,paneKey:I}=tM(),E=`${I}_inspect_`,[z,T]=tq("inspect-view-mode",null,"parsed");S[0]!==z?(t=t1.find(e=>e.id===z),S[0]=z,S[1]=t):t=S[1];let A=t;S[2]!==T?(n=()=>{T(tX.id)},S[2]=T,S[3]=n):n=S[3];let P=n;S[4]!==T?(i=()=>{T(t0.id)},S[4]=T,S[5]=i):i=S[5];let R=i,{t:M}=(0,m.Bdt)(r.Z7),D=`${E}dialog`;S[6]!==M||S[7]!==k?(c=(0,m.u4i)(k)&&(0,m.KgX)(k._id)&&(0,m.KgX)(k._type)?(0,s.jsx)(m.HTc,{t:M,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,s.jsx)("em",{children:(0,s.jsx)(ll,{document:k})})}}):(0,s.jsx)("em",{children:M("document-inspector.dialog.title-no-value")}),S[6]=M,S[7]=k,S[8]=c):c=S[8],S[9]===Symbol.for("react.memo_cache_sentinel")?(u={position:"sticky",bottom:0,zIndex:3},S[9]=u):u=S[9];let $=`${E}tabpanel`,B=`${E}tab-${tX.id}`;S[10]!==M?(p=M(tX.title),S[10]=M,S[11]=p):p=S[11];let Y=A===tX;S[12]!==P||S[13]!==$||S[14]!==B||S[15]!==p||S[16]!==Y?(h=(0,s.jsx)(l.oz,{"aria-controls":$,id:B,label:p,onClick:P,selected:Y}),S[12]=P,S[13]=$,S[14]=B,S[15]=p,S[16]=Y,S[17]=h):h=S[17];let L=`${E}tabpanel`,O=`${E}tab-${t0.id}`;S[18]!==M?(f=M(t0.title),S[18]=M,S[19]=f):f=S[19];let H=A===t0;S[20]!==R||S[21]!==L||S[22]!==O||S[23]!==f||S[24]!==H?(x=(0,s.jsx)(l.oz,{"aria-controls":L,id:O,label:f,onClick:R,selected:H}),S[20]=R,S[21]=L,S[22]=O,S[23]=f,S[24]=H,S[25]=x):x=S[25],S[26]!==h||S[27]!==x?(g=(0,s.jsx)(a.Zp,{padding:3,paddingTop:0,shadow:1,style:u,children:(0,s.jsxs)(a.wb,{space:1,children:[h,x]})}),S[26]=h,S[27]=x,S[28]=g):g=S[28];let V=`${E}tab-${z}`,Z=`${E}tabpanel`;return S[29]===Symbol.for("react.memo_cache_sentinel")?(b={outline:"none"},S[29]=b):b=S[29],S[30]!==k||S[31]!==A?(y=A===tX&&(0,s.jsx)(t7,{children:(0,s.jsx)(eg.A,{data:k,isExpanded:function e(t,n){let i=t2.get(t);return void 0===i?(t2.set(t,Array.isArray(n)||(0,m.u4i)(n)),e(t,n)):i},onClick:t3,search:t8,filterOptions:{ignoreCase:!0}})}),S[30]=k,S[31]=A,S[32]=y):y=S[32],S[33]!==k||S[34]!==A?(j=A===t0&&(0,s.jsx)(a.Cy,{language:"json",tabIndex:0,onKeyDown:t6,onDoubleClick:t5,onFocus:t5,size:1,children:JSON.stringify(k,null,2)}),S[33]=k,S[34]=A,S[35]=j):j=S[35],S[36]!==V||S[37]!==Z||S[38]!==y||S[39]!==j?(v=(0,s.jsxs)(d.Kp,{"aria-labelledby":V,flex:1,id:Z,overflow:"auto",padding:4,style:b,children:[y,j]}),S[36]=V,S[37]=Z,S[38]=y,S[39]=j,S[40]=v):v=S[40],S[41]!==g||S[42]!==v?(_=(0,s.jsxs)(a.so,{direction:"column",height:"fill",children:[g,v]}),S[41]=g,S[42]=v,S[43]=_):_=S[43],S[44]!==C||S[45]!==_||S[46]!==D||S[47]!==c?(w=(0,s.jsx)(l.lG,{bodyHeight:"fill",id:D,header:c,onClose:C,onClickOutside:C,padding:!1,width:2,children:_}),S[44]=C,S[45]=_,S[46]=D,S[47]=c,S[48]=w):w=S[48],w}function ne(e){let t,n,i,r,d,c,u,p,m,h,f,x=(0,o.c)(22);x[0]!==e?({action:n,content:i,icon:t,tone:d,paddingY:c,...r}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=r,x[5]=d,x[6]=c):(t=x[1],n=x[2],i=x[3],r=x[4],d=x[5],c=x[6]);let g=void 0===d?"transparent":d,b=void 0===c?2:c;return x[7]!==t?(u=t&&(0,s.jsx)(a.EY,{size:0,children:(0,s.jsx)(t,{})}),x[7]=t,x[8]=u):u=x[8],x[9]!==i?(p=(0,s.jsx)(a.so,{align:"center",flex:1,gap:2,paddingY:2,children:i}),x[9]=i,x[10]=p):p=x[10],x[11]!==n?(m=n&&(0,s.jsx)(l.$n,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),x[11]=n,x[12]=m):m=x[12],x[13]!==u||x[14]!==p||x[15]!==m?(h=(0,s.jsxs)(a.so,{align:"center",gap:3,paddingX:2,children:[u,p,m]}),x[13]=u,x[14]=p,x[15]=m,x[16]=h):h=x[16],x[17]!==b||x[18]!==r||x[19]!==h||x[20]!==g?(f=(0,s.jsx)(a.az,{padding:1,children:(0,s.jsx)(a.Zp,{radius:3,paddingX:2,paddingY:b,tone:g,...r,children:h})}),x[17]=b,x[18]=r,x[19]=h,x[20]=g,x[21]=f):f=x[21],f}function nt(){let e=(0,o.c)(3),{isDeleted:t,isDeleting:n,ready:i}=tM(),{selectedPerspective:r}=(0,m.QO2)();if(!i)return null;if(!(0,m.xo4)(r)&&!(0,m.o2j)(r)&&"archived"===r.state){let t;return e[0]!==r?(t=(0,s.jsx)(ni,{release:r}),e[0]=r,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(nn,{}),e[2]=t):t=e[2],t}}function nn(){let e,t,n,i,l,d,c=(0,o.c)(17),{documentId:u,documentType:h}=tM(),{restore:f}=(0,m.QSs)(u,h),{navigateIntent:x}=(0,v.rd)();c[0]!==u||c[1]!==h||c[2]!==x||c[3]!==f?(e=()=>{f.execute("lastRevision"),x("edit",{id:u,type:h})},c[0]=u,c[1]=h,c[2]=x,c[3]=f,c[4]=e):e=c[4];let g=e,{t:b}=(0,m.Bdt)(r.Z7);return c[5]!==b?(t=b("banners.deleted-document-banner.restore-button.text"),c[5]=b,c[6]=t):t=c[6],c[7]!==g||c[8]!==t?(n={onClick:g,text:t},c[7]=g,c[8]=t,c[9]=n):n=c[9],c[10]!==b?(i=b("banners.deleted-document-banner.text"),c[10]=b,c[11]=i):i=c[11],c[12]!==i?(l=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:i}),c[12]=i,c[13]=l):l=c[13],c[14]!==n||c[15]!==l?(d=(0,s.jsx)(ne,{action:n,content:l,"data-testid":"deleted-document-banner",icon:p.Eoh}),c[14]=n,c[15]=l,c[16]=d):d=c[16],d}let ni=e=>{let t,n,i,r=(0,o.c)(8),{release:l}=e,{t:d}=(0,m.Bdt)();return r[0]!==l.metadata?.title||r[1]!==d?(t=l.metadata?.title||d("release.placeholder-untitled-release"),r[0]=l.metadata?.title,r[1]=d,r[2]=t):t=r[2],r[3]!==t?(n={title:t},r[3]=t,r[4]=n):n=r[4],r[5]!==d||r[6]!==n?(i=(0,s.jsx)(ne,{tone:"caution",content:(0,s.jsx)(a.EY,{size:1,weight:"medium",children:(0,s.jsx)(m.HTc,{t:d,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:p.tkA}),r[5]=d,r[6]=n,r[7]=i):i=r[7],i};function nr(){let e,t,n=(0,o.c)(5),{schemaType:i}=tM(),{t:l}=(0,m.Bdt)(r.Z7);return(0,h.fq)(i)?(n[0]!==l?(e=(0,s.jsx)(m.HTc,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,s.jsx)(ne,{content:(0,s.jsxs)(a.EY,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:p.YZv}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let nl=(0,ep.g_)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),ns=(0,ep.g_)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),no=(0,x.I4)(a.az)`
  box-sizing: border-box;
`;function na(e){let t,n,i,u,p,h,f,x,g,b,y,v,_,w,S,k=(0,o.c)(56),{onClose:C,onRequestSubmitted:T}=e,{t:A}=(0,m.Bdt)(r.Z7),P=(0,ed.Jr)(),R=`request-permissions-${(0,c.useId)()}`,M=(0,m.M91)();k[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},k[0]=t):t=k[0];let D=(0,m.tH7)(t),$=(0,d.dj)(),B=(0,m.YKH)(),[Y,L]=(0,c.useState)(!1),[O,H]=(0,c.useState)(""),[V,N]=(0,c.useState)(),[F,K]=(0,c.useState)(!1),[W,J]=(0,c.useState)(!1);e:{let e,t="administrator";if(!M||!D){let e;k[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,Z.of)(t),k[1]=e):e=k[1],n=e;break e}if(k[2]!==D.observable||k[3]!==M){let n,i;k[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(nc).find(nd)?"editor":t,k[5]=n):n=k[5],k[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,Z.of)(t),k[6]=i):i=k[6],e=D.observable.request({url:`/projects/${M}/roles`}).pipe((0,I.T)(n),(0,z.Z)(t),(0,E.W)(i)),k[2]=D.observable,k[3]=M,k[4]=e}else e=k[4];n=e}let U=(0,j.J)(n);k[7]!==D||k[8]!==O||k[9]!==T||k[10]!==M||k[11]!==U||k[12]!==P||k[13]!==$?(i=()=>{L(!0),D.request({url:`/access/project/${M}/requests`,method:"post",body:{note:O,requestUrl:window?.location.href,requestedRole:U,type:"role"}}).then(e=>{e&&(T&&T(),P.log(ns),$.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(K(!0),N(n)),409===t?(J(!0),N(n)):$.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{L(!1)})},k[7]=D,k[8]=O,k[9]=T,k[10]=M,k[11]=U,k[12]=P,k[13]=$,k[14]=i):i=k[14];let G=i,Q=B.fullscreen;k[15]!==A?(u=A("request-permission-dialog.header.text"),k[15]=A,k[16]=u):u=k[16],k[17]!==A?(p=A("confirm-dialog.cancel-button.fallback-text"),k[17]=A,k[18]=p):p=k[18],k[19]!==C||k[20]!==p?(h={onClick:C,text:p},k[19]=C,k[20]=p,k[21]=h):h=k[21];let q=F||W;return k[22]!==A?(f=A("request-permission-dialog.confirm-button.text"),k[22]=A,k[23]=f):f=k[23],k[24]!==Y||k[25]!==G||k[26]!==q||k[27]!==f?(x={onClick:G,loading:Y,disabled:q,text:f,tone:"primary",type:"submit"},k[24]=Y,k[25]=G,k[26]=q,k[27]=f,k[28]=x):x=k[28],k[29]!==x||k[30]!==h?(g={cancelButton:h,confirmButton:x},k[29]=x,k[30]=h,k[31]=g):g=k[31],k[32]!==A?(b=A("request-permission-dialog.description.text"),k[32]=A,k[33]=b):b=k[33],k[34]!==b?(y=(0,s.jsx)(a.EY,{children:b}),k[34]=b,k[35]=y):y=k[35],k[36]!==W||k[37]!==F||k[38]!==Y||k[39]!==V||k[40]!==O||k[41]!==G||k[42]!==A?(v=F||W?(0,s.jsx)(a.Zp,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,s.jsxs)(a.EY,{size:1,children:[F&&(0,s.jsx)(s.Fragment,{children:V??A("request-permission-dialog.warning.limit-reached.text")}),W&&(0,s.jsx)(s.Fragment,{children:V??A("request-permission-dialog.warning.denied.text")})]})}):(0,s.jsxs)(a.BJ,{space:3,paddingBottom:0,children:[(0,s.jsx)(a.ks,{placeholder:A("request-permission-dialog.note-input.placeholder.text"),disabled:Y,onKeyDown:e=>{"Enter"===e.key&&G()},maxLength:150,value:O,onChange:e=>{H(e.currentTarget.value)}}),(0,s.jsx)(a.EY,{align:"right",muted:!0,size:1,children:`${O.length}/150`})]}),k[36]=W,k[37]=F,k[38]=Y,k[39]=V,k[40]=O,k[41]=G,k[42]=A,k[43]=v):v=k[43],k[44]!==y||k[45]!==v?(_=(0,s.jsx)(no,{children:(0,s.jsxs)(a.BJ,{space:4,children:[y,v]})}),k[44]=y,k[45]=v,k[46]=_):_=k[46],k[47]!==R||k[48]!==C||k[49]!==g||k[50]!==_||k[51]!==u?(w=(0,s.jsx)(l.lG,{width:1,id:R,header:u,footer:g,onClose:C,onClickOutside:C,children:_}),k[47]=R,k[48]=C,k[49]=g,k[50]=_,k[51]=u,k[52]=w):w=k[52],k[53]!==w||k[54]!==B.fullscreen?(S=(0,s.jsx)(d.Co,{position:"fixed",zOffset:Q,children:w}),k[53]=w,k[54]=B.fullscreen,k[55]=S):S=k[55],S}function nd(e){return"editor"===e.name}function nc(e){return e?.appliesToUsers}(0,x.I4)(a.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let nu={loading:!0,error:!1,status:void 0},np={loading:!1,error:!1,status:"none"},nm={loading:!1,error:!1,status:"declined"},nh={loading:!1,error:!1,status:"pending"},nf={loading:!1,error:!1,status:"expired"};function nx(e){let t,n,i,l,d,u,h,f,x=(0,o.c)(29),{requiredPermission:g}=e,b=(0,m.iZK)(),{data:y,loading:v,error:_}=(()=>{let e,t,n,i=(0,o.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let r=(0,m.tH7)(e),l=(0,m.M91)();e:{var s,a;let e;if(!r||!l){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,Z.of)(np),i[1]=e):e=i[1],t=e;break e}i[2]!==r||i[3]!==l?(s=r,a=l,e=s.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,I.T)(e=>{if(!e||0===e.length)return np;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,ey.A)((0,ej.A)(new Date(n.createdAt),2),new Date)?nm:t.find(e=>"pending"===e.status&&(0,ey.A)((0,ej.A)(new Date(e.createdAt),2),new Date))?nh:t.find(e=>"pending"===e.status&&(0,ev.A)((0,ej.A)(new Date(e.createdAt),2),new Date))?nf:np}),(0,E.W)(e=>(console.error("Failed to fetch access requests",e),(0,Z.of)({loading:!1,error:!0,status:void 0}))),(0,z.Z)(nu)),i[2]=r,i[3]=l,i[4]=e):e=i[4],t=e}let d=t,{loading:c,error:u,status:p}=(0,j.J)(d,nu);return i[5]!==u||i[6]!==c||i[7]!==p?(n={data:p,loading:c,error:u},i[5]=u,i[6]=c,i[7]=p,i[8]=n):n=i[8],n})(),[w,S]=(0,c.useState)(!1),k="pending"===y||"declined"===y||w,C=b?.roles||[],T=1===C.length&&"viewer"===C[0].name,[A,P]=(0,c.useState)(!1);x[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},x[0]=t):t=x[0];let R=(0,m.FfM)(t),{t:M}=(0,m.Bdt)(r.Z7),D=(0,ed.Jr)(),$=C.map(nb),B=R.formatToParts($).map(ng);return x[1]!==B?(n={Roles:()=>(0,s.jsx)(s.Fragment,{children:B})},x[1]=B,x[2]=n):n=x[2],x[3]!==$||x[4]!==B.length?(i={count:B.length,roles:$},x[3]=$,x[4]=B.length,x[5]=i):i=x[5],x[6]!==g||x[7]!==M||x[8]!==n||x[9]!==i?(l=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:(0,s.jsx)(m.HTc,{t:M,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:g})}),x[6]=g,x[7]=M,x[8]=n,x[9]=i,x[10]=l):l=x[10],x[11]!==T||x[12]!==k||x[13]!==_||x[14]!==v||x[15]!==y||x[16]!==P||x[17]!==M||x[18]!==D?(d=T&&y&&!_&&!v?{onClick:k?void 0:()=>{P(!0),D.log(nl)},text:M(k?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:k?"default":"primary",disabled:k,mode:k?"bleed":void 0}:void 0,x[11]=T,x[12]=k,x[13]=_,x[14]=v,x[15]=y,x[16]=P,x[17]=M,x[18]=D,x[19]=d):d=x[19],x[20]!==l||x[21]!==d?(u=(0,s.jsx)(ne,{content:l,action:d,"data-testid":"permission-check-banner",icon:p.Eoh}),x[20]=l,x[21]=d,x[22]=u):u=x[22],x[23]!==P||x[24]!==A?(h=A&&(0,s.jsx)(na,{onClose:()=>P(!1),onRequestSubmitted:()=>{S(!0),P(!1)}}),x[23]=P,x[24]=A,x[25]=h):h=x[25],x[26]!==u||x[27]!==h?(f=(0,s.jsxs)(s.Fragment,{children:[u,h]}),x[26]=u,x[27]=h,x[28]=f):f=x[28],f}function ng(e){return"element"===e.type?(0,s.jsx)("code",{children:e.value},e.value):e.value}function nb(e){return e.title}let ny=(0,c.memo)(()=>{let e=(0,m.yKO)(),{selectedReleaseId:t}=(0,m.QO2)(),{params:n,groupIndex:i,routerPanesState:l,replaceCurrent:o,BackLink:d}=tB(),u=l[i]?.[0].id,h=l[i-1]?.[0],f=h?.id,x=!!h?.params?.rev,g=(0,c.useMemo)(()=>n?.parentRefPath&&(0,el.sH)(n.parentRefPath)||null,[n?.parentRefPath]),{t:b}=(0,m.Bdt)(r.Z7),y=(0,c.useMemo)(()=>{let n=g?.[0];if(!f||!n||!g)return(0,Z.of)({loading:!1});let i=(0,m.IMx)(f),r=(0,el.sH)(n),l=r.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,F.x)((0,Z.of)({loading:!0}),e.unstable_observePathsDocumentPair(i,-1===l?r:r.slice(0,l),{version:t}).pipe((0,T.B)(750),(0,I.T)(({draft:e,published:t,version:n})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability,...n?.availability?{version:n.availability}:{}},refValue:(0,el.Jt)(n?.snapshot||e.snapshot||t.snapshot,g)?._ref}}))))},[t,e,f,g]),v=(0,j.J)(y,{loading:!0}),_=(0,c.useCallback)(()=>{v.loading||v.result?.refValue&&o({id:v.result.refValue,params:n})},[v.loading,v.result,o,n]);return f&&g&&!x&&!v.loading&&(v.result?.availability.draft.available||v.result?.availability.published.available)&&v.result?.refValue!==u?(0,s.jsx)(ne,{action:v.result?.refValue?{onClick:_,icon:p.Fjq,text:b("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:d,icon:p.USm,text:b("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,s.jsx)(a.EY,{size:1,weight:"medium",children:b(v.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:p.sAQ,tone:"caution"}):null});function nj(){let{t:e}=(0,m.Bdt)(r.Z7),{t:t}=(0,m.Bdt)(),{data:n}=(0,m.gJZ)(),{params:i,setParams:l}=tB(),o=(0,c.useMemo)(()=>n.find(e=>(0,m._hI)(e._id)===i?.historyVersion),[n,i?.historyVersion]),d=o?.state==="published"?"banners.published-release.description":"banners.archived-release.description",u=o?.metadata.title||t("release.placeholder-untitled-release");return(0,s.jsx)(ne,{tone:"caution",content:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{t:e,i18nKey:d,values:{title:u},components:{VersionBadge:(0,m.bSq)(o)}})}),action:i?.archivedRelease?void 0:{text:"Go back to published version",onClick:()=>{l({...i,rev:i?.historyEvent||void 0,since:void 0,historyVersion:void 0})}}})}ny.displayName="Memo(ReferenceChangedBanner)";let nv=x.I4.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,n_=e=>{let t,n,i,d,u,h,f,x,g,b,y,j,v=(0,o.c)(22),{onClose:_}=e,{t:w}=(0,m.Bdt)(r.Z7),S=(0,c.useRef)(null);return v[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[S.current],v[0]=t):t=v[0],(0,a.PR)(_,t),v[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(nv,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),v[1]=n):n=v[1],v[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(a.EY,{size:1,weight:"semibold",children:"Canvas"}),v[2]=i):i=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsxs)(a.so,{paddingY:1,gap:2,children:[i,(0,s.jsx)(a.EY,{size:1,muted:!0,children:(0,s.jsx)(p.v5M,{})})]}),v[3]=d):d=v[3],v[4]!==w?(u=w("canvas.banner.popover-heading"),v[4]=w,v[5]=u):u=v[5],v[6]!==u?(h=(0,s.jsx)(a.az,{paddingTop:3,children:(0,s.jsx)(a.DZ,{size:1,children:u})}),v[6]=u,v[7]=h):h=v[7],v[8]!==w?(f=w("canvas.banner.popover-description"),v[8]=w,v[9]=f):f=v[9],v[10]!==f?(x=(0,s.jsx)(a.az,{paddingTop:4,children:(0,s.jsx)(a.EY,{size:1,children:f})}),v[10]=f,v[11]=x):x=v[11],v[12]!==h||v[13]!==x?(g=(0,s.jsxs)(a.so,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[d,h,x]}),v[12]=h,v[13]=x,v[14]=g):g=v[14],v[15]!==w?(b=w("canvas.banner.popover-button-text"),v[15]=w,v[16]=b):b=v[16],v[17]!==b?(y=(0,s.jsx)(a.so,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,s.jsx)(l.$n,{mode:"bleed",text:b,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:p.ZPM})}),v[17]=b,v[18]=y):y=v[18],v[19]!==y||v[20]!==g?(j=(0,s.jsx)(a.Zp,{radius:3,overflow:"hidden",width:0,ref:S,children:(0,s.jsxs)(a.mc,{width:0,children:[n,g,y]})}),v[19]=y,v[20]=g,v[21]=j):j=v[21],j},nw=e=>{let t,n,i,d,u,h,f,x,g=(0,o.c)(17),{documentId:b}=e,{t:y}=(0,m.Bdt)(r.Z7),[j,v]=(0,c.useState)(!1),_=(0,m.tfA)(b);e:{let e;if("published"===_){let e;g[0]!==y?(e=y("canvas.banner.linked-text.published"),g[0]=y,g[1]=e):e=g[1],t=e;break e}if("draft"===_){let e;g[2]!==y?(e=y("canvas.banner.linked-text.draft"),g[2]=y,g[3]=e):e=g[3],t=e;break e}g[4]!==y?(e=y("canvas.banner.linked-text.version"),g[4]=y,g[5]=e):e=g[5],t=e}let w=t;g[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>v(nk),g[6]=n):n=g[6];let S=n;g[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>v(!1),g[7]=i):i=g[7];let k=i;return g[8]!==w?(d=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:w}),g[8]=w,g[9]=d):d=g[9],g[10]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(n_,{onClose:k}),h=(0,s.jsx)(l.$n,{tooltipProps:null,mode:"bleed",tone:"default",icon:p.YzR,onClick:S}),g[10]=u,g[11]=h):(u=g[10],h=g[11]),g[12]!==j?(f=(0,s.jsx)(l.AM,{open:j,size:0,tone:"default",portal:!0,placement:"bottom-start",content:u,children:h}),g[12]=j,g[13]=f):f=g[13],g[14]!==d||g[15]!==f?(x=(0,s.jsxs)(a.so,{align:"center",gap:2,children:[d,f]}),g[14]=d,g[15]=f,g[16]=x):x=g[16],x};function nS(){let e,t,n,i,l=(0,o.c)(10),{documentId:a,displayed:d}=tM(),{t:c}=(0,m.Bdt)(r.Z7),u=d?._id||a,{companionDoc:p}=(0,m.G2c)(u),h=(0,m.aqr)(p?.canvasDocumentId,"banner");return p?(l[0]!==u?(e=(0,s.jsx)(nw,{documentId:u}),l[0]=u,l[1]=e):e=l[1],l[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),l[2]=c,l[3]=t):t=l[3],l[4]!==h||l[5]!==t?(n={mode:"ghost",text:t,onClick:h},l[4]=h,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,s.jsx)(ne,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function nk(e){return!e}let nC=e=>{let t,n,i,l,d,c,u,h,f,x=(0,o.c)(27),{schemaType:g,selectedPerspective:b,reason:y}=e,{t:j}=(0,m.Bdt)(r.Z7),{document:v}=(0,m.hA9)(),{drafts:_}=v,{enabled:w}=_;x[0]!==w||x[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,m.CW3)({selectedPerspective:t,isDraftModelEnabled:w,schemaType:g}).result}},x[0]=w,x[1]=g,x[2]=t):t=x[2];let S=t;return x[3]!==y||x[4]!==j?(n="PUBLISHED_NOT_WRITEABLE"===y&&j("banners.choose-new-document-destination.cannot-create-published-document"),x[3]=y,x[4]=j,x[5]=n):n=x[5],x[6]!==y||x[7]!==j?(i="DRAFTS_NOT_WRITEABLE"===y&&j("banners.choose-new-document-destination.cannot-create-draft-document"),x[6]=y,x[7]=j,x[8]=i):i=x[8],x[9]!==y||x[10]!==b||x[11]!==j?(l="RELEASE_NOT_ACTIVE"===y&&(0,m.Jrl)(b)&&(0,s.jsx)(m.HTc,{t:j,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:b.metadata.title},components:{VersionBadge:(0,m.bSq)(b)}}),x[9]=y,x[10]=b,x[11]=j,x[12]=l):l=x[12],x[13]!==j?(d=j("banners.choose-new-document-destination.choose-destination"),x[13]=j,x[14]=d):d=x[14],x[15]!==d?(c=(0,s.jsxs)(s.Fragment,{children:[" ",d]}),x[15]=d,x[16]=c):c=x[16],x[17]!==n||x[18]!==i||x[19]!==l||x[20]!==c?(u=(0,s.jsxs)(a.EY,{size:1,children:[n,i,l,c]}),x[17]=n,x[18]=i,x[19]=l,x[20]=c,x[21]=u):u=x[21],x[22]!==S?(h=(0,s.jsx)(m.GCV,{menuItemProps:S}),x[22]=S,x[23]=h):h=x[23],x[24]!==h||x[25]!==u?(f=(0,s.jsx)(ne,{tone:"caution",icon:p.sAQ,content:(0,s.jsxs)(a.so,{align:"center",gap:2,children:[u,h]})}),x[24]=h,x[25]=u,x[26]=f):f=x[26],f};function nI(){let e,t,n=(0,o.c)(5),{value:i}=tM(),{documentLinkedBannerContent:r}=(0,m.eaL)().components??{};n[0]!==i?(e=(0,m.G_3)(i),n[0]=i,n[1]=e):e=n[1];let l=e;return r&&l?(n[2]!==r||n[3]!==l?(t=(0,s.jsx)(ne,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,s.jsx)(r,{metadata:l})}),n[2]=r,n[3]=l,n[4]=t):t=n[4],t):null}function nE({documentId:e,currentRelease:t,isScheduledRelease:n}){let i=(0,m.Y73)(t??m.k0f),{t:l}=(0,m.Bdt)(r.Z7),{t:u}=(0,m.Bdt)(),{createVersion:p}=(0,m.wI4)(),[h,f]=(0,c.useState)(),x=(0,d.dj)(),g=(0,c.useCallback)(async()=>{if(t._id){f({status:"creating",lastUpdate:new Date});try{await p((0,m._hI)(t._id),e),f({status:"created",lastUpdate:new Date})}catch(e){x.push({status:"error",closable:!0,title:l("banners.release.error.title"),description:l("banners.release.error.description",{message:e.message})}),f(void 0)}}},[p,t._id,e,l,x]),b=function(e){let t,n,i,r=(0,o.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,r[0]=t):t=r[0];let[l,s]=(0,c.useState)(t);return 200!==r[1]?(n=()=>{let t=setInterval(()=>{s(new Date)},e);return()=>clearInterval(t)},i=[e],r[1]=e,r[2]=n,r[3]=i):(n=r[2],i=r[3]),(0,c.useEffect)(n,i),l}(200);return(0,m.B1J)({status:"info",id:"add-document-to-release",enabled:h?.status==="created"&&b.getTime()-h.lastUpdate.getTime()>1e3,closable:!0,title:l("banners.release.waiting.title"),description:l("banners.release.waiting.description")}),(0,s.jsx)(ne,{tone:i,content:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{i18nKey:"banners.release.not-in-release",t:l,values:{title:t?.metadata?.title||u("release.placeholder-untitled-release")},components:{VersionBadge:(0,m.bSq)(t)}})}),action:n?void 0:{text:l("banners.release.action.add-to-release"),tone:i,disabled:!!h,onClick:g,mode:"default"}})}let nz=(0,ep.g_)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),nT=e=>{let t,n,i,d,u,h,f,x,g,b,y,j,v,_,w,S=(0,o.c)(47),{displayed:k,documentId:C,schemaType:I,i18nKey:E,isEditBlocking:z}=e,{t:T}=(0,m.Bdt)(r.Z7),[A,P]=(0,c.useState)(!1),[R,M]=(0,c.useState)(!1),D=(0,ed.Jr)(),{publish:$,discardChanges:B}=(0,m.QSs)(C,k?._type||"");S[0]!==$||S[1]!==D?(t=()=>{$.execute(),P(!0),D.log(nz,{liveEditResolveType:"publish"})},S[0]=$,S[1]=D,S[2]=t):t=S[2];let Y=t;S[3]!==B||S[4]!==D?(n=()=>{B.execute(),M(!0),D.log(nz,{liveEditResolveType:"discard"})},S[3]=B,S[4]=D,S[5]=n):n=S[5];let L=n;S[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{P(!1),M(!1)},S[6]=i):i=S[6],(0,c.useEffect)(i);let O=eM();S[7]!==O||S[8]!==k?._id||S[9]!==I.name?(d=()=>{typeof k?._id>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:I.name,id:(0,m.IMx)(k?._id)},nextDocument:{type:I.name,id:(0,m.T4)(k?._id)}})},S[7]=O,S[8]=k?._id,S[9]=I.name,S[10]=d):d=S[10];let H=d;return S[11]!==I.title?(u={schemaType:I.title},S[11]=I.title,S[12]=u):u=S[12],S[13]!==E||S[14]!==T||S[15]!==u?(h=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:(0,s.jsx)(m.HTc,{t:T,i18nKey:E,values:u})}),S[13]=E,S[14]=T,S[15]=u,S[16]=h):h=S[16],S[17]!==T?(f=T("banners.obsolete-draft.actions.compare-draft.text"),S[17]=T,S[18]=f):f=S[18],S[19]!==H||S[20]!==f?(x=(0,s.jsx)(l.$n,{text:f,mode:"ghost",onClick:H}),S[19]=H,S[20]=f,S[21]=x):x=S[21],S[22]!==T?(g=T("banners.obsolete-draft.actions.publish-draft.text"),S[22]=T,S[23]=g):g=S[23],S[24]!==z||S[25]!==T?(b=z?{content:T("banners.live-edit-draft-banner.publish.tooltip")}:{},S[24]=z,S[25]=T,S[26]=b):b=S[26],S[27]!==Y||S[28]!==A||S[29]!==b||S[30]!==g?(y=(0,s.jsx)(l.$n,{onClick:Y,text:g,tooltipProps:b,loading:A,tone:"positive"}),S[27]=Y,S[28]=A,S[29]=b,S[30]=g,S[31]=y):y=S[31],S[32]!==T?(j=T("banners.obsolete-draft.actions.discard-draft.text"),S[32]=T,S[33]=j):j=S[33],S[34]!==z||S[35]!==T?(v=z?{content:T("banners.live-edit-draft-banner.discard.tooltip")}:{},S[34]=z,S[35]=T,S[36]=v):v=S[36],S[37]!==L||S[38]!==R||S[39]!==j||S[40]!==v?(_=(0,s.jsx)(l.$n,{onClick:L,text:j,tooltipProps:v,loading:R,tone:"caution"}),S[37]=L,S[38]=R,S[39]=j,S[40]=v,S[41]=_):_=S[41],S[42]!==y||S[43]!==_||S[44]!==h||S[45]!==x?(w=(0,s.jsx)(ne,{content:(0,s.jsxs)(a.so,{align:"center",justify:"space-between",gap:2,children:[h,x,y,_]}),"data-testid":"live-edit-type-banner",icon:p.YZv}),S[42]=y,S[43]=_,S[44]=h,S[45]=x,S[46]=w):w=S[46],w};function nA(e){let t,n,i=(0,o.c)(4),{documentId:r,isPinnedDraftOrPublished:l}=e;i[0]!==r?(t={documentId:r},i[0]=r,i[1]=t):t=i[1];let a=(0,m.Jr6)(t);return(0,m.A_X)(r)&&a&&l?(i[2]!==r?(n=(0,s.jsx)(nP,{documentId:r}),i[2]=r,i[3]=n):n=i[3],n):null}function nP({documentId:e}){let{data:t}=(0,m.K0D)(),n=(0,m._T7)(),i=(0,m._Sr)(e)??"",l=(0,c.useMemo)(()=>t.find(e=>e._id.includes(i)),[t,i]),{t:o}=(0,m.Bdt)(),{data:d}=(0,m.gn8)({documentId:e}),u=(0,c.useMemo)(()=>t.filter(e=>d.find(t=>{let n=(0,m._Sr)(t)??"";return(0,m._hI)(e._id)===n})).map(e=>e.metadata.title||o("release.placeholder-untitled-release")),[t,d,o]),p=l&&(0,m.Y73)(l),{t:h}=(0,m.Bdt)(r.Z7),f=(0,c.useCallback)(async()=>{n(i)},[i,n]);return(0,s.jsx)(ne,{tone:p,"data-testid":"open-release-to-edit-banner",content:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(a.so,{direction:"row",gap:1,wrap:"wrap",children:u.length>1?(0,s.jsx)(m.HTc,{t:h,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,s.jsxs)(m.RwK,{children:[" ",u[0]]})},values:{count:u.length-1}}):(0,s.jsx)(m.HTc,{t:h,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,s.jsxs)(m.RwK,{children:[" ",u[0]]})}})})}),action:{text:h("banners.release.action.open-to-edit"),tone:p,onClick:f,mode:"default"}})}function nR(){let e,t,n=(0,o.c)(4),{revisionNotFound:i}=tM(),{t:l}=(0,m.Bdt)(r.Z7);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,s.jsx)(ne,{tone:"caution","data-test-id":"revision-not-found-banner",icon:p.sAQ,content:(0,s.jsx)(a.EY,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function nM(e){let t,n,i,r,l,d=(0,o.c)(12),{currentRelease:c}=e,u=c??m.k0f;d[0]!==u?(t=(0,m.Y73)(u),d[0]=u,d[1]=t):t=d[1];let h=t,{t:f}=(0,m.Bdt)();return d[2]!==c?(n=(0,m.drb)(c),d[2]=c,d[3]=n):n=d[3],d[4]!==n?(i={date:n},d[4]=n,d[5]=i):i=d[5],d[6]!==i||d[7]!==f?(r=(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{t:f,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),d[6]=i,d[7]=f,d[8]=r):r=d[8],d[9]!==r||d[10]!==h?(l=(0,s.jsx)(ne,{tone:h,icon:p.XAi,content:r}),d[9]=r,d[10]=h,d[11]=l):l=d[11],l}function nD(){let e=(0,o.c)(18),{value:t,editState:n}=tM(),{selectedPerspective:i}=(0,m.QO2)(),l=(0,m.YW1)(t)||n?.version&&(0,m.YW1)(n?.version),{t:d}=(0,m.Bdt)(r.Z7),{t:c}=(0,m.Bdt)();if((0,m.Jrl)(i)&&l){let t,n,r,l,o,u,h;e[0]!==i.metadata?.title||e[1]!==c?(t=i.metadata?.title||c("release.placeholder-untitled-release"),e[0]=i.metadata?.title,e[1]=c,e[2]=t):t=e[2];let f=t;return e[3]!==f?(n={title:f},e[3]=f,e[4]=n):n=e[4],e[5]!==i?(r=(0,m.bSq)(i),e[5]=i,e[6]=r):r=e[6],e[7]!==r?(l={VersionBadge:r},e[7]=r,e[8]=l):l=e[8],e[9]!==d||e[10]!==n||e[11]!==l?(o=(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{t:d,i18nKey:"banners.unpublished-release-banner.text",values:n,components:l})}),e[9]=d,e[10]=n,e[11]=l,e[12]=o):o=e[12],e[13]!==d?(u=(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{t:d,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=d,e[14]=u):u=e[14],e[15]!==o||e[16]!==u?(h=(0,s.jsx)(ne,{tone:"critical",content:(0,s.jsxs)(a.BJ,{space:2,children:[o,u]}),icon:p.wvk}),e[15]=o,e[16]=u,e[17]=h):h=e[17],h}return null}let n$=(0,x.I4)(a.BJ)`
  ${({theme:e})=>(0,x.AH)`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,nB=e=>{let t,n,i,d,c=(0,o.c)(14),{documentId:u,schemaType:h,title:f}=e,x=u===h.name,g=h.description,{t:b}=(0,m.Bdt)(r.Z7);if(!1===h.__experimental_formPreviewTitle)return null;c[0]!==g||c[1]!==x||c[2]!==h.name||c[3]!==h.title?(t=!x&&(0,s.jsxs)(a.cV,{space:1,children:[(0,s.jsx)(a.EY,{muted:!0,size:1,children:h.title??h.name}),g&&(0,s.jsx)(l.m_,{content:g,placement:"right",children:(0,s.jsx)(p.YzR,{"data-testid":"schema-description-icon"})})]}),c[0]=g,c[1]=x,c[2]=h.name,c[3]=h.title,c[4]=t):t=c[4];let y=!f;return c[5]!==b||c[6]!==f?(n=f??b("document-view.form-view.form-title-fallback"),c[5]=b,c[6]=f,c[7]=n):n=c[7],c[8]!==y||c[9]!==n?(i=(0,s.jsx)(a.DZ,{as:"h2","data-heading":!0,muted:y,"data-testid":"document-panel-document-title",children:n}),c[8]=y,c[9]=n,c[10]=i):i=c[10],c[11]!==t||c[12]!==i?(d=(0,s.jsxs)(n$,{marginBottom:6,space:4,children:[t,i]}),c[11]=t,c[12]=i,c[13]=d):d=c[13],d},nY=e=>e.preventDefault(),nL=(0,c.forwardRef)(function(e,t){let n,i,l,u,p,h,f,x,g,b,y,j,v,_,w,S=(0,o.c)(76),{hidden:k,margins:C}=e,{collapsedFieldSets:I,collapsedPaths:E,displayed:z,editState:T,documentId:P,documentType:R,fieldActions:M,onChange:D,validation:$,ready:B,formState:Y,onFocus:L,connectionState:O,onBlur:H,onSetCollapsedPath:V,onPathOpen:Z,onSetCollapsedFieldSet:N,onSetActiveFieldGroup:F,openPath:K,compareValue:W}=tM(),{selectedReleaseId:J,selectedPerspective:U}=(0,m.QO2)(),G=(0,m.q3J)(),Q=(0,m.cVB)(P),{title:q}=tK(),[X]=(0,c.useState)(nO),ee=T?.transactionSyncLock?.enabled,{t:et}=(0,m.Bdt)(r.Z7);S[0]!==et?(n=et("document-view.form-view.sync-lock-toast.title"),S[0]=et,S[1]=n):n=S[1],S[2]!==et?(i=et("document-view.form-view.sync-lock-toast.description"),S[2]=et,S[3]=i):i=S[3],S[4]!==ee||S[5]!==n||S[6]!==i?(l={id:"sync-lock",status:"warning",enabled:ee,title:n,description:i,closable:!0},S[4]=ee,S[5]=n,S[6]=i,S[7]=l):l=S[7],(0,m.B1J)(l),S[8]!==P||S[9]!==G.pair||S[10]!==R||S[11]!==X||S[12]!==J?(u=()=>{let e=G.pair.documentEvents(P,R,J).pipe((0,A.M)(e=>{"mutation"===e.type&&X.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,m.i6N)(e.origin,t)}}(e)),"rebase"===e.type&&X.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,m.i6N)("remote",t).concat((0,m.i6N)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},S[8]=P,S[9]=G.pair,S[10]=R,S[11]=X,S[12]=J,S[13]=u):u=S[13],S[14]!==P||S[15]!==G||S[16]!==R||S[17]!==X||S[18]!==J?(p=[P,G,R,X,J],S[14]=P,S[15]=G,S[16]=R,S[17]=X,S[18]=J,S[19]=p):p=S[19],(0,c.useEffect)(u,p);let en=!!z?._rev;S[20]!==X||S[21]!==z?(h=()=>{X.publish({type:"mutation",patches:[],snapshot:z})},S[20]=X,S[21]=z,S[22]=h):h=S[22];let ei=(0,ew.J)(h);S[23]!==ei||S[24]!==en?(f=()=>{en&&ei()},S[23]=ei,S[24]=en,S[25]=f):f=S[25],S[26]!==en?(x=[en],S[26]=en,S[27]=x):x=S[27],(0,c.useEffect)(f,x);let[er,el]=(0,c.useState)(null),[es,eo]=(0,c.useState)(!1);S[28]!==es||S[29]!==er||S[30]!==Y?.focusPath.length||S[31]!==B?(g=()=>{!es&&B&&!Y?.focusPath.length&&er&&(eo(!0),(0,d.s5)(er))},S[28]=es,S[29]=er,S[30]=Y?.focusPath.length,S[31]=B,S[32]=g):g=S[32];let ea=Y?.focusPath.length;S[33]!==es||S[34]!==er||S[35]!==B||S[36]!==ea?(b=[es,er,ea,B],S[33]=es,S[34]=er,S[35]=B,S[36]=ea,S[37]=b):b=S[37],(0,c.useEffect)(g,b),S[38]!==t?(y=e=>{el(e),"function"==typeof t?t(e):t&&(t.current=e)},S[38]=t,S[39]=y):y=S[39];let ed=y,ec="reconnecting"===O||Y?.readOnly||!T?.ready,eu=ec?"true":void 0;return S[40]!==I||S[41]!==E||S[42]!==W||S[43]!==O||S[44]!==P||S[45]!==T?.draft||S[46]!==T?.published||S[47]!==M||S[48]!==Y||S[49]!==k||S[50]!==ec||S[51]!==H||S[52]!==D||S[53]!==L||S[54]!==Z||S[55]!==F||S[56]!==N||S[57]!==V||S[58]!==K||S[59]!==X||S[60]!==Q||S[61]!==U||S[62]!==et||S[63]!==q||S[64]!==$?(j="connecting"!==O||T?.draft||T?.published?null===Y||k?(0,s.jsx)(a.az,{padding:2,children:(0,s.jsx)(a.EY,{children:et("document-view.form-view.form-hidden")})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nB,{documentId:P,schemaType:Y.schemaType,title:q}),(0,s.jsx)(m.okx,{__internal_fieldActions:M,__internal_patchChannel:X,changed:Y.changed,collapsedFieldSets:I,collapsedPaths:E,compareValue:W??void 0,focused:Y.focused,focusPath:Y.focusPath,groups:Y.groups,id:"root",members:Y.members,onChange:D,onFieldGroupSelect:F,onPathBlur:H,onPathFocus:L,onPathOpen:Z,onSetFieldSetCollapsed:N,onSetPathCollapsed:V,openPath:K,perspective:U,presence:Q,readOnly:ec,schemaType:Y.schemaType,validation:$,value:Y.value})]}):(0,s.jsx)(tT,{ms:300,children:(0,s.jsxs)(a.so,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,s.jsx)(a.y$,{muted:!0}),(0,s.jsx)(a.az,{marginTop:3,children:(0,s.jsx)(a.EY,{align:"center",muted:!0,size:1,children:et("document-view.form-view.loading")})})]})}),S[40]=I,S[41]=E,S[42]=W,S[43]=O,S[44]=P,S[45]=T?.draft,S[46]=T?.published,S[47]=M,S[48]=Y,S[49]=k,S[50]=ec,S[51]=H,S[52]=D,S[53]=L,S[54]=Z,S[55]=F,S[56]=N,S[57]=V,S[58]=K,S[59]=X,S[60]=Q,S[61]=U,S[62]=et,S[63]=q,S[64]=$,S[65]=j):j=S[65],S[66]!==ed||S[67]!==eu||S[68]!==j?(v=(0,s.jsx)(a.az,{as:"form",onSubmit:nY,ref:ed,"data-testid":"form-view","data-read-only":eu,children:j}),S[66]=ed,S[67]=eu,S[68]=j,S[69]=v):v=S[69],S[70]!==C||S[71]!==v?(_=(0,s.jsx)(m.MLZ,{margins:C,children:v}),S[70]=C,S[71]=v,S[72]=_):_=S[72],S[73]!==k||S[74]!==_?(w=(0,s.jsx)(a.mc,{hidden:k,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:_}),S[73]=k,S[74]=_,S[75]=w):w=S[75],w});function nO(){return(0,m.Ijd)()}function nH(){let e,t,n=(0,o.c)(11),{activeViewId:i,paneKey:r,views:l}=tM(),d=`${r}tabpanel`;if(n[0]!==i||n[1]!==r||n[2]!==d||n[3]!==l){let t;n[5]!==i||n[6]!==r||n[7]!==d?(t=(e,t)=>(0,s.jsx)(nV,{icon:e.icon,id:`${r}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:d,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=r,n[7]=d,n[8]=t):t=n[8],e=l.map(t),n[0]=i,n[1]=r,n[2]=d,n[3]=l,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,s.jsx)(a.wb,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function nV(e){let t,n,i,r,a,d,c,u,p,m=(0,o.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:r,tabPanelId:d,viewId:c,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=r,m[5]=a,m[6]=d,m[7]=c):(t=m[1],n=m[2],i=m[3],r=m[4],a=m[5],d=m[6],c=m[7]);let{ready:h,editState:f}=tM(),{setView:x}=tB();m[8]!==x||m[9]!==c?(u=()=>x(c),m[8]=x,m[9]=c,m[10]=u):u=m[10];let g=u,b=!h&&!f?.draft&&!f?.published;return m[11]!==g||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==r||m[16]!==a||m[17]!==b||m[18]!==d?(p=(0,s.jsx)(l.oz,{...a,"aria-controls":d,disabled:b,icon:t,id:n,label:r,onClick:g,selected:i}),m[11]=g,m[12]=t,m[13]=n,m[14]=i,m[15]=r,m[16]=a,m[17]=b,m[18]=d,m[19]=p):p=m[19],p}function nZ(){let e,t,n=(0,o.c)(18),{connectionState:i,schemaType:l,title:a,value:d}=tM(),{title:c,error:u}=tK(),{t:p}=(0,m.Bdt)(r.Z7);if("connecting"===i&&!d){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),n[0]=e):e=n[0],e}if(a){let e;return n[1]!==a?(e=(0,s.jsx)(s.Fragment,{children:a}),n[1]=a,n[2]=e):e=n[2],e}if(!d){let e,t,i=l?.title||l?.name;return n[3]!==p||n[4]!==i?(e=p("panes.document-header-title.new.text",{schemaType:i}),n[3]=p,n[4]=i,n[5]=e):e=n[5],n[6]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),n[6]=e,n[7]=t):t=n[7],t}if(u){let e,t;return n[8]!==u||n[9]!==p?(e=p("panes.document-header-title.error.text",{error:u}),n[8]=u,n[9]=p,n[10]=e):e=n[10],n[11]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),n[11]=e,n[12]=t):t=n[12],t}return n[13]!==c||n[14]!==p?(e=c||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:p("panes.document-header-title.untitled.text")}),n[13]=c,n[14]=p,n[15]=e):e=n[15],n[16]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),n[16]=e,n[17]=t):t=n[17],t}let nN=e=>{let t,n,i,d,c,u,h=(0,o.c)(16);h[0]!==e?({documentExists:t,...n}=e,h[0]=e,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let{isFavorited:f,isReady:x,favorite:g,unfavorite:b}=(0,m.$_6)(n),{t:y}=(0,m.Bdt)(r.Z7),j=f?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";h[3]!==y||h[4]!==j?(i=y(j),h[3]=y,h[4]=j,h[5]=i):i=h[5];let v=i,_=f?b:g,w=!x||!t;return h[6]!==v?(d={content:(0,s.jsx)(a.EY,{size:1,children:v}),placement:"right"},h[6]=v,h[7]=d):d=h[7],h[8]!==f?(c=(0,s.jsx)(a.EY,{size:1,children:f?(0,s.jsx)(p.WmX,{}):(0,s.jsx)(p.Gg5,{})}),h[8]=f,h[9]=c):c=h[9],h[10]!==v||h[11]!==_||h[12]!==w||h[13]!==d||h[14]!==c?(u=(0,s.jsx)(l.$n,{mode:"bleed",onClick:_,disabled:w,"aria-label":v,"aria-live":"assertive",tooltipProps:d,children:c}),h[10]=v,h[11]=_,h[12]=w,h[13]=d,h[14]=c,h[15]=u):u=h[15],u},nF=(0,c.memo)(function(){let e,t,n,i,a,d,c,u=(0,o.c)(26),{editState:h,connectionState:f,views:x,documentId:g,displayed:b}=tM(),{features:y}=tO(),{index:j,BackLink:v}=tB(),{activeWorkspace:_}=(0,m.VrO)();u[0]!==g?(e=(0,m.IMx)(g),u[0]=g,u[1]=e):e=u[1];let w=e,S=x.length>1,{collapsed:k,isLast:C}=te(),I=C&&!k?-1:0,E=y.backButton&&j>0,{t:z}=(0,m.Bdt)(r.Z7);u[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(nZ,{}),u[2]=t):t=u[2];let T=t;u[3]!==S?(n=S&&(0,s.jsx)(nH,{}),u[3]=S,u[4]=n):n=u[4];let A=n;u[5]!==v||u[6]!==E||u[7]!==z?(i=E&&(0,s.jsx)(l.$n,{as:v,"data-as":"a",icon:p.A60,mode:"bleed",tooltipProps:{content:z("pane-header.back-button.text")}}),u[5]=v,u[6]=E,u[7]=z,u[8]=i):i=u[8];let P=i,R=b?._type??"";u[9]!==_.dataset||u[10]!==_.projectId?(a=[_.projectId,_.dataset],u[9]=_.dataset,u[10]=_.projectId,u[11]=a):a=u[11];let M=a.join("."),D=(h?.ready&&(h.version??h.draft??h.published)!==null)??!1;u[12]!==_.dataset||u[13]!==_.name||u[14]!==_.projectId||u[15]!==w||u[16]!==R||u[17]!==M||u[18]!==D?(d=(0,s.jsx)(m.m2r,{capability:"comlink",condition:"available",children:(0,s.jsx)(nN,{resourceType:"studio",documentId:w,documentType:R,resourceId:M,schemaName:_.name,projectId:_.projectId,dataset:_.dataset,documentExists:D})}),u[12]=_.dataset,u[13]=_.name,u[14]=_.projectId,u[15]=w,u[16]=R,u[17]=M,u[18]=D,u[19]=d):d=u[19];let $=d,B="connecting"===f&&!h?.draft&&!h?.published;return u[20]!==P||u[21]!==$||u[22]!==B||u[23]!==I||u[24]!==A?(c=(0,s.jsx)(ty,{loading:B,title:T,tabs:A,tabIndex:I,backButton:P,appendTitle:$}),u[20]=P,u[21]=$,u[22]=B,u[23]=I,u[24]=A,u[25]=c):c=u[25],c}),nK=(0,x.I4)(a.az)({position:"relative"}),nW=(0,x.I4)(m.PaW)(({$disabled:e})=>e?{height:"100%"}:(0,x.AH)`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),nJ=function(e){let t,n,i,r,l,d,u,p,h,f,x,g,b,y,j,v=(0,o.c)(104),{footerHeight:_,headerHeight:w,isInspectOpen:S,rootElement:k,setDocumentPanelPortalElement:C,footer:I}=e,{activeViewId:E,displayed:z,documentId:T,editState:A,inspector:P,value:R,views:M,ready:D,schemaType:$,permissions:B,isPermissionsLoading:Y}=tM();if(v[0]!==R){let e=(0,m.G_3)(R);t=(0,m.Y07)(e),v[0]=R,v[1]=t}else t=v[1];let L=t,{params:O}=tB(),{collapsed:H}=e4(),{collapsed:V}=te(),Z=(0,a.WP)(),{features:N}=tO(),[F,K]=(0,c.useState)(null),[W,J]=(0,c.useState)(null),U=(0,c.useRef)(null),G=(0,m.hA9)(),Q=R._createdAt?"update":"create";v[2]!==E||v[3]!==M?(n=M.find(e=>e.id===E)||M[0]||{type:"form"},v[2]=E,v[3]=M,v[4]=n):n=v[4];let q=n,X=N.splitPanes&&F||Z.element;e:{let e;if(H){let e,t=w||0,n=_?_+2:2;v[5]!==t||v[6]!==n?(e=[t,0,n,0],v[5]=t,v[6]=n,v[7]=e):e=v[7],i=e;break e}v[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],v[8]=e):e=v[8],i=e}let ee=i,et="form"!==q.type;v[9]!==q.component||v[10]!==q.options||v[11]!==q.type||v[12]!==z||v[13]!==T||v[14]!==A?.draft||v[15]!==A?.published||v[16]!==$||v[17]!==R?(r=()=>{if("component"===q.type&&q.component){let e=q.component;return(0,s.jsx)(e,{document:{draft:A?.draft||null,displayed:z||R,historical:z,published:A?.published||null},documentId:T,options:q.options,schemaType:$})}return!1},v[9]=q.component,v[10]=q.options,v[11]=q.type,v[12]=z,v[13]=T,v[14]=A?.draft,v[15]=A?.published,v[16]=$,v[17]=R,v[18]=r):r=v[18],v[19]!==r?(l=r(),v[19]=r,v[20]=l):l=v[20];let en=l;v[21]!==W?(d=()=>{W?.scrollTo&&W.scrollTo(0,0)},v[21]=W,v[22]=d):d=v[22],v[23]!==T||v[24]!==W?(u=[T,W],v[23]=T,v[24]=W,v[25]=u):u=v[25],(0,c.useEffect)(d,u),v[26]!==X||v[27]!==C?(p=()=>{X&&C(X)},h=[X,C],v[26]=X,v[27]=C,v[28]=p,v[29]=h):(p=v[28],h=v[29]),(0,c.useEffect)(p,h),v[30]!==z||v[31]!==S||v[32]!==R?(f=S?(0,s.jsx)(t9,{value:z||R}):null,v[30]=z,v[31]=S,v[32]=R,v[33]=f):f=v[33];let ei=f,er=!!(!V&&P),{selectedPerspective:el,selectedReleaseId:es}=(0,m.QO2)();t:{let e,t,n,i,r,l,o,a,d,c,u,p,h,f;if(O?.historyVersion){let e;v[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(nj,{}),v[34]=e):e=v[34],x=e;break t}v[35]!==el?(e=(0,m.Jrl)(el)&&(0,m.KJ$)(el),v[35]=el,v[36]=e):e=v[36];let g=e,b=!!(g&&z?._id&&(0,m._Sr)(z?._id)===es);if(v[37]!==A||v[38]!==$||v[39]!==el||v[40]!==G.document.drafts.enabled?(n=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,m.cX9)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,m.CW3)({selectedPerspective:el,isDraftModelEnabled:G.document.drafts.enabled,schemaType:$}),editState:A}),v[37]=A,v[38]=$,v[39]=el,v[40]=G.document.drafts.enabled,v[41]=t,v[42]=n):(t=v[41],n=v[42]),n){let e;v[43]!==t.reason||v[44]!==t.result||v[45]!==$||v[46]!==el?(e=!t.result&&(0,s.jsx)(nC,{schemaType:$,selectedPerspective:el,reason:t.reason}),v[43]=t.reason,v[44]=t.result,v[45]=$,v[46]=el,v[47]=e):e=v[47],x=e;break t}if(b){let e;v[48]!==el?(e=(0,s.jsx)(nM,{currentRelease:el}),v[48]=el,v[49]=e):e=v[49],x=e;break t}v[50]!==el?(i=(0,m.sBy)(el),v[50]=el,v[51]=i):i=v[51];let y=i,j=A?.version&&(0,m.YW1)(A?.version);if(z?._id&&(0,m._Sr)(z._id)!==es&&D&&!y&&!1===(0,m.cX9)(A)&&!j){let e;v[52]!==g||v[53]!==el||v[54]!==R._id?(e=(0,s.jsx)(nE,{documentId:R._id,currentRelease:el,isScheduledRelease:g}),v[52]=g,v[53]=el,v[54]=R._id,v[55]=e):e=v[55],x=e;break t}let _=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:r}}}=t;return!1===i?{result:!1}:r?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:A,workspace:G,schemaType:$});if("form"===q.type&&!es&&_.result){if("DRAFT_MODEL_INACTIVE"===_.reason){let e;v[56]!==z||v[57]!==T||v[58]!==$?(e=(0,s.jsx)(nT,{displayed:z,documentId:T,schemaType:$,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),v[56]=z,v[57]=T,v[58]=$,v[59]=e):e=v[59],x=e;break t}if("LIVE_EDIT_ACTIVE"===_.reason){let e;v[60]!==z||v[61]!==T||v[62]!==$?(e=(0,s.jsx)(nT,{displayed:z,documentId:T,schemaType:$,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),v[60]=z,v[61]=T,v[62]=$,v[63]=e):e=v[63],x=e;break t}}if("form"!==q.type||Y){x=null;break t}v[64]!==L?(r=L&&(0,s.jsx)(nI,{}),v[64]=L,v[65]=r):r=v[65],v[66]!==B?.granted||v[67]!==Q?(l=!B?.granted&&(0,s.jsx)(nx,{requiredPermission:Q}),v[66]=B?.granted,v[67]=Q,v[68]=l):l=v[68],v[69]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(nR,{}),a=(0,s.jsx)(ny,{}),d=(0,s.jsx)(nr,{}),c=(0,s.jsx)(nS,{}),u=(0,s.jsx)(nt,{}),p=(0,s.jsx)(nD,{}),v[69]=o,v[70]=a,v[71]=d,v[72]=c,v[73]=u,v[74]=p):(o=v[69],a=v[70],d=v[71],c=v[72],u=v[73],p=v[74]);let w=z?._id??T;v[75]!==y||v[76]!==w?(h=(0,s.jsx)(nA,{documentId:w,isPinnedDraftOrPublished:y}),v[75]=y,v[76]=w,v[77]=h):h=v[77],v[78]!==r||v[79]!==l||v[80]!==h?(f=(0,s.jsxs)(s.Fragment,{children:[r,l,o,a,d,c,u,p,h]}),v[78]=r,v[79]=l,v[80]=h,v[81]=f):f=v[81],x=f}let eo=x;v[82]!==W?(g={documentScrollElement:W},v[82]=W,v[83]=g):g=v[83];let ea=g,ed=N.resizablePanes||!er;return v[84]!==en||v[85]!==eo||v[86]!==W||v[87]!==I||v[88]!==et||v[89]!==ei||v[90]!==H||v[91]!==ee||v[92]!==X||v[93]!==ea||v[94]!==ed?(b=ed&&(0,s.jsxs)(a.so,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,s.jsxs)(m.wG1,{zOffset:"paneHeader",children:[eo,(0,s.jsx)(nF,{})]}),(0,s.jsx)(nK,{flex:2,overflow:"hidden",children:(0,s.jsx)(a.GD,{element:X,__unstable_elements:ea,children:(0,s.jsx)(a.EZ,{element:W,children:(0,s.jsxs)(m.jsZ,{scrollElement:W,containerElement:U,children:[(0,s.jsxs)(nW,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:J,children:[(0,s.jsx)(nL,{hidden:et,margins:ee,ref:U}),en]}),ei,(0,s.jsx)("div",{"data-testid":"document-panel-portal",ref:K})]})})})}),I]}),v[84]=en,v[85]=eo,v[86]=W,v[87]=I,v[88]=et,v[89]=ei,v[90]=H,v[91]=ee,v[92]=X,v[93]=ea,v[94]=ed,v[95]=b):b=v[95],v[96]!==T||v[97]!==k||v[98]!==$||v[99]!==er?(y=er&&(0,s.jsx)(a.EZ,{element:k,children:(0,s.jsx)(tQ,{documentId:T,documentType:$.name,flex:1})}),v[96]=T,v[97]=k,v[98]=$,v[99]=er,v[100]=y):y=v[100],v[101]!==b||v[102]!==y?(j=(0,s.jsx)(tt,{children:(0,s.jsxs)(a.so,{height:"fill",children:[b,y]})}),v[101]=b,v[102]=y,v[103]=j):j=v[103],j};function nU(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}nJ.displayName="DocumentPanel";let nG=eo(nU);function nQ(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,r=[],l=0;for(let e=0;e<t.length;e+=1){let n=t[e];r.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}l+=r.length;let s=[];for(let e of i)s.find(t=>t.key===e.id)||s.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let o=[];for(let t=0;t<n.length;t+=1){let i=n[t],r=i.group&&s.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!r&&(r={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},s.push(r)),r?r.children.push({type:"item",key:`${l+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):o.push({type:"item",key:`${l+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...o,...s,...r]}let nq=!1,nX=Object.freeze({}),n0=Symbol("LOADING_PANE"),n1="documentPanelPortalElement",n2=["left","bottom"],n3={small:0,medium:1,large:2,full:"auto"};function n4(e){let t,n,i,l=(0,o.c)(16),{dialog:a,referenceElement:d}=e,{t:c}=(0,m.Bdt)(r.Z7),{cancelButtonIcon:u,cancelButtonText:p,confirmButtonIcon:h,confirmButtonText:f,message:x,onCancel:g,onConfirm:b,tone:y}=a;return l[0]!==p||l[1]!==c?(t=p||c("confirm-dialog.cancel-button.fallback-text"),l[0]=p,l[1]=c,l[2]=t):t=l[2],l[3]!==f||l[4]!==c?(n=f||c("confirm-dialog.confirm-button.fallback-text"),l[3]=f,l[4]=c,l[5]=n):n=l[5],l[6]!==u||l[7]!==h||l[8]!==x||l[9]!==g||l[10]!==b||l[11]!==d||l[12]!==t||l[13]!==n||l[14]!==y?(i=(0,s.jsx)(ea.e,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:h,confirmButtonText:n,message:x,onCancel:g,onConfirm:b,open:!0,referenceElement:d,tone:y,placement:"top",fallbackPlacements:n2}),l[6]=u,l[7]=h,l[8]=x,l[9]=g,l[10]=b,l[11]=d,l[12]=t,l[13]=n,l[14]=y,l[15]=i):i=l[15],i}function n5(e){let t,n,i,r=(0,o.c)(12),{dialog:l}=e,u=(0,c.useId)();r[0]!==l.footer?(t=l.footer&&(0,s.jsx)(a.az,{paddingX:4,paddingY:3,children:l.footer}),r[0]=l.footer,r[1]=t):t=r[1];let p=t,h=!1===l.showCloseButton,f=void 0===l.width?1:n3[l.width];return r[2]!==l.content?(n=(0,s.jsx)(a.az,{padding:4,children:l.content}),r[2]=l.content,r[3]=n):n=r[3],r[4]!==l.header||r[5]!==l.onClose||r[6]!==u||r[7]!==p||r[8]!==h||r[9]!==f||r[10]!==n?(i=(0,s.jsx)(m.wG1,{zOffset:"fullscreen",children:(0,s.jsx)(d.lG,{animate:!0,__unstable_hideCloseButton:h,footer:p,header:l.header,id:u,onClose:l.onClose,onClickOutside:l.onClose,width:f,children:n})}),r[4]=l.header,r[5]=l.onClose,r[6]=u,r[7]=p,r[8]=h,r[9]=f,r[10]=n,r[11]=i):i=r[11],i}function n6(e){let t,n,i=(0,o.c)(5),{dialog:r,referenceElement:l}=e;return i[0]!==r?(t=(0,s.jsx)(n7,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==l||i[3]!==t?(n=(0,s.jsx)(a.AM,{content:t,fallbackPlacements:n2,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:l}),i[2]=l,i[3]=t,i[4]=n):n=i[4],n}function n7(e){let t,n,i,r=(0,o.c)(6),{dialog:l}=e,{content:d,onClose:u}=l,{isTopLayer:p}=(0,a.Z4)(),m=(0,c.useRef)(null);return r[0]!==p||r[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},r[0]=p,r[1]=u,r[2]=t):t=r[2],(0,a.Pm)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],r[3]=n):n=r[3],(0,a.PR)(p&&u,n),r[4]!==d?(i=(0,s.jsx)("div",{ref:m,children:d}),r[4]=d,r[5]=i):i=r[5],i}function n8(e){let t,n=(0,o.c)(3),{children:i}=e,{element:r,elements:l}=(0,a.WP)(),d=l?.[n1]||r;return n[0]!==i||n[1]!==d?(t=(0,s.jsx)(a.GD,{element:d,children:i}),n[0]=i,n[1]=d,n[2]=t):t=n[2],t}function n9(e){let t,n,i=(0,o.c)(17),{dialog:r,referenceElement:d}=e,u=void 0===d?null:d,p=(0,c.useId)();if("confirm"===r.type){let e;return i[0]!==r||i[1]!==u?(e=(0,s.jsx)(n4,{dialog:r,referenceElement:u}),i[0]=r,i[1]=u,i[2]=e):e=i[2],e}if("popover"===r.type){let e;return i[3]!==r||i[4]!==u?(e=(0,s.jsx)(n6,{dialog:r,referenceElement:u}),i[3]=r,i[4]=u,i[5]=e):e=i[5],e}if("dialog"===r.type||!r.type){let e;return i[6]!==r?(e=(0,s.jsx)(n8,{children:(0,s.jsx)(n5,{dialog:r})}),i[6]=r,i[7]=e):e=i[7],e}if("custom"===r.type){let e,t=r?.component;return i[8]!==t?(e=(0,s.jsx)(n8,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${r.type}`),i[10]!==r.content||i[11]!==r.type?(t=r.content||(0,s.jsxs)(a.EY,{size:1,children:["Unexpected modal type (",(0,s.jsx)("code",{children:r.type}),")"]}),i[10]=r.content,i[11]=r.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==r.onClose?(n=(0,s.jsx)(l.lG,{id:p,onClose:r.onClose,onClickOutside:r.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=r.onClose,i[16]=n):n=i[16],n}let ie=(0,c.memo)(function(e){let t,n,i,r,l=(0,o.c)(9),{actionStates:a,children:d,referenceElement:u}=e,[p,h]=(0,c.useState)(-1),f=a[p];l[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},l[0]=t):t=l[0];let x=t;l[1]!==d?(n=d({handleAction:x}),l[1]=d,l[2]=n):n=l[2];let g=n;return l[3]!==f||l[4]!==u?(i=f&&f.dialog&&(0,s.jsx)(m.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(n9,{dialog:f.dialog,referenceElement:u})}),l[3]=f,l[4]=u,l[5]=i):i=l[5],l[6]!==g||l[7]!==i?(r=(0,s.jsxs)(s.Fragment,{children:[i,g]}),l[6]=g,l[7]=i,l[8]=r):r=l[8],r});function it(e){let t,n,i,d=(0,o.c)(10),{actionStates:u,disabled:p}=e,h=(0,c.useId)(),[f,x]=(0,c.useState)(null);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},d[0]=t):t=d[0];let g=t,{t:b}=(0,m.Bdt)(r.Z7);d[1]!==u||d[2]!==p||d[3]!==h||d[4]!==b?(n=e=>{let{handleAction:t}=e;return(0,s.jsx)(l.IU,{id:`${h}-action-menu`,button:(0,s.jsx)(m.VJU,{"aria-label":b("buttons.action-menu-button.aria-label"),disabled:p,"data-testid":"action-menu-button",tooltipProps:{content:b("buttons.action-menu-button.tooltip")}}),menu:(0,s.jsx)(a.W1,{padding:1,children:u.map((e,n)=>(0,s.jsx)(ii,{actionState:e,disabled:p,index:n,onAction:t},n))}),popover:g,ref:x})},d[1]=u,d[2]=p,d[3]=h,d[4]=b,d[5]=n):n=d[5];let y=n;return d[6]!==u||d[7]!==f||d[8]!==y?(i=(0,s.jsx)(ie,{actionStates:u,referenceElement:f,children:y}),d[6]=u,d[7]=f,d[8]=y,d[9]=i):i=d[9],i}function ii(e){let t,n,i,r,a=(0,o.c)(18),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(n=d.shortcut?String(d.shortcut).split("+").map(ir):void 0,a[4]=d.shortcut,a[5]=n):n=a[5];let f=n,x=`action-${d.label.replace(" ","")}`,g=c||!!d.disabled;return a[6]!==d.disabled||a[7]!==d.title?(i=d.disabled&&{tooltipProps:{content:d.title}},a[6]=d.disabled,a[7]=d.title,a[8]=i):i=a[8],a[9]!==d.icon||a[10]!==d.label||a[11]!==d.tone||a[12]!==h||a[13]!==f||a[14]!==x||a[15]!==g||a[16]!==i?(r=(0,s.jsx)(l.Dr,{"data-testid":x,disabled:g,hotkeys:f,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...i}),a[9]=d.icon,a[10]=d.label,a[11]=d.tone,a[12]=h,a[13]=f,a[14]=x,a[15]=g,a[16]=i,a[17]=r):r=a[17],r}function ir(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let il={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},is=e=>{let t,n,i,l,a,d=(0,o.c)(36),{id:u,type:h,draft:f,onComplete:x,release:g}=e,{setIsDeleting:b}=tM(),{delete:y}=(0,m.QSs)(u,h,g),[j,v]=(0,c.useState)(!1),[_,w]=(0,c.useState)(!1),{t:S}=(0,m.Bdt)(r.Z7);d[0]!==x?(t=()=>{w(!1),x()},d[0]=x,d[1]=t):t=d[1];let k=t;d[2]!==y||d[3]!==x||d[4]!==b?(n=()=>{v(!0),w(!1),b(!0),y.execute(),x()},d[2]=y,d[3]=x,d[4]=b,d[5]=n):n=d[5];let C=n;d[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{w(!0)},d[6]=i):i=d[6];let I=i;d[7]!==u||d[8]!==g||d[9]!==h?(l={id:u,type:h,version:g,permission:"delete"},d[7]=u,d[8]=g,d[9]=h,d[10]=l):l=d[10];let[E,z]=(0,m.LyQ)(l),T=(0,m.iZK)();e:{let e,t,n,i;if(!z&&!E?.granted){let e,t,n;d[11]!==S?(e=S("action.delete.label"),d[11]=S,d[12]=e):e=d[12],d[13]!==T?(t=(0,s.jsx)(m.TLO,{context:"delete-document",currentUser:T}),d[13]=T,d[14]=t):t=d[14],d[15]!==e||d[16]!==t?(n={tone:"critical",icon:p.ucK,disabled:!0,label:e,title:t},d[15]=e,d[16]=t,d[17]=n):n=d[17],a=n;break e}let r=j||!!y.disabled||z;d[18]!==y.disabled||d[19]!==S?(e=y.disabled&&S(il[y.disabled])||"",d[18]=y.disabled,d[19]=S,d[20]=e):e=d[20],d[21]!==j||d[22]!==S?(t=S(j?"action.delete.running.label":"action.delete.label"),d[21]=j,d[22]=S,d[23]=t):t=d[23],d[24]!==f?._id||d[25]!==k||d[26]!==C||d[27]!==u||d[28]!==_||d[29]!==h?(n=_&&{type:"custom",component:(0,s.jsx)(lI,{action:"delete",id:f?._id||u,type:h,onCancel:k,onConfirm:C})},d[24]=f?._id,d[25]=k,d[26]=C,d[27]=u,d[28]=_,d[29]=h,d[30]=n):n=d[30],d[31]!==r||d[32]!==e||d[33]!==t||d[34]!==n?(i={tone:"critical",icon:p.ucK,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:I,dialog:n},d[31]=r,d[32]=e,d[33]=t,d[34]=n,d[35]=i):i=d[35],a=i}return a};is.action="delete",is.displayName="DeleteAction";let io={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},ia=({id:e,type:t,published:n,liveEdit:i,onComplete:l,release:o})=>{let{discardChanges:a}=(0,m.QSs)(e,t,o),[d,u]=(0,c.useState)(!1),[h,f]=(0,m.LyQ)({id:e,type:t,version:o,permission:"discardDraft"}),x=(0,m.iZK)(),{displayed:g}=tM(),{t:b}=(0,m.Bdt)(r.Z7),y=g?._id&&(0,m._4P)(g?._id),j=(0,c.useCallback)(()=>{a.execute(),l()},[a,l]),v=(0,c.useCallback)(()=>{u(!0)},[]),_=(0,c.useMemo)(()=>d&&{type:"confirm",tone:"critical",onCancel:l,onConfirm:j,message:b("action.discard-changes.confirm-dialog.confirm-discard-changes")},[j,d,l,b]);return(0,c.useMemo)(()=>!n||i||y?null:f||h?.granted?{tone:"critical",icon:p.NAP,disabled:!!a.disabled||f,title:b(a.disabled&&io[a.disabled]||""),label:b("action.discard-changes.label"),onHandle:v,dialog:_}:{tone:"critical",icon:p.NAP,disabled:!0,label:b("action.discard-changes.label"),title:(0,s.jsx)(m.TLO,{context:"discard-changes",currentUser:x})},[x,_,a.disabled,v,f,y,i,h?.granted,n,b])};ia.action="discardChanges",ia.displayName="DiscardChangesAction";let id={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},ic=({id:e,type:t,onComplete:n,release:i,mapDocument:l})=>{let o=(0,m.q3J)(),{duplicate:a}=(0,m.QSs)(e,t,i),{navigateIntent:d}=(0,v.rd)(),[u,h]=(0,c.useState)(!1),[x,g]=(0,m.LyQ)({id:e,type:t,version:i,permission:"duplicate"}),{t:b}=(0,m.Bdt)(r.Z7),y=(0,m.iZK)(),j=(0,c.useCallback)(async()=>{let i=(0,f.A)();h(!0);let r=(0,K._)(o.pair.operationEvents(e,t).pipe((0,B.p)(e=>"duplicate"===e.op&&"success"===e.type)));a.execute(i,{mapDocument:l}),await r,d("edit",{id:i,type:t}),n()},[o.pair,a,e,l,d,n,t]);return(0,c.useMemo)(()=>g||x?.granted?{icon:p.TdU,disabled:u||!!a.disabled||g,label:b(u?"action.duplicate.running.label":"action.duplicate.label"),title:a.disabled?b(id[a.disabled]):"",onHandle:j}:{icon:p.TdU,disabled:!0,label:b("action.duplicate.label"),title:(0,s.jsx)(m.TLO,{context:"duplicate-document",currentUser:y})},[y,a.disabled,j,u,g,x?.granted,b])};ic.action="duplicate",ic.displayName="DuplicateAction";let iu=e=>{let t,n,i,l,s,a,d=(0,o.c)(27),{id:u,type:h,revision:f,onComplete:x,release:g}=e,{restore:b}=(0,m.QSs)(u,h,g),{revisionNotFound:y}=tM(),j=(0,m.cUp)(u,h),{navigateIntent:_}=(0,v.rd)(),w=(0,c.useRef)(j),[S,k]=(0,c.useState)(!1),{t:C}=(0,m.Bdt)(r.Z7);d[0]!==x||d[1]!==b||d[2]!==f?(t=()=>{b.execute(f),x()},d[0]=x,d[1]=b,d[2]=f,d[3]=t):t=d[3];let I=t;d[4]!==j||d[5]!==u||d[6]!==_||d[7]!==h?(n=()=>{j&&j!==w.current&&("success"===j.type&&"restore"===j.op&&_("edit",{id:u,type:h}),w.current=j)},i=[j,u,_,h],d[4]=j,d[5]=u,d[6]=_,d[7]=h,d[8]=n,d[9]=i):(n=d[8],i=d[9]),(0,c.useEffect)(n,i),d[10]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{k(!0)},d[10]=l):l=d[10];let E=l;e:{if(S){let e,t;d[11]!==C?(e=C("action.restore.confirm.message"),d[11]=C,d[12]=e):e=d[12],d[13]!==I||d[14]!==x||d[15]!==e?(t={type:"confirm",tone:"critical",onCancel:x,onConfirm:I,message:e},d[13]=I,d[14]=x,d[15]=e,d[16]=t):t=d[16],s=t;break e}s=null}let z=s,T="@initial"===f,A=void 0===f;t:{let e,t,n;if(A||y){a=null;break t}d[17]!==C?(e=C("action.restore.label"),d[17]=C,d[18]=e):e=d[18];let i=T?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";d[19]!==C||d[20]!==i?(t=C(i),d[19]=C,d[20]=i,d[21]=t):t=d[21],d[22]!==z||d[23]!==T||d[24]!==e||d[25]!==t?(n={label:e,tone:"caution",onHandle:E,title:t,icon:p.AAk,dialog:z,disabled:T},d[22]=z,d[23]=T,d[24]=e,d[25]=t,d[26]=n):n=d[26],a=n}return a};iu.action="restore",iu.displayName="HistoryRestoreAction";let ip=(0,ep.g_)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),im={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},ih={status:"published"};function ix(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,s.jsx)(ig,{publishedAt:t}):n(im[e])}function ig(e){let t,n,i,l=(0,o.c)(6),{publishedAt:a}=e,{t:d}=(0,m.Bdt)(r.Z7);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,m.Vq9)(a,t);return l[1]!==d||l[2]!==c?(n=d("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=d,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,s.jsx)("span",{children:n}),l[4]=n,l[5]=i):i=l[5],i}let ib=e=>{let t,n,i,l,a,d,u,f,x,g,b,y=(0,o.c)(79),{id:j,type:v,liveEdit:_,draft:w,published:S,release:k}=e,[C,I]=(0,c.useState)(null),{publish:E}=(0,m.QSs)(j,v),z=(0,m.dWw)(j,v),T=(0,m.M7h)(j,v),{changesOpen:A,documentId:P,documentType:R,value:M}=tM(),D=(0,m.zX2)(P,R),{t:$}=(0,m.Bdt)(r.Z7);y[0]!==D?.draft||y[1]!==D?.published?(t=D?.draft||D?.published||{},y[0]=D?.draft,y[1]=D?.published,y[2]=t):t=y[2];let B=t._rev;y[3]!==z.validation?(n=z.validation.some(h.Uw),y[3]=z.validation,y[4]=n):n=y[4];let Y=n,[L,O]=(0,c.useState)(!1),H=T.isSyncing,V=z.isValidating;y[5]!==j||y[6]!==v?(i={id:j,type:v,permission:"publish"},y[5]=j,y[6]=v,y[7]=i):i=y[7];let[Z,N]=(0,m.LyQ)(i),F=(0,m.iZK)();y[8]!==Y||y[9]!==E.disabled||y[10]!==S||y[11]!==$?(l=E.disabled?ix(E.disabled,(S||{})._updatedAt,$)||"":Y?$("action.publish.validation-issues.tooltip"):"",y[8]=Y,y[9]=E.disabled,y[10]=S,y[11]=$,y[12]=l):l=y[12];let K=l,W=S?._rev;y[13]!==W||y[14]!==E?(a=()=>{E.execute(),I({status:"publishing",publishRevision:W})},y[13]=W,y[14]=E,y[15]=a):a=y[15];let J=a;y[16]!==J||y[17]!==Y||y[18]!==H||y[19]!==L||y[20]!==B||y[21]!==z.isValidating||y[22]!==z.revision?(d=()=>{let e=!1===z.isValidating&&z.revision!==B;L&&!H&&e&&(Y||J(),O(!1))},y[16]=J,y[17]=Y,y[18]=H,y[19]=L,y[20]=B,y[21]=z.isValidating,y[22]=z.revision,y[23]=d):d=y[23],y[24]!==J||y[25]!==Y||y[26]!==H||y[27]!==V||y[28]!==L||y[29]!==B||y[30]!==z.isValidating||y[31]!==z.revision?(u=[H,J,Y,L,z.revision,B,V,z.isValidating],y[24]=J,y[25]=Y,y[26]=H,y[27]=V,y[28]=L,y[29]=B,y[30]=z.isValidating,y[31]=z.revision,y[32]=u):u=y[32],(0,c.useEffect)(d,u),y[33]!==W||y[34]!==C?(f=()=>{let e=C?.status==="publishing"&&W!==C.publishRevision,t=e?ih:null,n=setTimeout(()=>{I(t)},e?200:4e3);return()=>clearTimeout(n)},y[33]=W,y[34]=C,y[35]=f):f=y[35],y[36]!==A||y[37]!==W||y[38]!==C?(x=[A,C,W],y[36]=A,y[37]=W,y[38]=C,y[39]=x):x=y[39],(0,c.useEffect)(f,x);let U=(0,ed.Jr)();y[40]!==J||y[41]!==w?._createdAt||y[42]!==S||y[43]!==B||y[44]!==T.isSyncing||y[45]!==U||y[46]!==z.isValidating||y[47]!==z.revision?(g=()=>{U.log(ip,{publishedImmediately:!w?._createdAt,previouslyPublished:!!S}),T.isSyncing||z.isValidating||z.revision!==B?O(!0):J()},y[40]=J,y[41]=w?._createdAt,y[42]=S,y[43]=B,y[44]=T.isSyncing,y[45]=U,y[46]=z.isValidating,y[47]=z.revision,y[48]=g):g=y[48];let G=g;e:{let e,t,n;if(k||_){b=null;break e}if((0,m._4P)(M._id)&&null!==w){let e,t,n;y[49]!==$?(e=$("action.publish.label"),y[49]=$,y[50]=e):e=y[50];let i=S?._updatedAt;y[51]!==$||y[52]!==i?(t=ix("ALREADY_PUBLISHED",i,$),y[51]=$,y[52]=i,y[53]=t):t=y[53],y[54]!==e||y[55]!==t?(n={tone:"default",icon:p.VQ$,label:e,title:t,disabled:!0},y[54]=e,y[55]=t,y[56]=n):n=y[56],b=n;break e}if(!N&&!Z?.granted){let e,t,n;y[57]!==$?(e=$("action.publish.label"),y[57]=$,y[58]=e):e=y[58],y[59]!==F?(t=(0,s.jsx)(m.TLO,{context:"publish-document",currentUser:F}),y[59]=F,y[60]=t):t=y[60],y[61]!==e||y[62]!==t?(n={tone:"default",icon:p.VQ$,label:e,title:t,disabled:!0},y[61]=e,y[62]=t,y[63]=n):n=y[63],b=n;break e}let i=!!(L||D?.transactionSyncLock?.enabled||C?.status==="publishing"||C?.status==="published"||Y||E.disabled),r=i||N;y[64]!==L||y[65]!==C?.status||y[66]!==$?(e=$(C?.status==="published"?"action.publish.published.label":L||C?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),y[64]=L,y[65]=C?.status,y[66]=$,y[67]=e):e=y[67],y[68]!==L||y[69]!==C?.status||y[70]!==$||y[71]!==K?(t=L?$("action.publish.waiting"):C?.status==="published"||C?.status==="publishing"?null:K,y[68]=L,y[69]=C?.status,y[70]=$,y[71]=K,y[72]=t):t=y[72];let l=i||L?null:"Ctrl+Alt+P";y[73]!==G||y[74]!==r||y[75]!==e||y[76]!==t||y[77]!==l?(n={disabled:r,tone:"default",label:e,icon:p.VQ$,title:t,shortcut:l,onHandle:G},y[73]=G,y[74]=r,y[75]=e,y[76]=t,y[77]=l,y[78]=n):n=y[78],b=n}return b};ib.action="publish",ib.displayName="PublishAction";let iy={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},ij=({id:e,type:t,draft:n,onComplete:i,liveEdit:l,release:o})=>{let{unpublish:a}=(0,m.QSs)(e,t),[d,u]=(0,c.useState)(!1),[h,f]=(0,m.LyQ)({id:e,type:t,permission:"unpublish"}),x=(0,m.iZK)(),{t:g}=(0,m.Bdt)(r.Z7),{selectedPerspective:b}=(0,m.QO2)(),y="drafts"===b,j=(0,c.useCallback)(()=>{u(!1),i()},[i]),v=(0,c.useCallback)(()=>{u(!1),a.execute(),i()},[i,a]),_=(0,c.useMemo)(()=>d?{type:"dialog",onClose:i,content:(0,s.jsx)(lI,{id:n?._id||e,type:t,action:"unpublish",onCancel:j,onConfirm:v})}:null,[n,e,j,v,d,i,t]);return(0,c.useMemo)(()=>o||y||l?null:f||h?.granted?{tone:"critical",icon:p.wvk,disabled:!!a.disabled||f,label:g("action.unpublish.label"),title:a.disabled?g(iy[a.disabled]):"",onHandle:()=>u(!0),dialog:_}:{tone:"critical",icon:p.wvk,label:"Unpublish",title:(0,s.jsx)(m.TLO,{context:"unpublish-document",currentUser:x}),disabled:!0},[o,y,l,f,h?.granted,a.disabled,g,_,x])};ij.action="unpublish",ij.displayName="UnpublishAction";let iv=(0,c.memo)(function(e){let t,n,i,r,d,u,p,h,f,x=(0,o.c)(37),{disabled:g,states:b}=e,{__internal_tasks:y}=(0,m.For)(),{editState:j}=tM(),{params:v}=tB(),_=!!v?.rev,{selectedReleaseId:w}=(0,m.QO2)();x[0]!==b?([t,...n]=b,x[0]=b,x[1]=t,x[2]=n):(t=x[1],n=x[2]);let[S,k]=(0,c.useState)(null);e:{let e,n,r,o;if(!t||!t.title&&!t.shortcut){i=null;break e}x[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},x[3]=e):e=x[3],x[4]!==t.title?(n=t.title&&(0,s.jsx)(a.EY,{size:1,children:t.title}),x[4]=t.title,x[5]=n):n=x[5],x[6]!==t.shortcut?(r=t.shortcut&&(0,s.jsx)(l.qW,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ik)}),x[6]=t.shortcut,x[7]=r):r=x[7],x[8]!==n||x[9]!==r?(o=(0,s.jsxs)(a.so,{style:e,align:"center",gap:3,children:[n,r]}),x[8]=n,x[9]=r,x[10]=o):o=x[10],i=o}let C=i;x[11]!==j?.liveEdit||x[12]!==t||x[13]!==w||x[14]!==_?(r=_?!!t:w?t&&!(0,m.UYh)(t):t&&!j?.liveEdit,x[11]=j?.liveEdit,x[12]=t,x[13]=w,x[14]=_,x[15]=r):r=x[15];let I=r;x[16]!==t||x[17]!==n||x[18]!==I?(d=I?n:[t,...n],x[16]=t,x[17]=n,x[18]=I,x[19]=d):d=x[19];let E=d,z=y&&y.footerAction;return x[20]!==g||x[21]!==t||x[22]!==I||x[23]!==C?(u=I&&(0,s.jsx)(a.XS,{zOffset:200,children:(0,s.jsx)(l.m_,{disabled:!C,content:C,placement:"top",children:(0,s.jsx)(a.BJ,{children:(0,s.jsx)(l.$n,{"data-testid":`action-${tn(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:k,text:t.label,tone:t.tone||"primary"})})})}),x[20]=g,x[21]=t,x[22]=I,x[23]=C,x[24]=u):u=x[24],x[25]!==g||x[26]!==E?(p=E.length>0&&(0,s.jsx)(it,{actionStates:E,disabled:g}),x[25]=g,x[26]=E,x[27]=p):p=x[27],x[28]!==S||x[29]!==t||x[30]!==I?(h=I&&t&&t.dialog&&(0,s.jsx)(n9,{dialog:t.dialog,referenceElement:S}),x[28]=S,x[29]=t,x[30]=I,x[31]=h):h=x[31],x[32]!==z||x[33]!==u||x[34]!==p||x[35]!==h?(f=(0,s.jsxs)(a.so,{align:"center",gap:1,children:[z,u,p,h]}),x[32]=z,x[33]=u,x[34]=p,x[35]=h,x[36]=f):f=x[36],f}),i_=(0,c.memo)(function(){let e,t,n,i,r,l=(0,o.c)(14),{actions:a,connectionState:d,documentId:c,editState:u,isInitialValueLoading:p}=tM();l[0]!==a?(e=a??[],l[0]=a,l[1]=e):e=l[1],l[2]!==e?(t=e.filter(iC),l[2]=e,l[3]=t):t=l[3];let m=t;l[4]!==u||l[5]!==p?(n=u?{...u,initialValueResolved:!p}:null,l[4]=u,l[5]=p,l[6]=n):n=l[6];let h=n;l[7]!==d||l[8]!==c?(i=e=>{let{states:t}=e;return(0,s.jsx)(iv,{disabled:"connected"!==d,states:t},c)},l[7]=d,l[8]=c,l[9]=i):i=l[9];let f=i;return 0!==m.length&&h?(l[10]!==h||l[11]!==m||l[12]!==f?(r=(0,s.jsx)(lV,{actions:m,actionProps:h,group:"default",children:f}),l[10]=h,l[11]=m,l[12]=f,l[13]=r):r=l[13],r):null}),iw=(0,c.memo)(function(){let e,t,n,i,r=(0,o.c)(13),{actions:l,connectionState:a,editState:d,revisionId:c,isInitialValueLoading:u}=tM(),p=(d?.draft||d?.published||{})._rev===c;r[0]!==d||r[1]!==u||r[2]!==c?(e=d?{...d,revision:c||void 0,initialValueResolved:!u}:null,r[0]=d,r[1]=u,r[2]=c,r[3]=e):e=r[3];let m=e;r[4]!==l?(t=(l??[]).filter(iS).slice(-1),r[4]=l,r[5]=t):t=r[5];let h=t;r[6]!==a||r[7]!==p?(n=e=>{let{states:t}=e;return(0,s.jsx)(iv,{disabled:"connected"!==a||!!p,states:t})},r[6]=a,r[7]=p,r[8]=n):n=r[8];let f=n;return m?(r[9]!==m||r[10]!==h||r[11]!==f?(i=(0,s.jsx)(lV,{actions:h,actionProps:m,group:"default",children:f}),r[9]=m,r[10]=h,r[11]=f,r[12]=i):i=r[12],i):null});function iS(e){return e.action===iu.action}function ik(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function iC(e){return!iS(e)}let iI=e=>{let t=(0,o.c)(16),{release:n}=e,{t:i}=(0,m.Bdt)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,s.jsx)(a.EY,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,s.jsx)(a.EY,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,r="active"===n.state;return t[8]!==r||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,s.jsx)(a.EY,{size:1,children:r?(0,s.jsx)(m.HTc,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,m.drb)(n)}}):(0,s.jsx)(m.HTc,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,m.drb)(n)}})}),t[8]=r,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,s.jsx)(a.EY,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},iE={dateStyle:"medium",timeStyle:"short"},iz=(0,c.memo)(function(){let{selectedReleaseId:e,selectedPerspectiveName:t}=(0,m.QO2)(),{t:n}=(0,m.Bdt)(),i=(0,m._T7)(),{params:r,setParams:l}=tB(),o=(0,m.ixk)(iE),{loading:d}=(0,m.K0D)(),u=(0,m.I07)(),{editState:p,displayed:h,documentType:f,documentId:x}=tM(),g=h&&!h._createdAt,b=tY({displayed:h,documentId:x}),y=(0,m.Jr6)({documentId:x}),j=(0,m.hA9)(),v=(0,c.useCallback)(e=>()=>{"published"===e&&r?.historyVersion&&l({...r,rev:r?.historyEvent||void 0,since:void 0,historyVersion:void 0}),i(e)},[i,l,r]),_=u.get(f),w=!!_&&!0===_.liveEdit,S=(0,c.useMemo)(()=>(!w||!!e)&&!p?.published,[w,e,p?.published]),k=(0,c.useCallback)(e=>{if(!r?.historyVersion){let t=p?.version&&(0,m.YW1)(p?.version)&&(0,m._hI)(e._id)===(0,m._Sr)(p?.version?._id);return{selected:!!((0,m._hI)(e._id)===(0,m._Sr)(h?._id||"")||t)}}let t=(0,m._hI)(e._id)===r.historyVersion;return{selected:t,disabled:t}},[h?._id,p?.version,r?.historyVersion]),C=(0,c.useMemo)(()=>!!(w&&!p?.draft?._id&&!e||(0,m._4P)(h?._id||"")&&(0,m.xo4)(t||"")),[h?._id,p?.draft?._id,w,t,e]),I=(0,c.useMemo)(()=>{let e=h?._id||"";return!(C||r?.historyVersion||t||(0,m.A_X)(e))&&(!!(0,m.R8D)(e)||!((0,m._4P)(e)&&p?.published&&(0,m.xo4)(t||"")))},[h?._id,p?.published,C,r?.historyVersion,t]),E=(0,c.useMemo)(()=>!!y||!!g&&!!e||(!!p?.draft||!!w)&&!!(g&&e||w),[p?.draft,g,w,y,e]),z=j.document.drafts?.enabled;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.FCT,{tooltipContent:(0,s.jsx)(a.EY,{size:1,children:p?.published&&p?.published?._updatedAt?(0,s.jsx)(m.HTc,{t:n,i18nKey:"release.chip.tooltip.published-date",values:{date:o.format(new Date(p?.published._updatedAt))}}):(0,s.jsx)(s.Fragment,{children:n("release.chip.tooltip.not-published")})}),disabled:S,onClick:v("published"),selected:C,text:n("release.chip.published"),tone:"positive",contextValues:{documentId:p?.published?._id||p?.id||"",menuReleaseId:p?.published?._id||p?.id||"",releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:"published",isVersion:!1,disabled:!p?.published}}),z&&(0,s.jsx)(m.FCT,{tooltipContent:(0,s.jsx)(a.EY,{size:1,children:p?.draft?(0,s.jsx)(s.Fragment,{children:p?.draft._updatedAt?(0,s.jsx)(m.HTc,{t:n,i18nKey:"release.chip.tooltip.edited-date",values:{date:o.format(new Date(p?.draft._updatedAt))}}):(0,s.jsx)(m.HTc,{t:n,i18nKey:"release.chip.tooltip.created-date",values:{date:o.format(new Date(p?.draft._createdAt))}})}):(0,s.jsx)(s.Fragment,{children:n(w?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:I,disabled:E,text:n("release.chip.draft"),tone:p?.draft?"caution":"neutral",onClick:v("drafts"),contextValues:{documentId:p?.draft?._id||p?.published?._id||p?.id||"",menuReleaseId:p?.draft?._id||p?.published?._id||p?.id||"",releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:"draft",isVersion:!1}}),b.inCreation&&(0,s.jsx)(m.FCT,{tooltipContent:(0,s.jsx)(iI,{release:b.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,m.Y73)(b.inCreation),text:b.inCreation.metadata.title||n("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:h?._id||"",menuReleaseId:b.inCreation._id,releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:(0,m._hI)(b.inCreation._id),releaseState:b.inCreation.state,isVersion:!0}}),h&&b.currentReleases?.map(e=>(0,s.jsx)(m.FCT,{tooltipContent:(0,s.jsx)(iI,{release:e}),...k(e),onClick:v((0,m._hI)(e._id)),text:e.metadata.title||n("release.placeholder-untitled-release"),tone:(0,m.Y73)(e),locked:(0,m.KJ$)(e),contextValues:{documentId:h?._id||"",menuReleaseId:e._id,releases:b.notCurrentReleases,releasesLoading:d,documentType:f,fromRelease:(0,m._hI)(e._id),releaseState:e.state,isVersion:!0,isGoingToUnpublish:!!p?.version&&(0,m.YW1)(p?.version)}},e._id))]})}),iT=(0,x.I4)(a.Zp)(e=>{let t=(0,eS.JW)(e.theme);return(0,x.AH)`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&(0,x.AH)`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,eS.B3)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),iA=(0,c.memo)((0,c.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:d,onMenuAction:u,isInitialValueLoading:h,onPaneClose:f,onPaneSplit:x,menuItemGroups:g,schemaType:b,connectionState:y,views:j,unstable_languageFilter:v}=tM(),{features:_}=tO(),{index:w,BackLink:S,hasGroupSiblings:k}=tB(),{actions:C}=(0,m.vM8)(),[I,E]=(0,c.useState)(null),z=(0,c.useRef)(null),T=function(e){let t,n,i=(0,o.c)(3),[r,l]=(0,c.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void l(!1);let{scrollLeft:r}=t;l(!(r+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&l(!t.isIntersecting)}),r=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};r();let s=new MutationObserver(()=>{r(),t()});return s.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:s}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,c.useEffect)(t,n),r}(z),A=(0,c.useMemo)(()=>(i??[]).filter(e=>!iS(e)),[i]),P=(0,c.useMemo)(()=>nQ({actionHandler:u,fieldActions:C,menuItems:n,menuItemGroups:g}),[u,C,g,n]),R=(0,c.useMemo)(()=>P.filter(nU),[P]),M=(0,c.useMemo)(()=>P.filter(nG),[P]),{collapsed:D,isLast:$}=te(),B=_.splitViews&&x&&j.length>1,Y=B&&k,L=_.backButton&&w>0,O=!Y&&!L&&!!S,{t:H}=(0,m.Bdt)(r.Z7),V=(0,c.useCallback)(({states:e})=>(0,s.jsx)(iP,{contextMenuNodes:M,setReferenceElement:E,referenceElement:I,states:e}),[M,I]),Z=(0,c.useMemo)(()=>(0,s.jsx)(nZ,{}),[]),N=(0,c.useMemo)(()=>L&&(0,s.jsx)(l.$n,{as:S,"data-as":"a",icon:p.A60,mode:"bleed",tooltipProps:{content:H("pane-header.back-button.text")}}),[S,L,H]),F=(0,c.useMemo)(()=>(0,s.jsxs)(a.so,{align:"center",gap:1,children:[v.length>0&&(0,s.jsx)(s.Fragment,{children:v.map((e,t)=>(0,s.jsx)(e,{schemaType:b},`language-filter-${t}`))}),R.map(e=>(0,s.jsx)(tv,{node:e},e.key)),d&&(0,s.jsx)(lV,{actions:A,actionProps:{...d,initialValueResolved:!h},group:"paneActions",children:V}),B&&(0,s.jsx)(l.$n,{"aria-label":H("buttons.split-pane-button.aria-label"),icon:p.CwM,mode:"bleed",onClick:x,tooltipProps:{content:H("buttons.split-pane-button.tooltip")}},"split-pane-button"),Y&&(0,s.jsx)(l.$n,{icon:p.USm,mode:"bleed",onClick:f,tooltipProps:{content:H("buttons.split-pane-close-button.title")}},"close-view-button"),O&&(0,s.jsx)(l.$n,{icon:p.USm,mode:"bleed",tooltipProps:{content:H("buttons.split-pane-close-group-button.title")},as:S},"close-view-button")]}),[S,A,d,h,R,f,x,V,b,O,B,Y,H,v]);return(0,s.jsx)(l.vE,{children:D?(0,s.jsx)(ty,{border:!0,ref:t,loading:"connecting"===y&&!d?.draft&&!d?.published,title:Z,tabIndex:$&&!D?-1:0,backButton:N}):(0,s.jsx)(a.Zp,{hidden:D,style:{lineHeight:0},borderBottom:!0,children:(0,s.jsxs)(a.so,{gap:3,paddingY:3,children:[(0,s.jsx)(iT,{$showGradient:T,children:(0,s.jsx)(a.so,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:z,children:(0,s.jsx)(iz,{})})}),(0,s.jsx)(a.az,{flex:"none",paddingRight:3,children:F})]})})})})),iP=(0,c.memo)(function(e){let t,n=(0,o.c)(5),{setReferenceElement:i,referenceElement:r,contextMenuNodes:l}=e,a=(0,c.useDeferredValue)(e.states);return n[0]!==l||n[1]!==r||n[2]!==i||n[3]!==a?(t=(0,s.jsx)(iR,{setReferenceElement:i,referenceElement:r,contextMenuNodes:l,states:a}),n[0]=l,n[1]=r,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),iR=(0,c.memo)(function(e){let t,n,i=(0,o.c)(8),{states:r,setReferenceElement:l,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==l||i[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,s.jsx)("div",{ref:l,children:(0,s.jsx)(tc,{nodes:a,actionsNodes:r.length>0?r.map((e,n)=>(0,s.jsx)(ii,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=l,i[2]=r,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==r?(n=(0,s.jsx)(ie,{actionStates:r,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=r,i[7]=n):n=i[7],n});function iM(e){let t,n,i=(0,o.c)(3),{size:r}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==r?(n=(0,s.jsx)(l.$n,{"aria-hidden":!0,disabled:!0,size:r,style:t,text:"-"}),i[1]=r,i[2]=n):n=i[2],n}let iD={primary:"primary",success:"positive",warning:"caution",danger:"critical"},i$=(0,c.memo)(function(e){let t,n,i=(0,o.c)(4),{states:r}=e;return 0===r.length?null:(i[0]!==r?(t=r.map(iO),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(a.cV,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),iB=(0,c.memo)(function(e){let t,n=(0,o.c)(2),i=(0,c.useDeferredValue)(e.states);return n[0]!==i?(t=(0,s.jsx)(i$,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function iY(){let e,t=(0,o.c)(3),{badges:n,editState:i}=tM();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,s.jsx)(lF,{badges:n,badgeProps:i,children:iL}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function iL(e){let{states:t}=e;return(0,s.jsx)(iB,{states:t})}function iO(e,t){return(0,s.jsx)(l.m_,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,s.jsx)(a.Ex,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?iD[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let iH={create:p.REV,delete:p.ucK,discardDraft:p.USm,initial:p.REV,editDraft:p.qUP,editLive:p.qUP,publish:p.VQ$,unpublish:p.wvk},iV=(0,x.I4)(p.YJP)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function iZ(e){let t,n,i,a,d,c=(0,o.c)(14),{isExpanded:u,onExpand:p}=e,{t:h}=(0,m.Bdt)(r.Z7);c[0]!==u||c[1]!==p?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(i5);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(u),p()},c[0]=u,c[1]=p,c[2]=t):t=c[2];let f=t;return c[3]!==u?(n=(0,s.jsx)(iV,{"data-expanded":u}),c[3]=u,c[4]=n):n=c[4],c[5]!==u||c[6]!==h?(i=h(u?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),c[5]=u,c[6]=h,c[7]=i):i=c[7],c[8]!==i?(a={content:i},c[8]=i,c[9]=a):a=c[9],c[10]!==f||c[11]!==n||c[12]!==a?(d=(0,s.jsx)(l.$n,{mode:"bleed",icon:n,tooltipProps:a,onClick:f}),c[10]=f,c[11]=n,c[12]=a,c[13]=d):d=c[13],d}let iN=(0,x.I4)(a.BJ)`
  max-width: 200px;
`,iF=(0,x.I4)(a.so)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,iK=(0,x.I4)(a.az)(({$visible:e})=>(0,x.AH)`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&(0,x.AH)`
      opacity: 1;
      pointer-events: auto;
    `}
  `),iW={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function iJ(e){let t,n,i=(0,o.c)(9),{maxLength:r,userIds:l,size:d,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==l||i[1]!==u){let e;i[3]!==u?(e=e=>(0,s.jsx)(m.H8m,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=l.map(e),i[0]=l,i[1]=u,i[2]=t}else t=i[2];return i[5]!==r||i[6]!==d||i[7]!==t?(n=(0,s.jsx)(a.GE,{maxLength:r,size:d,children:t}),i[5]=r,i[6]=d,i[7]=t,i[8]=n):n=i[8],n}let iU=(0,x.I4)(a.so)(e=>{let t=(0,eS.JW)(e.theme),n=e.$color;return(0,x.AH)`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),iG={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},iQ={minimal:!0,useTemporalPhrase:!0},iq=(0,x.I4)(d.EA)(e=>{let t=(0,eS.JW)(e.theme);return(0,x.AH)`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),iX=e=>{let t,n,i,r=(0,o.c)(10),{userId:l}=e,[d,c]=(0,m.Jd3)(l);return r[0]!==c||r[1]!==d?(t=(0,s.jsx)(a.az,{children:c||!d?(0,s.jsx)(m.LIN,{animated:!0}):(0,s.jsx)(m.H8m,{user:d})}),r[0]=c,r[1]=d,r[2]=t):t=r[2],r[3]!==c||r[4]!==d?(n=(0,s.jsx)(a.az,{children:c||!d?.displayName?(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(iq,{animated:!0})}):(0,s.jsx)(a.EY,{muted:!0,size:1,children:d.displayName})}),r[3]=c,r[4]=d,r[5]=n):n=r[5],r[6]!==t||r[7]!==n||r[8]!==l?(i=(0,s.jsxs)(a.so,{align:"center",gap:2,padding:1,children:[t,n]},l),r[6]=t,r[7]=n,r[8]=l,r[9]=i):i=r[9],i},i0=e=>{let t,n,i,r,l=(0,o.c)(9),{collaborators:d}=e,{t:c}=(0,m.Bdt)("studio");return l[0]!==c?(t=c("timeline.changes.title"),l[0]=c,l[1]=t):t=l[1],l[2]!==t?(n=(0,s.jsx)(a.az,{padding:1,paddingBottom:2,children:(0,s.jsx)(a.EY,{size:1,weight:"medium",children:t})}),l[2]=t,l[3]=n):n=l[3],l[4]!==d?(i=d.map(i2),l[4]=d,l[5]=i):i=l[5],l[6]!==n||l[7]!==i?(r=(0,s.jsxs)(a.BJ,{paddingBottom:1,children:[n,i]}),l[6]=n,l[7]=i,l[8]=r):r=l[8],r};function i1(e){let t,n,i,r,d,c,u,p,h,f,x,g,b,y,j,v,_,w,S,k,C,I=(0,o.c)(55),{chunk:E,isSelected:z,onSelect:T,collaborators:A,optionsMenu:P}=e,{t:R}=(0,m.Bdt)("studio"),{type:M,endTimestamp:D}=E;I[0]!==M?(t=iH[M],I[0]=M,I[1]=t):t=I[1];let $=t;I[2]!==E.authors?(n=Array.from(E.authors),I[2]=E.authors,I[3]=n):n=I[3];let B=n;I[4]!==A?(i=A?Array.from(A):[],I[4]=A,I[5]=i):i=I[5];let Y=i,L="delete"!==M;I[6]===Symbol.for("react.memo_cache_sentinel")?(r={dateStyle:"medium",timeStyle:"short"},I[6]=r):r=I[6];let O=(0,m.ixk)(r);I[7]!==D?(d=new Date(D),I[7]=D,I[8]=d):d=I[8];let H=(0,m.Vq9)(d||"",iQ);if(I[9]!==O||I[10]!==D){let e=new Date(D);c=O.format(e),I[9]=O,I[10]=D,I[11]=c}else c=I[11];let V=c;I[12]!==E||I[13]!==L||I[14]!==T?(u=e=>{e.preventDefault(),e.stopPropagation(),L&&T(E)},I[12]=E,I[13]=L,I[14]=T,I[15]=u):u=I[15];let Z=u;I[16]===Symbol.for("react.memo_cache_sentinel")?(p={position:"relative"},I[16]=p):p=I[16],I[17]!==B?(h=(0,s.jsx)(iJ,{maxLength:3,userIds:B,size:2}),I[17]=B,I[18]=h):h=I[18];let N=iG[M];return I[19]!==$?(f=$&&(0,s.jsx)($,{}),I[19]=$,I[20]=f):f=I[20],I[21]!==f?(x=(0,s.jsx)(a.EY,{size:0,children:f}),I[21]=f,I[22]=x):x=I[22],I[23]!==N||I[24]!==x?(g=(0,s.jsx)(iU,{align:"center",justify:"center",$color:N,children:x}),I[23]=N,I[24]=x,I[25]=g):g=I[25],I[26]!==g||I[27]!==h?(b=(0,s.jsxs)("div",{style:p,children:[h,g]}),I[26]=g,I[27]=h,I[28]=b):b=I[28],I[29]!==R||I[30]!==M?(y=R(iW[M])||(0,s.jsx)("code",{children:M}),I[29]=R,I[30]=M,I[31]=y):y=I[31],I[32]!==y?(j=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:y}),I[32]=y,I[33]=j):j=I[33],I[34]!==V||I[35]!==D||I[36]!==H?(v=(0,s.jsx)(a.EY,{as:"time",size:1,muted:!0,dateTime:D,title:V,children:H}),I[34]=V,I[35]=D,I[36]=H,I[37]=v):v=I[37],I[38]!==j||I[39]!==v?(_=(0,s.jsxs)(a.BJ,{space:2,children:[j,v]}),I[38]=j,I[39]=v,I[40]=_):_=I[40],I[41]!==Y?(w=Y.length>0&&(0,s.jsx)(a.so,{flex:1,justify:"flex-end",align:"center",children:(0,s.jsx)(l.m_,{placement:"top",content:(0,s.jsx)(i0,{collaborators:Y}),portal:!0,children:(0,s.jsx)(a.az,{paddingLeft:2,paddingY:2,children:(0,s.jsx)(iJ,{maxLength:3,userIds:Y,size:0,withTooltip:!1})})})}),I[41]=Y,I[42]=w):w=I[42],I[43]!==b||I[44]!==_||I[45]!==w?(S=(0,s.jsxs)(a.so,{align:"center",gap:3,children:[b,_,w]}),I[43]=b,I[44]=_,I[45]=w,I[46]=S):S=I[46],I[47]!==E.id||I[48]!==Z||I[49]!==z||I[50]!==S?(k=(0,s.jsx)(a.Zp,{as:"button",onClick:Z,padding:2,pressed:z,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":E.id,children:S}),I[47]=E.id,I[48]=Z,I[49]=z,I[50]=S,I[51]=k):k=I[51],I[52]!==P||I[53]!==k?(C=(0,s.jsxs)(a.so,{align:"center",gap:1,children:[k,P]}),I[52]=P,I[53]=k,I[54]=C):C=I[54],C}function i2(e){return(0,s.jsx)(iX,{userId:e},e)}let i3=e=>"publish"!==e.type,i4=e=>"publish"===e.type,i5="timeline-list-wrapper",i6=({chunks:e,hasMoreChunks:t,lastChunk:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)"})=>{let[o,d]=(0,c.useState)(!1),{t:u}=(0,m.Bdt)("studio"),p=n?.id,h=(0,c.useMemo)(()=>(function(e){let t=[];for(let n of e){if(i4(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(i3(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(i4(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}i3(n)&&t.push(n)}return t})(e),[e]),[f,x]=(0,c.useState)(()=>{if(p){let e=h.find(e=>e.id===p);if(e&&i3(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,c.useEffect)(()=>{if(p){let e=h.find(e=>e.id===p);if(e&&i3(e)&&e.parentId){let t=e.parentId;x(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[h,p]);let g=(0,c.useMemo)(()=>h.filter(e=>!!i4(e)||!e.parentId||f.has(e.parentId)),[h,f]);(0,c.useEffect)(()=>{g.length<16&&t&&i()},[g,t,i]);let b=(0,c.useCallback)(e=>()=>x(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),y=(0,c.useMemo)(()=>p?g.findIndex(e=>e.id===p):-1,[p,g]),j=(0,c.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?r(n):(console.error("TimelineItem: chunk not found"),r(t))},[e,r]),v=(0,c.useCallback)((e,{activeIndex:n})=>(0,s.jsxs)(a.az,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:i3(e)&&e.parentId?4:1,children:[(0,s.jsx)(i1,{chunk:e,isSelected:p===e.id,onSelect:j,collaborators:i4(e)?e.collaborators:void 0,optionsMenu:i4(e)&&e.children.length>0?(0,s.jsx)(iZ,{isExpanded:f.has(e.id),onExpand:b(e.id)}):null}),n===g.length-1&&t&&(0,s.jsx)(m.gd4,{})]}),[f,g.length,b,j,t,p]);return(0,c.useEffect)(()=>d(!0),[]),(0,s.jsxs)(iK,{$visible:!y||o,"data-ui":"timeline",children:[0===g.length&&(0,s.jsxs)(iN,{padding:3,space:3,children:[(0,s.jsx)(a.EY,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,s.jsx)(a.EY,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]}),g.length>0&&(0,s.jsx)(iF,{direction:"column",$maxHeight:l,id:i5,children:(0,s.jsx)(m.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:u("timeline.list.aria-label"),autoFocus:"list",initialIndex:y,initialScrollAlign:"center",itemHeight:57,items:g,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})})]})};function i7(e){let t,n,i,r,l,d,c=(0,o.c)(14),{versionError:u}=e,{t:h}=(0,m.Bdt)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(m.SxK,{tone:"critical",children:(0,s.jsx)(p.YZv,{})}),c[0]=t):t=c[0],c[1]!==h||c[2]!==u?(n=h(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=h,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,s.jsx)(m.SxK,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==h||c[7]!==u?(r=h(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=h,c[7]=u,c[8]=r):r=c[8],c[9]!==r?(l=(0,s.jsx)(m.SxK,{size:1,tone:"critical",children:r}),c[9]=r,c[10]=l):l=c[10],c[11]!==i||c[12]!==l?(d=(0,s.jsxs)(a.so,{align:"flex-start",gap:3,padding:4,children:[t,(0,s.jsxs)(a.BJ,{space:4,children:[i,l]})]}),c[11]=i,c[12]=l,c[13]=d):d=c[13],d}i6.displayName="Timeline";let i8=(0,x.I4)(l.AM)`
  overflow: hidden;
  overflow: clip;
`,i9="timeline-menu";function re({chunk:e,mode:t,placement:n}){let{setTimelineRange:i,timelineError:r,ready:o,timelineStore:u}=tM(),[h,f]=(0,c.useState)(!1),[x,g]=(0,c.useState)(null),[b,y]=(0,c.useState)(null),j=(0,d.dj)(),v=(0,m.SfM)(u,e=>e.chunks),_=(0,m.SfM)(u,e=>e.isLoading),w=(0,m.SfM)(u,e=>e.hasMoreChunks),S=(0,m.SfM)(u,e=>e.realRevChunk),k=(0,m.SfM)(u,e=>e.sinceTime),{t:C}=(0,m.Bdt)("studio"),I=(0,c.useCallback)(()=>{f(!0)},[]),E=(0,c.useCallback)(()=>{f(!1)},[]),z=(0,c.useCallback)(e=>{h&&("Escape"===e.key||"Tab"===e.key)&&(E(),x?.focus())},[x,E,h]);(0,a.Pm)(z),(0,a.PR)(h&&E,()=>[x,b]);let T=(0,c.useCallback)(e=>{try{let[t,n]=u?.findRangeForRev(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[i,C,u,j]),A=(0,c.useCallback)(e=>{try{let[t,n]=u?.findRangeForSince(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[i,C,u,j]),P=(0,c.useCallback)(()=>{_||u?.loadMore()},[_,u]),R=(0,c.useMemo)(()=>{if(r)return(0,s.jsx)(i7,{});if("rev"===t)return(0,s.jsx)(i6,{chunks:v,hasMoreChunks:w,lastChunk:S,onLoadMore:P,onSelect:T});let e=S?v.filter(e=>e.index<S.index):v;return(0,s.jsx)(i6,{chunks:e,hasMoreChunks:w,lastChunk:k,onLoadMore:P,onSelect:A})},[v,P,w,t,S,T,A,k,r]),M={timestamp:{dateStyle:"medium",timeStyle:"short"}},D=e?C(iW[e.type],{context:"timestamp",timestamp:new Date(e?.endTimestamp),formatParams:M}):C("timeline.latest-revision"),$=e?C("timeline.since",{timestamp:new Date(e?.endTimestamp),formatParams:M}):C("timeline.since-version-missing"),B="rev"===t?D:$,Y=(0,c.useMemo)(()=>({[i9]:b}),[b]);return(0,s.jsx)(a.GD,{__unstable_elements:Y,children:(0,s.jsx)(i8,{"data-testid":"timeline-menu",constrainSize:!0,content:h&&R,"data-ui":"versionMenu",open:h,placement:n,matchReferenceWidth:!0,portal:!0,ref:y,children:(0,s.jsx)(a.so,{width:"fill",children:(0,s.jsx)(l.$n,{"data-testid":h?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!o,mode:"ghost",onClick:h?E:I,ref:g,selected:h,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:p.D3D,text:o?B:C("timeline.loading-history")})})})})}let rt=(0,x.I4)(b.P.path)`
  transform-origin: center;
`,rn=e=>{let t,n=(0,o.c)(2);return n[0]!==e?(t=(0,s.jsx)(b.P.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},ri=e=>{let t,n=(0,o.c)(2);return n[0]!==e?(t=(0,s.jsx)(rt,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},rr=e=>{let t,n=(0,o.c)(2);return n[0]!==e?(t=(0,s.jsx)(b.P.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},rl=(0,x.i7)`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,rs=x.I4.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${rl} 1s ease-in-out infinite;
  }
`,ro={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},ra={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},rd={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rc={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function ru(e){let t,n,i,r,l,a=(0,o.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,s.jsx)(ri,{variants:rd,initial:d,animate:d}),n=(0,s.jsx)(rn,{variants:ra,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,s.jsxs)(rs,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(r=(0,s.jsx)(rr,{variants:rc,initial:d,animate:d}),a[7]=d,a[8]=r):r=a[8],a[9]!==d||a[10]!==i||a[11]!==r?(l=(0,s.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,s.jsxs)(b.P.g,{variants:ro,initial:d,animate:d,children:[i,r]})}),a[9]=d,a[10]=i,a[11]=r,a[12]=l):l=a[12],l}let rp={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rm=e=>{let t,n,i,l,d,c=(0,o.c)(13),{status:u}=e,{t:p}=(0,m.Bdt)(r.Z7);if("saved"!==u&&"syncing"!==u)return null;let h=rp[u];return c[0]!==u?(t=(0,s.jsx)(ru,{status:u}),c[0]=u,c[1]=t):t=c[1],c[2]!==h.tone||c[3]!==t?(n=(0,s.jsx)(m.SxK,{size:1,tone:h.tone,children:t}),c[2]=h.tone,c[3]=t,c[4]=n):n=c[4],c[5]!==h.i18nKey||c[6]!==p?(i=p(h.i18nKey),c[5]=h.i18nKey,c[6]=p,c[7]=i):i=c[7],c[8]!==i?(l=(0,s.jsx)(a.EY,{muted:!0,size:1,children:i}),c[8]=i,c[9]=l):l=c[9],c[10]!==n||c[11]!==l?(d=(0,s.jsxs)(a.so,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),c[10]=n,c[11]=l,c[12]=d):d=c[12],d},rh={minimal:!0,useTemporalPhrase:!0},rf=b.P.create(a.$n),rx=b.P.create(a.az),rg=()=>{let e,t,n=(0,o.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(m.LIN,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)(a.so,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,s.jsx)(d.EA,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},rb=e=>{let t,n,i,r,l,d,c,u,p=(0,o.c)(17),{author:h,translationKey:f,timestamp:x}=e,{onHistoryOpen:g,inspector:b,onHistoryClose:y}=tM(),{t:j}=(0,m.Bdt)(),v=(0,m.Vq9)(void 0===x?"":x,rh);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let _=b?.name===tN?y:g;return p[3]!==h?(r=h&&(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(m.H8m,{user:h,size:0})}),p[3]=h,p[4]=r):r=p[4],p[5]!==j||p[6]!==f?(l=j(f),p[5]=j,p[6]=f,p[7]=l):l=p[7],p[8]!==v||p[9]!==l?(d=(0,s.jsxs)(a.EY,{muted:!0,size:1,children:[l," ",v]}),p[8]=v,p[9]=l,p[10]=d):d=p[10],p[11]!==r||p[12]!==d?(c=(0,s.jsxs)(a.so,{align:"center",flex:"none",gap:3,children:[r,d]}),p[11]=r,p[12]=d,p[13]=c):c=p[13],p[14]!==_||p[15]!==c?(u=(0,s.jsx)(rf,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:_,padding:2,muted:!0,children:c}),p[14]=_,p[15]=c,p[16]=u):u=p[16],u},ry=()=>{let{editState:e}=tM(),{selectedPerspective:t}=(0,m.QO2)(),n=(0,c.useMemo)(()=>(0,m.xo4)(t)&&e?.published?._updatedAt?{translationKey:m.uMx.published.createDocumentVersion,timestamp:e.published._updatedAt}:e?.version?._updatedAt?{translationKey:e?.version?._updatedAt===e?.version?._createdAt?m.uMx.version.createDocumentVersion:m.uMx.version.editDocumentVersion,timestamp:e.version._updatedAt}:e?.draft?._updatedAt?{translationKey:e?.draft?._updatedAt===e?.draft?._createdAt?m.uMx.draft.createDocumentVersion:m.uMx.draft.editDocumentVersion,timestamp:e.draft._updatedAt}:null,[t,e?.published?._updatedAt,e?.version?._updatedAt,e?.version?._createdAt,e?.draft?._updatedAt,e?.draft?._createdAt]);return n?(0,s.jsx)(rb,{author:"",translationKey:n.translationKey,timestamp:n.timestamp}):null},rj=()=>{let e,t=(0,o.c)(6),{events:n,loading:i}=(0,m.LJN)(),r=n?.[0];if(!r&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rg,{}),t[0]=e):e=t[0],e}if(!r){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(ry,{}),t[1]=e):e=t[1],e}let l=m.uMx[r.documentVariantType][r.type];return t[2]!==r.author||t[3]!==r.timestamp||t[4]!==l?(e=(0,s.jsx)(rb,{author:r.author,translationKey:l,timestamp:r.timestamp}),t[2]=r.author,t[3]=r.timestamp,t[4]=l,t[5]=e):e=t[5],e},rv=()=>{let e,t,n=(0,o.c)(8),{timelineStore:i}=tM(),r=(0,m.SfM)(i,rw),l=(0,m.SfM)(i,rS),a=r?.[0];if(!a&&l){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rg,{}),n[0]=e):e=n[0],e}if(!a){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(ry,{}),n[1]=e):e=n[1],e}n[2]!==a.authors?(e=Array.from(a.authors),n[2]=a.authors,n[3]=e):e=n[3];let d=e[0],c=iW[a.type];return n[4]!==d||n[5]!==a.endTimestamp||n[6]!==c?(t=(0,s.jsx)(rb,{author:d,translationKey:c,timestamp:a.endTimestamp}),n[4]=d,n[5]=a.endTimestamp,n[6]=c,n[7]=t):t=n[7],t};function r_(){let e,t,n,i,r,l,a,d=(0,o.c)(18),{documentId:u,documentType:p,editState:h,value:f}=tM(),[x,g]=(0,c.useState)(null),b=(0,m.For)().beta?.eventsAPI?.documents,j=(0,m.M7h)(u,p,h?.release),v=f?._updatedAt;return d[0]!==x||d[1]!==j.isSyncing?(e=()=>{if("syncing"===x&&!j.isSyncing){let e=setTimeout(()=>g("saved"),1e3);return()=>clearTimeout(e)}if("saved"===x){let e=setTimeout(()=>g(null),3e3);return()=>clearTimeout(e)}},d[0]=x,d[1]=j.isSyncing,d[2]=e):e=d[2],d[3]!==v||d[4]!==x||d[5]!==j.isSyncing?(t=[x,v,j.isSyncing],d[3]=v,d[4]=x,d[5]=j.isSyncing,d[6]=t):t=d[6],(0,c.useEffect)(e,t),d[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{g(null)},d[7]=n):n=d[7],d[8]!==u?(i=[u],d[8]=u,d[9]=i):i=d[9],(0,c.useLayoutEffect)(n,i),d[10]!==j.isSyncing?(r=()=>{j.isSyncing&&g("syncing")},d[10]=j.isSyncing,d[11]=r):r=d[11],d[12]!==v||d[13]!==j.isSyncing?(l=[j.isSyncing,v],d[12]=v,d[13]=j.isSyncing,d[14]=l):l=d[14],(0,c.useLayoutEffect)(r,l),d[15]!==b||d[16]!==x?(a=(0,s.jsx)(y.N,{children:x?(0,s.jsx)(rx,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,s.jsx)(rm,{status:x||void 0})}):(0,s.jsx)(s.Fragment,{children:b?(0,s.jsx)(rj,{}):(0,s.jsx)(rv,{})})}),d[15]=b,d[16]=x,d[17]=a):a=d[17],a}function rw(e){return e.chunks}function rS(e){return e.isLoading}let rk=(0,x.I4)(a.EY)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rC(){let e,t,n,i,r,l=(0,o.c)(12),{displayed:d,revisionNotFound:c}=tM(),{t:u}=(0,m.Bdt)(),h=d?._updatedAt||d?._createdAt;l[0]!==h||l[1]!==u?(e=h?(0,s.jsx)(m.HTc,{t:u,i18nKey:"document-status.revision-from",values:{date:(0,e_.A)(new Date(h),"MMM d, yyyy '@' pp")}}):null,l[0]=h,l[1]=u,l[2]=e):e=l[2],l[3]!==e?(t={name:"revision",text:e,tone:"caution"},l[3]=e,l[4]=t):t=l[4];let f=t;return l[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(a.az,{flex:"none",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(p.G2W,{})})}),l[5]=n):n=l[5],l[6]!==f||l[7]!==c||l[8]!==u?(i=c?(0,s.jsx)(m.HTc,{t:u,i18nKey:"document-status.revision-not-found"}):f.text,l[6]=f,l[7]=c,l[8]=u,l[9]=i):i=l[9],l[10]!==i?(r=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.so,{flex:1,gap:3,padding:2,children:[n,(0,s.jsx)(a.az,{flex:1,children:(0,s.jsx)(rk,{size:1,textOverflow:"ellipsis",children:i})})]})}),l[10]=i,l[11]=r):r=l[11],r}let rI=b.P.create(a.Zp);function rE(e){let t,n,i,r,l,d,u,p,h=(0,o.c)(22),{actionsBoxRef:f,createLinkMetadata:x}=e,{editState:g,onChange:b,revisionNotFound:y}=tM(),{params:j}=tB(),v=void 0===j?tH:j,{selectedPerspective:_}=(0,m.QO2)(),{title:w}=tK(),S=(0,m.eaL)().components?.documentLinkedActions,k=!!v.rev,[C,I]=(0,c.useState)(null),[E,z]=(0,c.useState)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},h[0]=t):t=h[0];let T=t;h[1]!==E?(n={element:E,onResize:T},h[1]=E,h[2]=n):n=h[2],function(e){let t,n,i=(0,o.c)(4),{element:r,onResize:l}=e;i[0]!==r||i[1]!==l?(t=()=>(r&&m.bCC.observe(r,l),()=>{r&&m.bCC.unobserve(r)}),n=[r,l],i[0]=r,i[1]=l,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,c.useLayoutEffect)(t,n)}(n);e:{let e=!!(g?.ready&&"boolean"==typeof C);if(_){if((0,m.xo4)(_)){i=e&&!!g?.published;break e}if((0,m.Jrl)(_)){i=e&&!!g?.version;break e}}i=e}let A=i;if(x&&(0,m.Y07)(x)&&S){let e;h[3]!==S||h[4]!==x||h[5]!==b||h[6]!==w?(e=(0,s.jsx)(S,{metadata:x,panelPortalElementId:n1,onDocumentChange:b,documentTitle:w}),h[3]=S,h[4]=x,h[5]=b,h[6]=w,h[7]=e):e=h[7],r=e}else if(k){let e;h[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(iw,{}),h[8]=e):e=h[8],r=e}else{let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(i_,{}),h[9]=e):e=h[9],r=e}if(k&&y)return null;let P=k?"revision":"published";h[10]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:.2},h[10]=l):l=h[10],h[11]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,transition:{duration:.3}},h[11]=d):d=h[11];let R=k?"caution":void 0;return h[12]!==r||h[13]!==f||h[14]!==C||h[15]!==A||h[16]!==k?(u=A&&(0,s.jsxs)(a.so,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!k,paddingRight:+!k,children:[(0,s.jsxs)(a.so,{align:"center",flex:1,gap:C?2:3,wrap:"wrap",paddingRight:3,children:[(0,s.jsxs)(a.so,{align:"center",children:[k?(0,s.jsx)(rC,{}):(0,s.jsx)(r_,{}),(0,s.jsx)(iM,{})]}),(0,s.jsx)(iY,{})]}),(0,s.jsxs)(a.so,{align:"flex-start",justify:"flex-end",ref:f,style:{flexShrink:0,marginLeft:"auto"},children:[(0,s.jsx)(iM,{}),r]})]}),h[12]=r,h[13]=f,h[14]=C,h[15]=A,h[16]=k,h[17]=u):u=h[17],h[18]!==P||h[19]!==R||h[20]!==u?(p=(0,s.jsx)(rI,{initial:l,animate:d,tone:R,radius:3,ref:z,sizing:"border",padding:2,children:u},P),h[18]=P,h[19]=R,h[20]=u,h[21]=p):p=h[21],p}let rz=(0,c.memo)(function(e){let t,n,i,r,l,a,d,c,u,p,h,f,x,g=(0,o.c)(26);g[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:r,onActionStart:l,onKeyDown:a,rootRef:c,states:u,...d}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=r,g[5]=l,g[6]=a,g[7]=d,g[8]=c,g[9]=u,g[10]=p):(t=g[1],n=g[2],i=g[3],r=g[4],l=g[5],a=g[6],d=g[7],c=g[8],u=g[9],p=g[10]);let b=void 0===p?"div":p,y=u[n];g[11]!==l||g[12]!==a||g[13]!==u?(h=e=>{let t=u.filter(t=>t.shortcut&&(0,ex.v_)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),l(u.indexOf(n));return}a&&a(e)},g[11]=l,g[12]=a,g[13]=u,g[14]=h):h=g[14];let j=h;return g[15]!==t||g[16]!==y?(f=y&&y.dialog&&(0,s.jsx)(m.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(n9,{dialog:y.dialog,referenceElement:t})}),g[15]=t,g[16]=y,g[17]=f):f=g[17],g[18]!==b||g[19]!==i||g[20]!==j||g[21]!==r||g[22]!==d||g[23]!==c||g[24]!==f?(x=(0,s.jsxs)(b,{id:r,onKeyDown:j,tabIndex:-1,...d,ref:c,children:[i,f]}),g[18]=b,g[19]=i,g[20]=j,g[21]=r,g[22]=d,g[23]=c,g[24]=f,g[25]=x):x=g[25],x}),rT=(0,c.memo)(e=>{let t,n,i,r,l,a,d,u,p=(0,o.c)(20);p[0]!==e?({actionsBoxElement:t,as:r,children:n,...i}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=r):(t=p[1],n=p[2],i=p[3],r=p[4]);let m=void 0===r?"div":r,{actions:h,editState:f,isInitialValueLoading:x,revisionId:g}=tM(),[b,y]=(0,c.useState)(-1);p[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{y(e)},p[5]=l):l=p[5];let j=l;p[6]!==f||p[7]!==x||p[8]!==g?(a=f&&{...f,onComplete:rA,revision:g||void 0,initialValueResolved:!x},p[6]=f,p[7]=x,p[8]=g,p[9]=a):a=p[9];let v=a;p[10]!==t||p[11]!==b||p[12]!==m||p[13]!==n||p[14]!==i?(d=e=>{let{states:r}=e;return(0,s.jsx)(rz,{...i,activeIndex:b,actionsBoxElement:t,as:m,onActionStart:j,states:r,children:n})},p[10]=t,p[11]=b,p[12]=m,p[13]=n,p[14]=i,p[15]=d):d=p[15];let _=d;return v&&h?(p[16]!==v||p[17]!==h||p[18]!==_?(u=(0,s.jsx)(lV,{actionProps:v,actions:h,children:_}),p[16]=v,p[17]=h,p[18]=_,p[19]=u):u=p[19],u):null});function rA(){}function rP(e){let t,n,i,r,l,d,c,u=(0,o.c)(23),{documentType:p,value:h,currentMinWidth:f,paneKey:x,minWidth:g}=e,{t:b}=(0,m.Bdt)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==b||u[3]!==t?(n=(0,s.jsx)(m.HTc,{t:b,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=b,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==b?(i=p&&(0,s.jsx)(a.EY,{as:"p",children:(0,s.jsx)(m.HTc,{t:b,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=b,u[7]=i):i=u[7],u[8]!==p||u[9]!==b?(r=!p&&(0,s.jsx)(a.EY,{as:"p",children:b("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=b,u[10]=r):r=u[10],u[11]!==h?(l=m.Cu5&&h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.EY,{as:"p",children:"Here is the JSON representation of the document:"}),(0,s.jsx)(a.Zp,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,s.jsx)(a.Cy,{language:"json",size:[1,1,2],children:JSON.stringify(h,null,2)})})]}),u[11]=h,u[12]=l):l=u[12],u[13]!==i||u[14]!==r||u[15]!==l?(d=(0,s.jsxs)(a.BJ,{space:4,children:[i,r,l]}),u[13]=i,u[14]=r,u[15]=l,u[16]=d):d=u[16],u[17]!==f||u[18]!==g||u[19]!==x||u[20]!==n||u[21]!==d?(c=(0,s.jsx)(tz,{currentMinWidth:f,flex:2.5,minWidth:g,paneKey:x,title:n,tone:"caution",children:d}),u[17]=f,u[18]=g,u[19]=x,u[20]=n,u[21]=d,u[22]=c):c=u[22],c}rT.displayName="Memo(DocumentActionShortcuts)";let rR=["fixed","fixed","absolute"];function rM(e){let t,n,i,r,c,u,p=(0,o.c)(16),{documentPanelPortalElement:h,setFooterElement:f,setActionsBoxElement:x}=e,g=(0,m.YKH)(),{value:b}=tM();p[0]!==h?(t={[n1]:h},p[0]=h,p[1]=t):t=p[1];let y=t;p[2]!==b?(n=(0,m.G_3)(b),p[2]=b,p[3]=n):n=p[3];let j=n;return p[4]!==j||p[5]!==x?(i=(0,s.jsx)(l.vE,{children:(0,s.jsx)(rE,{actionsBoxRef:x,createLinkMetadata:j})}),p[4]=j,p[5]=x,p[6]=i):i=p[6],p[7]!==f||p[8]!==i?(r=(0,s.jsx)(tm,{ref:f,padding:1,children:i}),p[7]=f,p[8]=i,p[9]=r):r=p[9],p[10]!==r||p[11]!==g.portal?(c=(0,s.jsx)(d.Co,{position:rR,zOffset:g.portal,children:r}),p[10]=r,p[11]=g.portal,p[12]=c):c=p[12],p[13]!==y||p[14]!==c?(u=(0,s.jsx)(a.GD,{__unstable_elements:y,children:c}),p[13]=y,p[14]=c,p[15]=u):u=p[15],u}let rD=[],r$=["fixed","fixed","absolute"],rB=(0,x.I4)(m.olN)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function rY(){let{changesOpen:e,displayed:t,documentId:n,documentType:i,editState:l,fieldActions:o,focusPath:u,inspectOpen:h,inspector:f,inspectors:x,onFocus:g,onHistoryOpen:b,onMenuAction:y,onPathOpen:j,paneKey:v,schemaType:_,value:w,previewUrl:S}=tM(),{params:k}=tB(),{features:C}=tO(),{t:I}=(0,m.Bdt)(r.Z7),{collapsed:E}=e4(),z=(0,m.YKH)(),[T,A]=(0,c.useState)(null),[P,R]=(0,c.useState)(null),[M,D]=(0,c.useState)(null),[$,B]=(0,c.useState)(null),[Y,L]=(0,c.useState)(null);(0,m.ti5)({element:T,focusPath:u,value:w});let[O,H]=(0,c.useState)([]),[V,Z]=(0,c.useState)([]),N=(0,d.sQ)(P),F=(0,d.sQ)(M),K=N?.height,W=F?.height,J=600+320*!!f,U=320+320*!!f,G=(0,c.useMemo)(()=>x?.find(e=>e.name===f?.name),[x,f?.name]),Q=tL({displayed:t,documentId:n,editState:l}),q=!!w,X=(0,c.useMemo)(()=>(function(e){let t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,r)=>{let l=i[r];return!l||l.hidden?null:{action:`${tV}${n.name}`,group:l.showAsAction?void 0:"inspectors",icon:l.icon,disabled:!t,selected:e?.name===n.name,shortcut:l.hotkeys?.join("+"),showAsAction:l.showAsAction,title:l.title,tone:l.tone}}).filter(Boolean)}(e),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:p.Pe7,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:p.ppF,disabled:n}}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:p.qYV},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:p.qzt,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:G,features:C,hasValue:q,inspectorMenuItems:O,inspectors:x,previewUrl:S,documentIdStack:Q,t:I}),[G,Q,C,q,O,x,S,I]),ee=(0,c.useCallback)(e=>{for(let t of X)if(t.shortcut&&(0,ex.v_)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),y(t);return}},[y,X]),et=(0,c.useCallback)(e=>{j(e),g(e)},[j,g]);return _?(0,s.jsxs)(m.niW,{value:w,children:[x.length>0&&(0,s.jsx)(tF,{documentId:n,documentType:i,inspectors:x,onMenuItems:H}),o.length>0&&_&&(0,s.jsx)(m.yW8,{actions:o,documentId:n,documentType:i,onActions:Z,path:rD,schemaType:_}),(0,s.jsx)(m.tdH,{actions:V,path:rD,children:(0,s.jsxs)(rT,{actionsBoxElement:$,as:e8,currentMinWidth:J,"data-testid":"document-pane",flex:2.5,id:v,minWidth:U,onKeyUp:ee,rootRef:A,children:[(0,s.jsx)(iA,{ref:D,menuItems:X}),(0,s.jsx)(d.Co,{position:r$,zOffset:z.paneDialog,children:(0,s.jsx)(a.so,{direction:"column",flex:1,height:E?void 0:"fill",children:(0,s.jsx)(rB,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&k?.changesInspectorTab==="review",onOpenReviewChanges:b,onSetFocus:et,children:(0,s.jsx)(nJ,{footerHeight:K||null,headerHeight:W||null,isInspectOpen:h,rootElement:T,setDocumentPanelPortalElement:L,footer:(0,s.jsx)(rM,{documentPanelPortalElement:Y,setFooterElement:R,setActionsBoxElement:B})})})})}),(0,s.jsx)(tJ,{})]})})]}):(0,s.jsx)(rP,{currentMinWidth:J,documentType:i,minWidth:U,paneKey:v,value:w})}let rL=(e,t)=>{let n,i,r,l,s=(0,o.c)(11),a=(0,m.FyK)(),[d,u]=(0,c.useState)(null),[p,h]=(0,c.useState)(!1);s[0]!==e||s[1]!==t?(n={documentId:e,documentType:t},s[0]=e,s[1]=t,s[2]=n):n=s[2];let f=(0,m.Az$)(n),x=(0,m.SfM)(f,rO);return s[3]!==e||s[4]!==a||s[5]!==x?(i=()=>{x&&e?(h(!0),a.getDocumentAtRevision(e,x).then(e=>{u(e||null),h(!1)}).catch(()=>{u(null),h(!1)})):(u(null),h(!1))},r=[e,x,a],s[3]=e,s[4]=a,s[5]=x,s[6]=i,s[7]=r):(i=s[6],r=s[7]),(0,c.useEffect)(i,r),s[8]!==d||s[9]!==p?(l={lastRevisionDocument:d,loading:p},s[8]=d,s[9]=p,s[10]=l):l=s[10],l};function rO(e){return e.lastNonDeletedRevId}let rH=(0,ep.g_)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"});function rV(e){let t=(0,m.u4i)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}let rZ=(0,c.memo)(e=>{let{children:t,index:n,pane:i,paneKey:l,onFocusPath:a,forcedVersion:p,historyStore:h}=e,{store:f,error:x,ready:g,revisionDocument:b,onOlderRevision:y,sinceDocument:v,isPristine:_,revisionId:w,lastNonDeletedRevId:S}=h,k=(0,m.I07)(),{setDocumentMeta:C}=(0,m.e8q)(),{document:{actions:I,badges:z,unstable_fieldActions:A,unstable_languageFilter:M,drafts:{enabled:D}}}=(0,m.For)(),$=(0,ed.Jr)(),B=tB(),Y=B.setParams,{push:L}=(0,d.dj)(),{options:O,menuItemGroups:H=tZ,title:V=null,views:N=[]}=i,F=(0,m.$6H)(O),K=F.id,U=(0,m.IMx)(K),G=O.type,Q=(0,m.$6H)(B.params)||tH,{buildStudioUrl:q}=(0,m.HuN)(),X=(0,m.QO2)(),{document:{drafts:{enabled:ee}}}=(0,m.hA9)(),{selectedReleaseId:et,selectedPerspectiveName:en}=(0,c.useMemo)(()=>p||{selectedPerspectiveName:X.selectedPerspectiveName,selectedReleaseId:X.selectedReleaseId},[p,X.selectedPerspectiveName,X.selectedReleaseId]),ei=eM(),er=(e=>{let t,n,i=(0,o.c)(13),{paneOptions:r,documentType:l,documentId:s,params:a}=e,d=(0,m.bgA)(),c=tB(),u=(0,m.$6H)(c.payload);i[0]!==l||i[1]!==r.template||i[2]!==r.templateParameters||i[3]!==u||i[4]!==a.template||i[5]!==d?(t=function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${i}". Using "${i}".`);let r=i||t.urlTemplate,l=e.filter(e=>e.schemaType===t.documentType),s={...t.templateParams,..."object"==typeof n&&n||{}},o=r;return r||1!==l.length||(o=l[0].id),{templateName:o,templateParams:s}}(d,{documentType:l,templateName:r.template,templateParams:r.templateParameters,panePayload:u,urlTemplate:a.template}),i[0]=l,i[1]=r.template,i[2]=r.templateParameters,i[3]=u,i[4]=a.template,i[5]=d,i[6]=t):t=i[6];let{templateName:p,templateParams:h}=t;i[7]!==s||i[8]!==l||i[9]!==a.version||i[10]!==p||i[11]!==h?(n={documentId:s,documentType:l,templateName:p,templateParams:h,version:a.version},i[7]=s,i[8]=l,i[9]=a.version,i[10]=p,i[11]=h,i[12]=n):n=i[12];let f=(0,m.nfZ)(n);return(0,m.$6H)(f)})({paneOptions:F,documentId:U,documentType:G,params:Q}),es=er.loading,{changesOpen:eo,currentInspector:ea,inspectors:ec,closeInspector:eu,openInspector:ep,handleHistoryClose:em,handleHistoryOpen:eh,handleInspectorAction:ef,inspectOpen:ex,handleLegacyInspectClose:eg}=function({documentId:e,documentType:t,params:n,setParams:i}){let{features:r}=tO(),l=(0,m.For)().document.inspectors,s=(0,c.useMemo)(()=>l({documentId:e,documentType:t}),[e,t,l]),[o,a]=(0,c.useState)(()=>n.inspect||null),d=(0,c.useRef)(n.inspect);(0,c.useEffect)(()=>{d.current!==n.inspect&&(d.current=n.inspect,a(n.inspect||null))},[n.inspect]);let u=(0,c.useMemo)(()=>s?.find(e=>e.name===o),[s,o]),p=(0,c.useMemo)(()=>s.find(e=>e.name===tN),[s]),h=u?.name===tN,f=(0,c.useCallback)(e=>{let t=e&&s.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(u){if(t){let e=t.onClose?.({params:n})??{params:n};a(null),d.current=void 0,i({...e.params,inspect:void 0});return}if(u){let e=u.onClose?.({params:n})??{params:n};a(null),d.current=void 0,i({...e.params,inspect:void 0})}}},[u,s,n,i]),x=(0,c.useCallback)((e,t)=>{let r=s.find(t=>t.name===e);if(!r)return void console.warn(`No inspector named "${e}"`);if(u?.name===r.name)return void i({...n,...t,inspect:r.name});let l=n;u&&(l=(r.onClose?.({params:l})??{params:l}).params);let o=r.onOpen?.({params:l})??{params:l};a(r.name),d.current=r.name,i({...o.params,...t,inspect:r.name})},[u,s,n,i]),g=(0,c.useCallback)(()=>{p&&f(p.name)},[f,p]),b=(0,c.useCallback)(()=>{r.reviewChanges&&p&&x(p.name,{changesInspectorTab:"review"})},[r.reviewChanges,x,p]),y="on"===n.inspect,j=(0,c.useCallback)((e=!y)=>{i(e?{...n,inspect:"on"}:{...n,inspect:void 0})},[y,n,i]),v=(0,c.useCallback)(()=>j(!1),[j]),_=(0,c.useCallback)(e=>{if("inspect"===e.action)return j(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(tV.length),n=s.find(e=>e.name===t);return!!n&&(n.name===o?f(n.name):x(n.name),!0)},[f,o,s,x,j]);return{changesOpen:h,currentInspector:u,inspectors:s,closeInspector:f,openInspector:x,handleHistoryClose:g,handleHistoryOpen:b,handleInspectorAction:_,handleLegacyInspectClose:v,inspectOpen:y}}({documentId:U,documentType:G,params:Q,setParams:Y}),[eb,ey]=(0,c.useState)(!1),{lastRevisionDocument:ej}=rL(U,G),ev=(0,c.useCallback)(e=>!!g&&!e?.draft&&!e?.published&&!e?.version&&!_,[g,_]),e_=(0,c.useCallback)(e=>eo?v||e?.published:e?.published||null,[eo,v]),ew=k.get(G),eS=(0,c.useCallback)(e=>{let t=ev(e);return!!Q.rev||eb||t||!(0,m.CW3)({selectedPerspective:X.selectedPerspective,isDraftModelEnabled:ee,schemaType:ew}).result},[ev,eb,ee,Q.rev,X.selectedPerspective,ew]),ek=(0,c.useCallback)(e=>y?b||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&S&&ej?ej:e,[y,b,S,ej]),{editState:eC,connectionState:eI,focusPath:eE,onChange:ez,validation:eT,ready:eA,value:eP,formState:eR,permissions:eD,onPathOpen:e$,isPermissionsLoading:eB,formStateRef:eY,onProgrammaticFocus:eL,collapsedFieldSets:eO,collapsedPaths:eH,onBlur:eV,onFocus:eZ,onSetActiveFieldGroup:eN,onSetCollapsedPath:eF,onSetCollapsedFieldSet:eK,openPath:eW}=(0,m.Lay)({changesOpen:eo,documentType:G,documentId:U,initialValue:er,comparisonValue:e_,releaseId:et,selectedPerspectiveName:en,initialFocusPath:Q.path?(0,el.sH)(Q.path):m.Mlv,readOnly:eS,onFocusPath:a,getFormDocumentValue:ek}),eJ=(0,c.useCallback)(()=>{let e;switch(!0){case!!Q.rev:e="revision";break;case et&&(0,m.A_X)(eP._id):e="version";break;case"published"===en:e="published";break;case D:e="draft";break;default:e="published"}return e},[Q.rev,et,eP._id,en,D]),eU=(0,c.useMemo)(()=>eJ(),[eJ]),eG=(0,c.useMemo)(()=>({schemaType:G,documentId:U,versionType:eU,releaseId:et}),[G,U,eU,et]),eQ=(0,c.useMemo)(()=>I(eG),[I,eG]),eq=(0,c.useMemo)(()=>z({schemaType:G,documentId:U}),[z,U,G]),eX=(0,c.useMemo)(()=>M({schemaType:G,documentId:U}),[U,G,M]),e0=(0,m.$6H)(N),e1=Q.view||e0[0]&&e0[0].id||null,e2=function(e){let t,n,i,r,l=(0,o.c)(6),{resolveProductionUrl:s}=(0,m.For)().document;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new W.t(void 0),l[0]=t):t=l[0];let a=t;return l[1]!==e?(n=()=>{a.next(e)},i=[a,e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,c.useEffect)(n,i),l[4]!==s?(r=a.asObservable().pipe((0,P.F)(),(0,T.B)(500),(0,R.n)(e=>(0,m.u4i)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,J.H)(s({document:e})):(0,Z.of)(void 0)),(0,P.F)(),(0,E.W)(rV)),l[4]=s,l[5]=r):r=l[5],(0,j.J)(r)}(eP),{t:e3}=(0,m.Bdt)(r.Z7),e4=(0,c.useMemo)(()=>ew?A({documentId:U,documentType:G,schemaType:ew}):[],[U,G,A,ew]),e5=eA&&(!Q.rev||g||!!x),e6=(0,c.useMemo)(()=>ek(eP),[ek,eP]),{previousId:e7}=tL({displayed:e6,documentId:U,editState:eC}),e8=(0,c.useCallback)((e,t)=>{Y({...Q,since:e,rev:t||void 0})},[Q,Y]),e9=(0,c.useCallback)(()=>B.closeCurrent(),[B]),te=(0,c.useCallback)(()=>B.duplicateCurrent(),[B]),tt=(0,c.useCallback)(async e=>{if("production-preview"===e.action&&e2)return window.open(e2),!0;if("copy-document-url"===e.action&&navigator){$.log(rH);let e=q({coreUi:e=>`${e}/intent/edit/id=${U};type=${G}`});return await navigator.clipboard.writeText(e),L({id:"copy-document-url",status:"info",title:e3("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(eh(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(tV))&&ef(e),"compareVersions"===e.action&&"u">typeof e7&&(ei.navigateDiffView({mode:"version",previousDocument:{type:G,id:e7},nextDocument:{type:G,id:eP._id}}),!0))},[e2,e7,$,q,L,e3,U,G,eh,ef,ei,eP._id]);(0,c.useEffect)(()=>{C({documentId:U,documentType:G,schemaType:ew,onChange:ez})},[U,G,ew,ez,C]);let tn=(0,c.useMemo)(()=>e_(eC),[eC,e_]),ti=(0,c.useMemo)(()=>ev(eC),[eC,ev]),tr=y&&!b,tl=(0,c.useMemo)(()=>eC.version&&(0,m.YW1)(eC.version)?eC.published:e6,[eC.version,eC.published,e6]),ts=(0,c.useMemo)(()=>({actions:eQ,activeViewId:e1,badges:eq,changesOpen:eo,closeInspector:eu,collapsedFieldSets:eO,collapsedPaths:eH,compareValue:tn,connectionState:eI,displayed:tl,documentId:U,documentIdRaw:K,documentType:G,editState:eC,fieldActions:e4,focusPath:eE,inspector:ea||null,inspectors:ec,onBlur:eV,onChange:ez,onFocus:eZ,onPathOpen:e$,onHistoryClose:em,onHistoryOpen:eh,onInspectClose:eg,onMenuAction:tt,onPaneClose:e9,onPaneSplit:te,onSetActiveFieldGroup:eN,onSetCollapsedPath:eF,onSetCollapsedFieldSet:eK,openInspector:ep,openPath:eW,index:n,inspectOpen:ex,validation:eT,menuItemGroups:H||[],paneKey:l,previewUrl:e2,ready:e5,schemaType:ew,isPermissionsLoading:eB,isInitialValueLoading:es,permissions:eD,setTimelineRange:e8,setIsDeleting:ey,isDeleting:eb,isDeleted:ti,timelineError:x,timelineStore:f,title:V,value:eP,selectedReleaseId:et,views:e0,formState:eR,unstable_languageFilter:eX,revisionId:w,revisionNotFound:tr,lastNonDeletedRevId:S,lastRevisionDocument:ej}),[eQ,e1,eq,eo,eu,eO,eH,tn,eI,tl,U,K,G,eC,e4,eE,ea,ec,eV,ez,eZ,e$,em,eh,eg,tt,e9,te,eN,eF,eK,ep,eW,n,ex,eT,H,l,e2,e5,ew,eB,es,eD,e8,eb,ti,x,f,V,eP,et,e0,eR,eX,w,tr,S,ej]),to=(0,c.useRef)(void 0);return(0,c.useEffect)(()=>{if(e5&&Q.path){let{path:e,...t}=Q;e!==to.current&&eL((0,el.Y7)(eY.current?.value,(0,el.sH)(e))),B.setParams(t)}to.current=Q.path},[eY,eL,B,Q,e5]),(0,s.jsx)(u.Fi.Provider,{value:ts,children:t})});rZ.displayName="Memo(DocumentPaneProvider)";let rN=e=>{let t,n,i,r,l,a,d,c=(0,o.c)(37),{params:u}=tB(),p=void 0===u?tH:u,h=r4(e.pane.options,p),f=(0,m.I07)(),x=h.type,g=!!f.get(h.type)?.liveEdit,{selectedPerspectiveName:b,selectedReleaseId:y,selectedPerspective:j}=(0,m.QO2)(),{data:v}=(0,m.gJZ)();c[0]!==h.id?(t=(0,m.IMx)(h.id),c[0]=h.id,c[1]=t):t=c[1];let _=(0,m.zX2)(t,x,"default",y),w=g&&"drafts"===j&&!_?.draft,{rev:S,since:k}=p,C=p.historyVersion;e:{if(w){let e;c[2]!==h.id?(e=(0,m.IMx)(h.id),c[2]=h.id,c[3]=e):e=c[3],n=e;break e}if(C&&v.some(e=>(0,m._hI)(e._id)===C)){let e;c[4]!==C||c[5]!==h.id?(e=(0,m.ctg)(h.id,C),c[4]=C,c[5]=h.id,c[6]=e):e=c[6],n=e;break e}if(typeof b>"u"){let e;c[7]!==h.id?(e=(0,m.T4)(h.id),c[7]=h.id,c[8]=e):e=c[8],n=e;break e}if("published"===b){let e;c[9]!==h.id?(e=(0,m.IMx)(h.id),c[9]=h.id,c[10]=e):e=c[10],n=e;break e}if(y){let e;c[11]!==h.id||c[12]!==b?(e=(0,m.ctg)(h.id,b),c[11]=h.id,c[12]=b,c[13]=e):e=c[13],n=e;break e}n=h.id}let I=n;c[14]!==I||c[15]!==h.type||c[16]!==S||c[17]!==k?(i={documentId:I,documentType:h.type,rev:S,since:k},c[14]=I,c[15]=h.type,c[16]=S,c[17]=k,c[18]=i):i=c[18];let E=(0,m.Sjd)(i),z=E.error,T=E.revision?.revisionId||null,A=!!(S&&!E.revision?.loading),P=E.revision?.document||null,R=E.sinceRevision?.document||null,M=!E.loading,D=0===E.events.length;c[19]!==E.events?(r=E.events.find(rF)?.id||null,c[19]=E.events,c[20]=r):r=c[20],c[21]!==E.error||c[22]!==D||c[23]!==r||c[24]!==T||c[25]!==A||c[26]!==P||c[27]!==R||c[28]!==M?(l={error:z,revisionId:T,onOlderRevision:A,revisionDocument:P,sinceDocument:R,ready:M,isPristine:D,lastNonDeletedRevId:r},c[21]=E.error,c[22]=D,c[23]=r,c[24]=T,c[25]=A,c[26]=P,c[27]=R,c[28]=M,c[29]=l):l=c[29];let $=l;return c[30]!==$||c[31]!==C||c[32]!==e?(a=C?(0,s.jsx)(m.g19,{selectedPerspectiveName:C,excludedPerspectives:m.Mlv,children:(0,s.jsx)(rZ,{...e,historyStore:$})}):(0,s.jsx)(rZ,{...e,historyStore:$}),c[30]=$,c[31]=C,c[32]=e,c[33]=a):a=c[33],c[34]!==a||c[35]!==E?(d=(0,s.jsx)(m.tGd,{value:E,children:a}),c[34]=a,c[35]=E,c[36]=d):d=c[36],d};function rF(e){return!(0,m.GDb)(e)&&!(0,m.zOx)(e)}let rK=e=>{let t,n,i,r,l=(0,o.c)(20),{pane:a}=e,d=tB(),u=r4(a.options,d.params),p=d.params||tH,[h,f]=(0,c.useState)(null);l[0]!==u.id?(t=(0,m.IMx)(u.id),l[0]=u.id,l[1]=t):t=l[1],l[2]!==u.type||l[3]!==p.rev||l[4]!==p.since||l[5]!==t?(n={documentId:t,documentType:u.type,onError:f,rev:p.rev,since:p.since},l[2]=u.type,l[3]=p.rev,l[4]=p.since,l[5]=t,l[6]=n):n=l[6];let x=(0,m.Az$)(n),g=(0,m.SfM)(x,rW),b=(0,m.SfM)(x,rJ),y=(0,m.SfM)(x,rU),j=(0,m.SfM)(x,rG),v=(0,m.SfM)(x,rQ),_=(0,m.SfM)(x,rq),w=(0,m.SfM)(x,rX),S=b?.id||null,k=!!_;l[7]!==w||l[8]!==g||l[9]!==x||l[10]!==S||l[11]!==j||l[12]!==y||l[13]!==k||l[14]!==h||l[15]!==v?(i={store:x,error:h,revisionId:S,onOlderRevision:g,revisionDocument:j,sinceDocument:y,ready:v,isPristine:k,lastNonDeletedRevId:w},l[7]=w,l[8]=g,l[9]=x,l[10]=S,l[11]=j,l[12]=y,l[13]=k,l[14]=h,l[15]=v,l[16]=i):i=l[16];let C=i;return l[17]!==C||l[18]!==e?(r=(0,s.jsx)(rZ,{...e,historyStore:C}),l[17]=C,l[18]=e,l[19]=r):r=l[19],r};function rW(e){return e.onOlderRevision}function rJ(e){return e.revTime}function rU(e){return e.sinceAttributes}function rG(e){return e.timelineDisplayed}function rQ(e){return e.timelineReady}function rq(e){return e.isPristine}function rX(e){return e.lastNonDeletedRevId}let r0=(0,c.memo)(e=>{let t,n=(0,o.c)(4);if((0,m.For)().beta?.eventsAPI?.documents){let t;return n[0]!==e?(t=(0,s.jsx)(rN,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,s.jsx)(rK,{...e}),n[2]=e,n[3]=t):t=n[3],t});r0.displayName="Memo(DocumentPaneProviderWrapper)";let r1=(0,c.memo)(function(e){let t,n,i=(0,o.c)(5),{name:r}=(0,m.For)(),l=e.pane.source||r;return i[0]!==e?(t=(0,s.jsx)(m.K1$,{children:(0,s.jsx)(r2,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==l||i[3]!==t?(n=(0,s.jsx)(m.NeO,{name:l,children:t}),i[2]=l,i[3]=t,i[4]=n):n=i[4],n});function r2(e){var t,n,i;let l,d,u,p,h,f,x,g,b,y,j=(0,o.c)(57),{pane:v,paneKey:_}=e,{resolveNewDocumentOptions:w}=(0,m.For)().document,{selectedPerspectiveName:S}=(0,m.QO2)(),k=tB(),C=r4(v.options,k.params),{documentType:I,isLoaded:E}=(0,m.fRg)(C.id,C.type);!function(){let e,t,n,i,r,l=(0,o.c)(10),{params:s,setParams:a}=tB(),d=void 0===s?tH:s,{selectedPerspectiveName:u}=(0,m.QO2)(),p=(0,c.useRef)(!1);l[0]!==d||l[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>d[e])&&a({...d,rev:"true"===d.preserveRev?d.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},l[0]=d,l[1]=a,l[2]=e):e=l[2];let h=(0,ew.J)(e);l[3]!==u||l[4]!==h?(t=()=>{p.current&&h(u)},l[3]=u,l[4]=h,l[5]=t):t=l[5],l[6]!==u?(n=[u],l[6]=u,l[7]=n):n=l[7],(0,c.useEffect)(t,n),l[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),r=[],l[8]=i,l[9]=r):(i=l[8],r=l[9]),(0,c.useEffect)(i,r)}();let z=function(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:eK,defaultComponent:rY},t[0]=e):e=t[0],(0,m.A1m)(e)}();j[0]!==C.id||j[1]!==C.type||j[2]!==w?(l=w({type:"document",documentId:C.id,schemaType:C.type}),j[0]=C.id,j[1]=C.type,j[2]=w,j[3]=l):l=j[3];let T=l;j[4]!==T?(d={templateItems:T},j[4]=T,j[5]=d):d=j[5];let[A,P]=(0,m.CzS)(d),R=E&&!P;j[6]!==I||j[7]!==R||j[8]!==C||j[9]!==e?(u=R&&I&&C.type!==I?(t=e,n=C,i=I,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,j[6]=I,j[7]=R,j[8]=C,j[9]=e,j[10]=u):u=j[10];let M=u,{ReferenceChildLink:D,handleEditReference:$,groupIndex:B,routerPanesState:Y}=k;j[11]!==B||j[12]!==Y?(p=Y[B+1]?.[0].params||{},j[11]=B,j[12]=Y,j[13]=p):p=j[13];let L=p,O=Y.length,{parentRefPath:H}=L;j[14]!==B||j[15]!==H||j[16]!==O?(h=H?{path:(0,el.sH)(H),state:B>=O-1?"none":B>=O-2?"selected":"pressed"}:{path:[],state:"none"},j[14]=B,j[15]=H,j[16]=O,j[17]=h):h=j[17];let V=h,{t:Z}=(0,m.Bdt)(r.Z7);if("*"===C.type&&!R){let e,t;return j[18]!==Z?(e=Z("panes.document-pane.document-not-found.loading"),j[18]=Z,j[19]=e):e=j[19],j[20]!==_||j[21]!==e?(t=(0,s.jsx)(tR,{flex:2.5,minWidth:320,paneKey:_,title:e}),j[20]=_,j[21]=e,j[22]=t):t=j[22],t}if(!I){let e,t,n,i,r;return j[23]!==Z?(e=Z("panes.document-pane.document-not-found.title"),j[23]=Z,j[24]=e):e=j[24],j[25]!==C.id?(t={id:C.id},j[25]=C.id,j[26]=t):t=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:r3},j[27]=n):n=j[27],j[28]!==Z||j[29]!==t?(i=(0,s.jsx)(a.BJ,{space:4,children:(0,s.jsx)(a.EY,{as:"p",children:(0,s.jsx)(m.HTc,{t:Z,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),j[28]=Z,j[29]=t,j[30]=i):i=j[30],j[31]!==_||j[32]!==e||j[33]!==i?(r=(0,s.jsx)(tz,{flex:2.5,minWidth:320,paneKey:_,title:e,children:i}),j[31]=_,j[32]=e,j[33]=i,j[34]=r):r=j[34],r}let N=`${I}-${C.id}-${S||""}`;return j[35]!==z||j[36]!==C.id||j[37]!==C.type?(f=(0,s.jsx)(z,{documentId:C.id,documentType:C.type}),j[35]=z,j[36]=C.id,j[37]=C.type,j[38]=f):f=j[38],j[39]!==C.id||j[40]!==C.type||j[41]!==f?(x=(0,s.jsx)(tD,{documentId:C.id,documentType:C.type,children:f}),j[39]=C.id,j[40]=C.type,j[41]=f,j[42]=x):x=j[42],j[43]!==C.id||j[44]!==C.type||j[45]!==x?(g=(0,s.jsx)(e3,{documentId:C.id,documentType:C.type,children:x}),j[43]=C.id,j[44]=C.type,j[45]=x,j[46]=g):g=j[46],j[47]!==D||j[48]!==V||j[49]!==$||j[50]!==g||j[51]!==A?(b=(0,s.jsx)(m.NO5,{EditReferenceLinkComponent:D,onEditReference:$,initialValueTemplateItems:A,activePath:V,children:g}),j[47]=D,j[48]=V,j[49]=$,j[50]=g,j[51]=A,j[52]=b):b=j[52],j[53]!==M||j[54]!==N||j[55]!==b?(y=(0,s.jsx)(r0,{...M,children:b},N),j[53]=M,j[54]=N,j[55]=b,j[56]=y):y=j[56],y}function r3(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function r4(e,t){let n,i,r=(0,o.c)(8);r[0]!==t?(n=void 0===t?{}:t,r[0]=t,r[1]=n):n=r[1];let l=n,s=(0,m.bgA)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let o=e.template||l.template;r[2]!==o||r[3]!==s?(t=o?s.find(e=>e.id===o):void 0,r[2]=o,r[3]=s,r[4]=t):t=r[4];let a=t?.schemaType;if(!a){i=e;break e}r[5]!==a||r[6]!==e?(n={...e,type:a},r[5]=a,r[6]=e,r[7]=n):n=r[7],i=n}return i}let r5=(0,c.forwardRef)(function(e,t){let n,i,r,l=(0,o.c)(9),{routerPanesState:a,groupIndex:d}=(0,c.useContext)(u.l4);l[0]!==d||l[1]!==a?(n=a.slice(0,d),l[0]=d,l[1]=a,l[2]=n):n=l[2];let p=n;l[3]!==p?(i={panes:p},l[3]=p,l[4]=i):i=l[4];let m=i;return l[5]!==e||l[6]!==t||l[7]!==m?(r=(0,s.jsx)(v.s8,{...e,ref:t,state:m}),l[5]=e,l[6]=t,l[7]=m,l[8]=r):r=l[8],r}),r6=(0,c.forwardRef)(function(e,t){let n,i,r,l,a,d,p=(0,o.c)(19);p[0]!==e?({childId:n,childPayload:r,childParameters:i,...l}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=r,p[4]=l):(n=p[1],i=p[2],r=p[3],l=p[4]);let{routerPanesState:m,groupIndex:h}=(0,c.useContext)(u.l4);if(p[5]!==n||p[6]!==i||p[7]!==r||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==r?(e=[{id:n,params:i,payload:r}],p[11]=n,p[12]=i,p[13]=r,p[14]=e):e=p[14],a={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=r,p[8]=h,p[9]=m,p[10]=a}else a=p[10];return p[15]!==t||p[16]!==l||p[17]!==a?(d=(0,s.jsx)(v.s8,{...l,ref:t,state:a}),p[15]=t,p[16]=l,p[17]=a,p[18]=d):d=p[18],d}),r7=(0,c.forwardRef)(function(e,t){let n,i,r,l,a,d,p,h=(0,o.c)(20),{routerPanesState:f,groupIndex:x,siblingIndex:g}=(0,c.useContext)(u.l4);h[0]!==e?({params:n,payload:i,...r}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r):(n=h[1],i=h[2],r=h[3]);let b=(0,m.$6H)(n),y=(0,m.$6H)(i),j=f[x],_=j[g],w=b??_.params,S=y??_.payload;h[4]!==_||h[5]!==w||h[6]!==S?(l={..._,params:w,payload:S},h[4]=_,h[5]=w,h[6]=S,h[7]=l):l=h[7];let k=l;h[8]!==j||h[9]!==k||h[10]!==g?(a=[...j.slice(0,g),k,...j.slice(g+1)],h[8]=j,h[9]=k,h[10]=g,h[11]=a):a=h[11];let C=a;h[12]!==f||h[13]!==x||h[14]!==C?(d={panes:[...f.slice(0,x),C,...f.slice(x+1)]},h[12]=f,h[13]=x,h[14]=C,h[15]=d):d=h[15];let I=d;return h[16]!==I||h[17]!==t||h[18]!==r?(p=(0,s.jsx)(v.s8,{ref:t,...r,state:I}),h[16]=I,h[17]=t,h[18]=r,h[19]=p):p=h[19],p}),r8=(0,c.forwardRef)(function(e,t){let n,i,r,l,a,d,c,u,p,m,h=(0,o.c)(22);h[0]!==e?({documentId:i,documentType:r,parentRefPath:l,children:n,template:d,...a}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=l,h[5]=a,h[6]=d):(n=h[1],i=h[2],r=h[3],l=h[4],a=h[5],d=h[6]);let f=d?.params;return h[7]!==l?(c=(0,el.dI)(l),h[7]=l,h[8]=c):c=h[8],h[9]!==d?(u=d&&{template:d?.id},h[9]=d,h[10]=u):u=h[10],h[11]!==r||h[12]!==c||h[13]!==u?(p={type:r,parentRefPath:c,...u},h[11]=r,h[12]=c,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==a||h[19]!==f||h[20]!==p?(m=(0,s.jsx)(r6,{...a,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=a,h[19]=f,h[20]=p,h[21]=m):m=h[21],m}),r9=[];function le(e){let t,n,i,r,l,a,d,c,p,m,h,f,x,g=(0,o.c)(60),{children:b,flatIndex:y,index:j,params:w,payload:S,siblingIndex:k}=e,{navigate:C,navigateIntent:I,resolvePathFromState:E}=(0,v.rd)(),z=(0,v.ks)(),{panes:T,expand:A}=e4(),P=z?.panes||r9,R=T?.[T.length-2],M=j-1;g[0]!==M||g[1]!==P||g[2]!==z||g[3]!==k?(t=e=>{let t=P[M]||[],n=t[k],i=e(t,n),r=[...P.slice(0,M),i,...P.slice(M+1)];return{...z,panes:r}},g[0]=M,g[1]=P,g[2]=z,g[3]=k,g[4]=t):t=g[4];let D=t;g[5]!==D||g[6]!==C?(n=e=>{let t=D(e);return setTimeout(()=>C(t),0),t},g[5]=D,g[6]=C,g[7]=n):n=g[7];let $=n;g[8]!==D||g[9]!==E||g[10]!==k?(i=e=>E(D((t,n)=>[...t.slice(0,k),{...n,params:e},...t.slice(k+1)])),g[8]=D,g[9]=E,g[10]=k,g[11]=i):i=g[11];let B=i;g[12]!==$||g[13]!==k?(r=e=>{$((t,n)=>[...t.slice(0,k),{...n,payload:e},...t.slice(k+1)])},g[12]=$,g[13]=k,g[14]=r):r=g[14];let Y=r;g[15]!==$||g[16]!==k?(l=e=>{$((t,n)=>[...t.slice(0,k),{...n,params:e},...t.slice(k+1)])},g[15]=$,g[16]=k,g[17]=l):l=g[17];let L=l;g[18]!==M||g[19]!==C||g[20]!==P?(a=e=>{let{id:t,parentRefPath:n,type:i,template:r,version:l}=e;C({panes:[...P.slice(0,M+1),[{id:t,params:{template:r.id,parentRefPath:(0,el.dI)(n),type:i,version:l},payload:r.params}]]})},g[18]=M,g[19]=C,g[20]=P,g[21]=a):a=g[21];let O=a,H=!!P[M]&&P[M].length>1,V=P[M]?P[M].length:0,Z=y?r5:void 0;g[22]!==$?(c=e=>{let t=void 0===e?{}:e;$(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{$(lt)},g[22]=$,g[23]=d,g[24]=c):(d=g[23],c=g[24]),g[25]!==A||g[26]!==M||g[27]!==R||g[28]!==C||g[29]!==P?(p=e=>{(void 0===e||e)&&R&&A(R.element),C({panes:P.slice(0,M)})},g[25]=A,g[26]=M,g[27]=R,g[28]=C,g[29]=P,g[30]=p):p=g[30],g[31]!==$||g[32]!==k?(m=e=>{$((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,k),i,...t.slice(k)]})},g[31]=$,g[32]=k,g[33]=m):m=g[33],g[34]!==w||g[35]!==L?(h=e=>{let t=_(w,"view");return L(e?{...t,view:e}:t)},g[34]=w,g[35]=L,g[36]=h):h=g[36],g[37]!==B||g[38]!==y||g[39]!==M||g[40]!==O||g[41]!==I||g[42]!==w||g[43]!==S||g[44]!==P||g[45]!==L||g[46]!==Y||g[47]!==k||g[48]!==d||g[49]!==p||g[50]!==m||g[51]!==h||g[52]!==H||g[53]!==V||g[54]!==Z||g[55]!==c?(f={index:y,groupIndex:M,siblingIndex:k,payload:S,params:w,hasGroupSiblings:H,groupLength:V,routerPanesState:P,ChildLink:r6,BackLink:Z,ReferenceChildLink:r8,handleEditReference:O,ParameterizedLink:r7,replaceCurrent:c,closeCurrent:d,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:L,setPayload:Y,createPathWithParams:B,navigateIntent:I},g[37]=B,g[38]=y,g[39]=M,g[40]=O,g[41]=I,g[42]=w,g[43]=S,g[44]=P,g[45]=L,g[46]=Y,g[47]=k,g[48]=d,g[49]=p,g[50]=m,g[51]=h,g[52]=H,g[53]=V,g[54]=Z,g[55]=c,g[56]=f):f=g[56];let N=f;return g[57]!==b||g[58]!==N?(x=(0,s.jsx)(u.l4.Provider,{value:N,children:b}),g[57]=b,g[58]=N,g[59]=x):x=g[59],x}function lt(e,t){return e.length>1?e.filter(e=>e!==t):e}function ln(e){let t,n,i,l,d,c=(0,o.c)(14),{isSelected:u,pane:p,paneKey:h}=e;c[0]!==p?(t=(0,m.u4i)(p)&&p.type||null,c[0]=p,c[1]=t):t=c[1];let f=t,{t:x}=(0,m.Bdt)(r.Z7);return c[2]!==x?(n=x("panes.unknown-pane-type.title"),c[2]=x,c[3]=n):n=c[3],c[4]!==n?(i=(0,s.jsx)(ty,{title:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==x||c[7]!==f?(l=(0,s.jsx)(tt,{children:(0,s.jsx)(a.az,{padding:4,children:"string"==typeof f?(0,s.jsx)(a.EY,{as:"p",muted:!0,children:(0,s.jsx)(m.HTc,{t:x,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:f}})}):(0,s.jsx)(a.EY,{as:"p",muted:!0,children:(0,s.jsx)(m.HTc,{t:x,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),c[6]=x,c[7]=f,c[8]=l):l=c[8],c[9]!==u||c[10]!==h||c[11]!==i||c[12]!==l?(d=(0,s.jsxs)(e8,{id:h,selected:u,children:[i,l]}),c[9]=u,c[10]=h,c[11]=i,c[12]=l,c[13]=d):d=c[13],d}let li={component:(0,c.lazy)(()=>n.e(6205).then(n.bind(n,86205))),document:(0,c.lazy)(()=>Promise.resolve().then(function(){return ob})),documentList:(0,c.lazy)(()=>Promise.resolve().then(function(){return oy})),list:(0,c.lazy)(()=>n.e(1515).then(n.bind(n,31515)))},lr=(0,c.memo)(function(e){let t,n,i,r,l=(0,o.c)(23),{active:a,childItemId:d,groupIndex:u,index:p,itemId:m,pane:h,paneKey:f,params:x,payload:g,path:b,selected:y,siblingIndex:j}=e,v=li[h.type]||ln;l[0]!==f||l[1]!==b||l[2]!==y?(t=(0,s.jsx)(tR,{paneKey:f,path:b,selected:y}),l[0]=f,l[1]=b,l[2]=y,l[3]=t):t=l[3];let _=d||"";return l[4]!==v||l[5]!==a||l[6]!==p||l[7]!==m||l[8]!==h||l[9]!==f||l[10]!==y||l[11]!==_?(n=(0,s.jsx)(v,{childItemId:_,index:p,itemId:m,isActive:a,isSelected:y,paneKey:f,pane:h}),l[4]=v,l[5]=a,l[6]=p,l[7]=m,l[8]=h,l[9]=f,l[10]=y,l[11]=_,l[12]=n):n=l[12],l[13]!==t||l[14]!==n?(i=(0,s.jsx)(c.Suspense,{fallback:t,children:n}),l[13]=t,l[14]=n,l[15]=i):i=l[15],l[16]!==u||l[17]!==p||l[18]!==x||l[19]!==g||l[20]!==j||l[21]!==i?(r=(0,s.jsx)(le,{flatIndex:p,index:u,params:x,payload:g,siblingIndex:j,children:i}),l[16]=u,l[17]=p,l[18]=x,l[19]=g,l[20]=j,l[21]=i,l[22]=r):r=l[22],r},({params:e={},payload:t=null,...n},{params:i={},payload:r=null,...l})=>{if(!w(e,i)||!w(t,r))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(l)]))if(n[e]!==l[e])return!1;return!0});function ll(e){let t,n,i=(0,o.c)(10),{document:l}=e,a=(0,m.I07)().get(l._type),{t:d}=(0,m.Bdt)(r.Z7),{title:c}=tK();if(!a){let e,t;return i[0]!==l._type||i[1]!==d?(e=d("doc-title.unknown-schema-type.text",{schemaType:l._type}),i[0]=l._type,i[1]=d,i[2]=e):e=i[2],i[3]!==e?(t=(0,s.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==d||i[6]!==c?(t=c||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:d("doc-title.fallback.text")}),i[5]=d,i[6]=c,i[7]=t):t=i[7],i[8]!==t?(n=(0,s.jsx)(s.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let ls=(0,x.I4)(a.az)`
  margin-left: auto;
`,lo=x.I4.details`
  flex: none;

  &[open] ${ls} {
    transform: rotate(180deg);
  }
`,la=x.I4.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,ld=x.I4.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,a.D0)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,a.D0)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,a.D0)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,lc=(0,x.I4)(a.so)`
  min-height: 33px;
`,lu=e=>{let t,n,i,d,c,u,h=(0,o.c)(13),{t:f}=(0,m.Bdt)(r.Z7),x=e.totalCount-e.references.length;return x?(h[0]!==x||h[1]!==f?(t=f("confirm-delete-dialog.other-reference-count.title",{count:x}),h[0]=x,h[1]=f,h[2]=t):t=h[2],h[3]!==t?(n=(0,s.jsx)(a.EY,{size:1,muted:!0,children:t}),h[3]=t,h[4]=n):n=h[4],h[5]!==f?(i=f("confirm-delete-dialog.other-reference-count.tooltip"),h[5]=f,h[6]=i):i=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(a.EY,{size:1,muted:!0,children:(0,s.jsx)(p.YzR,{})}),h[7]=d):d=h[7],h[8]!==i?(c=(0,s.jsx)(l.m_,{portal:!0,placement:"top",content:i,children:d}),h[8]=i,h[9]=c):c=h[9],h[10]!==n||h[11]!==c?(u=(0,s.jsx)(a.az,{padding:2,children:(0,s.jsxs)(a.cV,{space:2,children:[n,c]})}),h[10]=n,h[11]=c,h[12]=u):u=h[12],u):null};function lp(e){let t,n,i,r,d,c,u=(0,o.c)(27),{icon:p,layout:h,presence:f,schemaType:x,value:g}=e,b=(0,m.r0j)(g._id),{perspectiveStack:y}=(0,m.QO2)();u[0]!==y||u[1]!==e.documentPreviewStore||u[2]!==x||u[3]!==g._id?(t=(0,m.TU6)(e.documentPreviewStore,x,g._id,y),u[0]=y,u[1]=e.documentPreviewStore,u[2]=x,u[3]=g._id,u[4]=t):t=u[4];let v=t;u[5]===Symbol.for("react.memo_cache_sentinel")?(n={snapshot:null,isLoading:!0,original:null},u[5]=n):n=u[5];let{snapshot:_,original:w,isLoading:S}=(0,j.J)(v,n);u[6]!==S||u[7]!==f||u[8]!==b.draft||u[9]!==b.published||u[10]!==b.versions?(i=S?null:(0,s.jsx)(l.vE,{children:(0,s.jsxs)(a.so,{align:"center",gap:3,children:[f&&f.length>0&&(0,s.jsx)(m.JEU,{presence:f}),(0,s.jsx)(m.ZDR,{draft:b.draft,published:b.published,versions:b.versions})]})}),u[6]=S,u[7]=f,u[8]=b.draft,u[9]=b.published,u[10]=b.versions,u[11]=i):i=u[11];let k=i;u[12]!==b.draft||u[13]!==b.published||u[14]!==b.versions?(r=(0,s.jsx)(m.Aii,{draft:b.draft,published:b.published,versions:b.versions}),u[12]=b.draft,u[13]=b.published,u[14]=b.versions,u[15]=r):r=u[15];let C=r;return u[16]!==w||u[17]!==_||u[18]!==g?(d=(0,m.ADU)({snapshot:_,original:w,fallback:g}),u[16]=w,u[17]=_,u[18]=g,u[19]=d):d=u[19],u[20]!==p||u[21]!==S||u[22]!==h||u[23]!==k||u[24]!==d||u[25]!==C?(c=(0,s.jsx)(m.m6P,{...d,isPlaceholder:S,icon:p,layout:h,status:k,tooltip:C}),u[20]=p,u[21]=S,u[22]=h,u[23]=k,u[24]=d,u[25]=C,u[26]=c):c=u[26],c}let lm=[];function lh(e){let t,n,i,r,l=(0,o.c)(16),{onClick:a,type:d,value:c}=e,u=c?._id;l[0]!==u?(t=(0,m.IMx)(u),l[0]=u,l[1]=t):t=l[1];let p=(0,m.cVB)(t),h=(0,m.yKO)(),{ReferenceChildLink:f}=tB();l[2]!==f||l[3]!==d?.name||l[4]!==c?._id?(n=function(e){return(0,s.jsx)(f,{documentId:c?._id,documentType:d?.name,parentRefPath:lm,...e})},l[2]=f,l[3]=d?.name,l[4]=c?._id,l[5]=n):n=l[5];let x=n,g=d?.icon,b=p?.length>0?p:lm;return l[6]!==h||l[7]!==g||l[8]!==b||l[9]!==d||l[10]!==c?(i=(0,s.jsx)(lp,{documentPreviewStore:h,icon:g,layout:"compact",presence:b,schemaType:d,value:c}),l[6]=h,l[7]=g,l[8]=b,l[9]=d,l[10]=c,l[11]=i):i=l[11],l[12]!==a||l[13]!==x||l[14]!==i?(r=(0,s.jsx)(m.Ns2,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),l[12]=a,l[13]=x,l[14]=i,l[15]=r):r=l[15],r}function lf(e){let t,n,i,c,u,h,f,x,g,b,y,j,v,_,w,S,k=(0,o.c)(59),{crossDatasetReferences:C,internalReferences:I,documentTitle:E,totalCount:z,action:T,datasetNames:A,hasUnknownDatasetNames:P,onReferenceLinkClick:R}=e,M=(0,m.I07)(),D=(0,d.dj)(),{t:$}=(0,m.Bdt)(r.Z7);k[0]!==R||k[1]!==M||k[2]!==$?(t=e=>{let t=M.get(e._type);return t?(0,s.jsx)(lh,{type:t,value:e,onClick:R}):(0,s.jsx)(a.az,{padding:2,children:(0,s.jsx)(m.m6P,{icon:p.KSC,title:$("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:$("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},k[0]=R,k[1]=M,k[2]=$,k[3]=t):t=k[3];let B=t;if(I?.totalCount===0&&C?.totalCount===0){let e,t;return k[4]!==E?(e={DocumentTitle:()=>(0,s.jsx)("strong",{children:E})},k[4]=E,k[5]=e):e=k[5],k[6]!==T||k[7]!==$||k[8]!==e?(t=(0,s.jsx)(a.EY,{as:"p",size:1,children:(0,s.jsx)(m.HTc,{t:$,i18nKey:"confirm-delete-dialog.confirmation.text",context:T,components:e})}),k[6]=T,k[7]=$,k[8]=e,k[9]=t):t=k[9],t}k[10]!==P?(n=P?["unavailable"]:[],k[10]=P,k[11]=n):n=k[11],k[12]!==A||k[13]!==n?(i=[...A,...n],k[12]=A,k[13]=n,k[14]=i):i=k[14];let Y=i,L=Y.length,O=Y.join(", "),H=P&&Y.length?"unavailable":"";k[15]!==Y.length||k[16]!==$||k[17]!==O||k[18]!==H?(c=$("confirm-delete-dialog.cdr-summary.subtitle",{count:L,datasets:O,context:H}),k[15]=Y.length,k[16]=$,k[17]=O,k[18]=H,k[19]=c):c=k[19];let V=c;return k[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(a.EY,{"aria-hidden":"true",size:1,children:(0,s.jsx)(p.sAQ,{})}),k[20]=u):u=k[20],k[21]!==E?(h={DocumentTitle:()=>E},k[21]=E,k[22]=h):h=k[22],k[23]!==z?(f={count:z},k[23]=z,k[24]=f):f=k[24],k[25]!==$||k[26]!==f||k[27]!==h?(x=(0,s.jsx)(a.Zp,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,s.jsxs)(a.so,{children:[u,(0,s.jsx)(a.az,{flex:1,marginLeft:3,children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:h,t:$,values:f})})})]})}),k[25]=$,k[26]=f,k[27]=h,k[28]=x):x=k[28],k[29]!==E?(g={DocumentTitle:()=>E},k[29]=E,k[30]=g):g=k[30],k[31]!==T||k[32]!==$||k[33]!==g?(b=(0,s.jsx)(a.az,{flex:"none",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:$,context:T,components:g})})}),k[31]=T,k[32]=$,k[33]=g,k[34]=b):b=k[34],k[35]!==I||k[36]!==B?(y=I.totalCount>0&&(0,s.jsxs)(a.BJ,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[I?.references.map(e=>(0,s.jsx)(a.az,{as:"li",children:B(e)},e._id)),I.totalCount>I.references.length&&(0,s.jsx)(a.az,{as:"li",padding:3,children:(0,s.jsx)(lu,{...I})})]}),k[35]=I,k[36]=B,k[37]=y):y=k[37],k[38]!==C||k[39]!==V||k[40]!==I.totalCount||k[41]!==Y.length||k[42]!==$||k[43]!==D?(j=C.totalCount>0&&(0,s.jsxs)(lo,{"data-testid":"cross-dataset-references",style:{borderTop:I.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,s.jsx)(la,{children:(0,s.jsx)(a.Zp,{as:"a",marginTop:2*(I.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,s.jsxs)(a.so,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(p.So9,{})}),(0,s.jsxs)(a.BJ,{space:2,children:[(0,s.jsx)(a.EY,{textOverflow:"ellipsis",size:1,children:$("confirm-delete-dialog.cdr-summary.title",{count:Y.length,documentCount:$("confirm-delete-dialog.cdr-summary.document-count",{count:C.totalCount})})}),(0,s.jsx)(a.EY,{title:V,textOverflow:"ellipsis",size:1,muted:!0,children:V})]}),(0,s.jsx)(ls,{children:(0,s.jsx)(a.EY,{muted:!0,size:1,children:(0,s.jsx)(p.D3D,{})})})]})})}),(0,s.jsxs)(a.az,{overflow:"auto",paddingTop:2,children:[(0,s.jsxs)(ld,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:(0,s.jsx)(a.EY,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:$("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(a.EY,{muted:!0,size:1,weight:"medium",children:$("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(a.EY,{muted:!0,size:1,weight:"medium",children:$("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,s.jsx)("tbody",{children:C.references.filter(lx).map((e,t)=>{let{projectId:n,datasetName:i,documentId:r}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(a.EY,{size:1,children:n})}),(0,s.jsx)("td",{children:(0,s.jsx)(a.EY,{size:1,children:i||"unavailable"})}),(0,s.jsx)("td",{children:(0,s.jsxs)(lc,{align:"center",gap:2,justify:"flex-end",children:[(0,s.jsx)(a.EY,{textOverflow:"ellipsis",size:1,children:r||"unavailable"}),r&&(0,s.jsx)(l.$n,{mode:"bleed",icon:p.TdU,tooltipProps:{content:$("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(r).catch(()=>{D.push({status:"error",title:$("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${r}-${t}`)})})]}),(0,s.jsx)(lu,{...C})]})]}),k[38]=C,k[39]=V,k[40]=I.totalCount,k[41]=Y.length,k[42]=$,k[43]=D,k[44]=j):j=k[44],k[45]!==y||k[46]!==j?(v=(0,s.jsx)(a.Zp,{radius:2,shadow:1,flex:"auto",padding:2,children:(0,s.jsxs)(a.so,{direction:"column",children:[y,j]})}),k[45]=y,k[46]=j,k[47]=v):v=k[47],k[48]!==E?(_={DocumentTitle:()=>E},k[48]=E,k[49]=_):_=k[49],k[50]!==T||k[51]!==$||k[52]!==_?(w=(0,s.jsx)(a.az,{flex:"none",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:$,context:T,components:_})})}),k[50]=T,k[51]=$,k[52]=_,k[53]=w):w=k[53],k[54]!==x||k[55]!==b||k[56]!==v||k[57]!==w?(S=(0,s.jsxs)(a.so,{direction:"column",gap:4,children:[x,b,v,w]}),k[54]=x,k[55]=b,k[56]=v,k[57]=w,k[58]=S):S=k[58],S}function lx(e){return"projectId"in e}let lg=()=>(i||(i=(0,U.R)(document,"visibilitychange").pipe((0,z.Z)(null),(0,I.T)(()=>"visible"===document.visibilityState),(0,P.F)(),(0,R.n)(e=>e?(0,G.O)(0,5e3):Q.w),(0,M.t)({refCount:!0,bufferSize:1}))),i),lb=(0,m.R11)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),ly=(0,m.R11)(([e,t])=>lg().pipe((0,R.n)(()=>(function(e,t){let{versionedClient:n}=t;return lg().pipe((0,R.n)(()=>(function(e,{versionedClient:t}){let n=(0,m.T4)(e),i=(0,m.IMx)(e),r={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(r).pipe((0,I.T)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,R.n)(e=>{if(!e)return(0,Z.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,E.W)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,Z.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function lj(e){return"string"!=typeof e.datasetName}function lv(e){return!!e&&""!==e}function l_(e){return e?.datasetName||""}function lw(e){return e.projectId}let lS=(0,x.I4)(a.az)`
  box-sizing: border-box;
`,lk=(0,x.I4)(a.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function lC(e){let t,n,i,a,d,u,p,h,f,x=(0,o.c)(40),{id:g,type:b,action:y,onCancel:j,onConfirm:v}=e,_=void 0===y?"delete":y,{t:w}=(0,m.Bdt)(r.Z7),S=`deletion-confirmation-${(0,c.useId)()}`,{internalReferences:k,crossDatasetReferences:C,isLoading:I,totalCount:E,projectIds:z,datasetNames:T,hasUnknownDatasetNames:A}=function(e){let t,n,i,r,l,s,a,d,c=(0,o.c)(24),u=(0,m.tH7)(m.miu),p=(0,m.q3J)();c[0]!==e?(t=(0,m.IMx)(e),c[0]=e,c[1]=t):t=c[1];let h=t;c[2]!==p||c[3]!==h?(n=[h,p],c[2]=p,c[3]=h,c[4]=n):n=c[4];let[f,x]=lb(n);c[5]!==h||c[6]!==u?(i=[h,u],c[5]=h,c[6]=u,c[7]=i):i=c[7];let[g,b]=ly(i);c[8]!==g?.references?(r=()=>Array.from(new Set(g?.references.map(lw).filter(Boolean))).sort(),c[8]=g?.references,c[9]=r):r=c[9],c[10]!==r?(l=r(),c[10]=r,c[11]=l):l=c[11];let y=l;c[12]!==g?.references?(s=Array.from(new Set(g?.references.map(l_).filter(lv))).sort(),c[12]=g?.references,c[13]=s):s=c[13];let j=s;c[14]!==g?.references?(a=()=>!!g?.references.some(lj),c[14]=g?.references,c[15]=a):a=c[15];let v=a(),_=(f?.totalCount||0)+(g?.totalCount||0),w=x||b;return c[16]!==g||c[17]!==j||c[18]!==v||c[19]!==f||c[20]!==y||c[21]!==_||c[22]!==w?(d={totalCount:_,projectIds:y,datasetNames:j,hasUnknownDatasetNames:v,internalReferences:f,crossDatasetReferences:g,isLoading:w},c[16]=g,c[17]=j,c[18]=v,c[19]=f,c[20]=y,c[21]=_,c[22]=w,c[23]=d):d=c[23],d}(g);x[0]!==g||x[1]!==b?(t={_id:g,_type:b},x[0]=g,x[1]=b,x[2]=t):t=x[2];let P=t;x[3]!==P?(n=(0,s.jsx)(ll,{document:P}),x[3]=P,x[4]=n):n=x[4];let R=n,M=!I;return x[5]!==_||x[6]!==w?(i=w("confirm-delete-dialog.header.text",{context:_}),x[5]=_,x[6]=w,x[7]=i):i=x[7],x[8]!==w?(a=w("confirm-delete-dialog.cancel-button.text"),x[8]=w,x[9]=a):a=x[9],x[10]!==j||x[11]!==a?(d={onClick:j,text:a},x[10]=j,x[11]=a,x[12]=d):d=x[12],x[13]!==_||x[14]!==v||x[15]!==M||x[16]!==w||x[17]!==E?(u=M?{text:w(E>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:v}:void 0,x[13]=_,x[14]=v,x[15]=M,x[16]=w,x[17]=E,x[18]=u):u=x[18],x[19]!==d||x[20]!==u?(p={cancelButton:d,confirmButton:u},x[19]=d,x[20]=u,x[21]=p):p=x[21],x[22]!==_||x[23]!==C||x[24]!==T||x[25]!==R||x[26]!==A||x[27]!==k||x[28]!==I||x[29]!==j||x[30]!==z||x[31]!==w||x[32]!==E?(h=(0,s.jsx)(lS,{children:C&&k&&!I?(0,s.jsx)(lf,{crossDatasetReferences:C,internalReferences:k,documentTitle:R,isLoading:I,totalCount:E,action:_,projectIds:z,datasetNames:T,hasUnknownDatasetNames:A,onReferenceLinkClick:j}):(0,s.jsx)(lk,{"data-testid":"loading-container",children:(0,s.jsx)(m.gd4,{showText:!0,title:w("confirm-delete-dialog.loading.text")})})}),x[22]=_,x[23]=C,x[24]=T,x[25]=R,x[26]=A,x[27]=k,x[28]=I,x[29]=j,x[30]=z,x[31]=w,x[32]=E,x[33]=h):h=x[33],x[34]!==S||x[35]!==j||x[36]!==h||x[37]!==i||x[38]!==p?(f=(0,s.jsx)(l.lG,{width:1,id:S,header:i,footer:p,onClose:j,onClickOutside:j,children:h}),x[34]=S,x[35]=j,x[36]=h,x[37]=i,x[38]=p,x[39]=f):f=x[39],f}function lI(e){let t,n,i=(0,o.c)(6),{t:d}=(0,m.Bdt)(r.Z7),u=(0,c.useId)(),[p,h]=(0,c.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(null),i[0]=t):t=i[0];let f=t;return i[1]!==p||i[2]!==u||i[3]!==e||i[4]!==d?(n=p?(0,s.jsx)(l.lG,{id:`dialog-error-${u}`,"data-testid":"confirm-delete-error-dialog",header:d("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:d("confirm-delete-dialog.error.retry-button.text"),onClick:f,tone:"default"}},onClose:e.onCancel,children:(0,s.jsx)(a.az,{padding:4,children:(0,s.jsx)(a.EY,{size:1,children:d("confirm-delete-dialog.error.message.text")})})}):(0,s.jsx)(l.tH,{onCatch:h,children:(0,s.jsx)(lC,{...e})}),i[1]=p,i[2]=u,i[3]=e,i[4]=d,i[5]=n):n=i[5],n}let lE=(0,c.forwardRef)(function(e,t){let n,i,r,a,d=(0,o.c)(10);d[0]!==e?({intent:n,...i}=e,d[0]=e,d[1]=n,d[2]=i):(n=d[1],i=d[2]),d[3]!==n?(r=(0,c.forwardRef)(function(e,t){return(0,s.jsx)(v.RZ,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),d[3]=n,d[4]=r):r=d[4];let u=r;return d[5]!==u||d[6]!==e.disabled||d[7]!==t||d[8]!==i?(a=e.disabled?(0,s.jsx)(l.$n,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,s.jsx)(l.$n,{...i,as:u,"data-as":"a",ref:t}),d[5]=u,d[6]=e.disabled,d[7]=t,d[8]=i,d[9]=a):a=d[9],a});function lz(e){let t,n,i,a=(0,o.c)(12),{reveal:d,context:c,loading:u,children:p}=e,h=(0,m.iZK)(),{t:f}=(0,m.Bdt)(r.Z7);if(!d){let e;return a[0]!==p?(e=(0,s.jsx)(s.Fragment,{children:p}),a[0]=p,a[1]=e):e=a[1],e}return a[2]!==c||a[3]!==h||a[4]!==u||a[5]!==f?(t=u?f("insufficient-permissions-message-tooltip.loading-text"):(0,s.jsx)(m.TLO,{context:c,currentUser:h}),a[2]=c,a[3]=h,a[4]=u,a[5]=f,a[6]=t):t=a[6],a[7]!==p?(n=(0,s.jsx)("div",{children:p}),a[7]=p,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,s.jsx)(l.m_,{content:t,portal:!0,children:n}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}let lT={constrainSize:!0,placement:"bottom",portal:!0},lA=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let r={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[r,t.parameters]:r,searchParams:n?[["perspective",n]]:void 0}};function lP(e){let t,n,i,d,u,h,f,x,g=(0,o.c)(60),{templateItems:b}=e,y=(0,m.bgA)(),{selectedReleaseId:j}=(0,m.QO2)(),{t:_}=(0,m.Bdt)(r.Z7);g[0]!==b||g[1]!==y?(t=[...b,...y],g[0]=b,g[1]=y,g[2]=t):t=g[2];let w=(0,m.Bvg)(t);g[3]!==b?(n={templateItems:b},g[3]=b,g[4]=n):n=g[4];let[S,k]=(0,m.CzS)(n),C=!k&&S?.length!==0&&S?.every(lM);e:{let e;if(!S){let e;g[5]===Symbol.for("react.memo_cache_sentinel")?(e={},g[5]=e):e=g[5],i=e;break e}g[6]!==S?(e=S.reduce(lR,{}),g[6]=S,g[7]=e):e=g[7],i=e}let I=i;if(0===b.length)return null;if(C){let e,t,n;return g[8]!==_?(e=_("pane-header.disabled-created-button.aria-label"),g[8]=_,g[9]=e):e=g[9],g[10]!==e?(t=(0,s.jsx)(l.$n,{"aria-label":e,icon:p.REV,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),g[10]=e,g[11]=t):t=g[11],g[12]!==k||g[13]!==t?(n=(0,s.jsx)(lz,{context:"create-document-type",reveal:!0,loading:k,children:t}),g[12]=k,g[13]=t,g[14]=n):n=g[14],n}if(1===b.length){let e,t,n,i,r,l,o=b[0],a=!I[o.id]?.granted;g[15]!==o||g[16]!==j||g[17]!==y?(e=lA(y,o,j),g[15]=o,g[16]=j,g[17]=y,g[18]=e):e=g[18];let d=e;if(!d)return null;g[19]!==o||g[20]!==w?(t=w(o),g[19]=o,g[20]=w,g[21]=t):t=g[21];let c=t.title,u=o.icon||p.REV;return g[22]!==_?(n=_("pane-header.create-new-button.tooltip"),g[22]=_,g[23]=n):n=g[23],g[24]!==n?(i={content:n},g[24]=n,g[25]=i):i=g[25],g[26]!==a||g[27]!==d||g[28]!==t.title||g[29]!==u||g[30]!==i?(r=(0,s.jsx)(lE,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),g[26]=a,g[27]=d,g[28]=t.title,g[29]=u,g[30]=i,g[31]=r):r=g[31],g[32]!==a||g[33]!==k||g[34]!==r?(l=(0,s.jsx)(lz,{reveal:a,loading:k,context:"create-document-type",children:r}),g[32]=a,g[33]=k,g[34]=r,g[35]=l):l=g[35],l}if(g[36]!==_?(d=_("pane-header.create-new-button.tooltip"),g[36]=_,g[37]=d):d=g[37],g[38]!==d?(u=(0,s.jsx)(l.$n,{icon:p.REV,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:d}}),g[38]=d,g[39]=u):u=g[39],g[40]!==w||g[41]!==k||g[42]!==I||g[43]!==j||g[44]!==_||g[45]!==b||g[46]!==y){let e;g[48]!==w||g[49]!==k||g[50]!==I||g[51]!==j||g[52]!==_||g[53]!==y?(e=(e,t)=>{let n=!I[e.id]?.granted,i=lA(y,e,j),r=y.find(t=>t.id===e.templateId);if(!r||!i)return null;let o=(0,c.forwardRef)((e,t)=>n?(0,s.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,s.jsx)(v.RZ,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));o.displayName="Link";let{title:a}=w({...e,title:e.title||w(r).title});return(0,s.jsx)(lz,{context:"create-document-type",reveal:n,loading:k,children:(0,s.jsx)(l.Dr,{as:o,"data-as":n?"button":"a",text:a,"aria-label":n?_("pane-header.disabled-created-button.aria-label"):a,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},g[48]=w,g[49]=k,g[50]=I,g[51]=j,g[52]=_,g[53]=y,g[54]=e):e=g[54],h=b.map(e),g[40]=w,g[41]=k,g[42]=I,g[43]=j,g[44]=_,g[45]=b,g[46]=y,g[47]=h}else h=g[47];return g[55]!==h?(f=(0,s.jsx)(a.W1,{children:h}),g[55]=h,g[56]=f):f=g[56],g[57]!==u||g[58]!==f?(x=(0,s.jsx)(l.IU,{button:u,id:"create-menu",menu:f,popover:lT}),g[57]=u,g[58]=f,g[59]=x):x=g[59],x}function lR(e,t){return e[t.id]=t,e}function lM(e){return!e.granted}function lD(e){return null!=e}let l$=(0,c.memo)(function(e){let{initialValueTemplateItems:t=m.Mlv,menuItems:n=m.Mlv,menuItemGroups:i=m.Mlv,actionHandlers:r=m.MlF}=e,l=(0,m.bgA)(),o=(0,c.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in r))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?r[e.action]:null;return!!t&&(t(e.params),!0)},[r]),d=(0,c.useMemo)(()=>nQ({actionHandler:o,menuItemGroups:i,menuItems:n.filter(e=>e.intent?.type!=="create")}),[o,i,n]),u=(0,c.useMemo)(()=>d.filter(nU),[d]),p=(0,c.useMemo)(()=>d.filter(nG),[d]),h=(0,c.useMemo)(()=>n.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,r=Array.isArray(n)?n[1]:void 0,s=i.template||i.type;if(!s)return null;let o=l.find(e=>e.id===s);return o?{item:e,template:o,templateParams:r,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(lD).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:r})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:r,schemaType:n.schemaType})),[n,l]),f=(0,c.useMemo)(()=>es([...h,...t],e=>(e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))})([e.initialDocumentId,e.templateId,e.parameters])),[h,t]);return(0,s.jsxs)(a.so,{gap:1,children:[(0,s.jsx)(lP,{templateItems:f}),u.map(e=>(0,s.jsx)(tv,{node:e},e.key)),p.length>0&&(0,s.jsx)(tc,{nodes:p})]})});function lB(e){let t,n,i,l,a,d,c,u=(0,o.c)(16),{t:p}=(0,m.Bdt)(r.Z7),{layout:h,value:f}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==f._type?(n={documentType:f._type},u[1]=f._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,s.jsx)("em",{children:(0,s.jsx)(m.HTc,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},u[6]=l):l=u[6],u[7]!==f._id?(a={documentId:f._id},u[7]=f._id,u[8]=a):a=u[8],u[9]!==p||u[10]!==a?(d=(0,s.jsx)(m.HTc,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:a}),u[9]=p,u[10]=a,u[11]=d):d=u[11],u[12]!==h||u[13]!==i||u[14]!==d?(c=(0,s.jsx)(m.m6P,{title:i,subtitle:d,media:lY,layout:h}),u[12]=h,u[13]=i,u[14]=d,u[15]=c):c=u[15],c}function lY(){return(0,s.jsx)(p.sAQ,{})}function lL(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function lO(e){let t,n,i,r,l,d,u,f,x=(0,o.c)(42),{icon:g,id:b,layout:y,pressed:j,schemaType:v,selected:_,title:w,value:S,margin:k,marginBottom:C,marginTop:I}=e,E=void 0===y?"default":y,z=(0,m.I07)(),T=(0,m.yKO)(),{ChildLink:A}=tB(),P=(0,m.cVB)(b),R=!!(v&&v.name&&z.get(v.name)),[M,D]=(0,c.useState)(!1);e:{let e,n,i,r;if(S&&(0,h.ME)(S)){let e,n;if(!v||!R){let e;x[0]!==S?(e=(0,s.jsx)(lB,{value:S}),x[0]=S,x[1]=e):e=x[1],t=e;break e}x[2]!==g||x[3]!==v?(e=lL(g,v,p.pyG),x[2]=g,x[3]=v,x[4]=e):e=x[4],x[5]!==P||x[6]!==T||x[7]!==E||x[8]!==v||x[9]!==e||x[10]!==S?(n=(0,s.jsx)(lp,{documentPreviewStore:T,icon:e,layout:E,schemaType:v,value:S,presence:P}),x[5]=P,x[6]=T,x[7]=E,x[8]=v,x[9]=e,x[10]=S,x[11]=n):n=x[11],t=n;break e}x[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},x[12]=e):e=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(a.az,{style:e,children:(0,s.jsx)(a.EY,{muted:!0,size:1,children:(0,s.jsx)(p.vKP,{})})}),x[13]=n):n=x[13],x[14]!==g||x[15]!==v?(i=lL(g,v,p.sjq),x[14]=g,x[15]=v,x[16]=i):i=x[16],x[17]!==i||x[18]!==w?(r=(0,s.jsx)(m.m6P,{status:n,icon:i,layout:"compact",title:w}),x[17]=i,x[18]=w,x[19]=r):r=x[19],t=r}let $=t;x[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey)return void D(!1);D(!0)},x[20]=n):n=x[20];let B=n;x[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>D(!1),x[21]=i):i=x[21],x[22]!==_?(r=[_],x[22]=_,x[23]=r):r=x[23],(0,c.useEffect)(i,r);let[Y,L]=(0,c.useState)(!1),O=(0,c.useRef)(null);x[24]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{O.current=setTimeout(()=>(0,c.startTransition)(()=>L(!0)),400)},x[24]=l):l=x[24];let H=l;x[25]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{O.current&&clearTimeout(O.current),(0,c.startTransition)(()=>L(!1))},x[25]=d):d=x[25];let V=d,Z=`pane-item-${w}`,N=_||M;return x[26]!==b||x[27]!==Y||x[28]!==v||x[29]!==S?(u=Y&&v?.name&&S&&(0,h.ME)(S)&&(0,s.jsx)(lH,{documentId:b,documentType:v.name}),x[26]=b,x[27]=Y,x[28]=v,x[29]=S,x[30]=u):u=x[30],x[31]!==b||x[32]!==k||x[33]!==C||x[34]!==I||x[35]!==j||x[36]!==$||x[37]!==u||x[38]!==Z||x[39]!==A||x[40]!==N?(f=(0,s.jsxs)(m.Ns2,{"data-testid":Z,__unstable_focusRing:!0,as:A,childId:b,"data-as":"a",margin:k,marginBottom:C,marginTop:I,onClick:B,onMouseEnter:H,onMouseLeave:V,pressed:j,radius:2,selected:N,sizing:"border",tabIndex:-1,tone:"inherit",children:[$,u]}),x[31]=b,x[32]=k,x[33]=C,x[34]=I,x[35]=j,x[36]=$,x[37]=u,x[38]=Z,x[39]=A,x[40]=N,x[41]=f):f=x[41],f}function lH(e){let t,n=(0,o.c)(2),{documentId:i,documentType:r}=e;return n[0]!==i?(t=(0,m.IMx)(i),n[0]=i,n[1]=t):t=n[1],(0,m.zX2)(t,r),null}lH.displayName="PreloadDocumentPane";let lV=(0,c.memo)(e=>{let t,n,i=(0,o.c)(10),{actions:r,children:l,actionProps:a,onActionComplete:d,group:c}=e;return i[0]!==a.id||i[1]!==a.liveEditSchemaType||i[2]!==l?(t=e=>{let{states:t}=e;return(0,s.jsx)(lN,{states:t,documentId:a.liveEditSchemaType?(0,m.IMx)(a.id):(0,m.T4)(a.id),children:l})},i[0]=a.id,i[1]=a.liveEditSchemaType,i[2]=l,i[3]=t):t=i[3],i[4]!==a||i[5]!==r||i[6]!==c||i[7]!==d||i[8]!==t?(n=(0,s.jsx)(m.N6R,{onReset:d,hooks:r,args:a,group:c,children:t}),i[4]=a,i[5]=r,i[6]=c,i[7]=d,i[8]=t,i[9]=n):n=i[9],n});lV.displayName="Memo(RenderActionCollectionState)";let lZ=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],lN=e=>{let t,n=(0,o.c)(9),{states:i,children:l,documentId:s}=e,{t:a}=(0,m.Bdt)(r.Z7),{isLinked:d}=(0,m.G2c)(s);e:{let e;if(d){let e;if(n[0]!==l||n[1]!==i||n[2]!==a){let t;n[4]!==a?(t=e=>e.action&&lZ.includes(e.action)?e:{...e,disabled:!0,title:a("action.disabled-by-canvas.tooltip")},n[4]=a,n[5]=t):t=n[5],e=l({states:i.map(t)}),n[0]=l,n[1]=i,n[2]=a,n[3]=e}else e=n[3];t=e;break e}n[6]!==l||n[7]!==i?(e=l({states:i}),n[6]=l,n[7]=i,n[8]=e):e=n[8],t=e}return t},lF=(0,c.memo)(e=>{let t,n=(0,o.c)(4),{badges:i,children:r,badgeProps:l}=e;return n[0]!==l||n[1]!==i||n[2]!==r?(t=(0,s.jsx)(m.N6R,{hooks:i,args:l,children:r}),n[0]=l,n[1]=i,n[2]=r,n[3]=t):t=n[3],t});lF.displayName="Memo(RenderBadgeCollectionState)";let lK={by:[{field:"_updatedAt",direction:"desc"}]},lW={},lJ=(0,x.I4)(a.az)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,lU=(0,x.I4)(a.az)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,lG=[...Array(30).keys()];function lQ(e){let t,n,i=(0,o.c)(4),{layout:r}=e;return i[0]!==r?(t=lG.map(e=>(0,s.jsx)(m.m6P,{isPlaceholder:!0,layout:r},e)),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(a.BJ,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function lq(e){let t,n,i,l,d,u,p,h=(0,o.c)(66),{childItemId:f,error:x,isRetrying:g,autoRetry:b,filterIsSimpleTypeConstraint:y,hasMaxItems:j,hasSearchQuery:v,isActive:_,isLazyLoading:w,muted:S,isLoading:k,isConnected:C,retryCount:I,canRetry:E,items:z,layout:T,loadingVariant:A,onEndReached:P,onRetry:R,paneTitle:M,searchInputElement:D,showIcons:$}=e,B=(0,m.I07)(),{collapsed:Y}=e4(),{collapsed:L,index:O}=te(),[H,V]=(0,c.useState)(!L),{t:Z}=(0,m.Bdt)(r.Z7);h[0]!==P||h[1]!==H?(t=()=>{H&&P()},h[0]=P,h[1]=H,h[2]=t):t=h[2];let N=t;h[3]!==L?(n=()=>{if(L)return;let e=setTimeout(()=>{V(!0)},0);return()=>{clearTimeout(e)}},h[3]=L,h[4]=n):n=h[4],h[5]!==L||h[6]!==z?(i=[L,z],h[5]=L,h[6]=z,h[7]=i):i=h[7],(0,c.useEffect)(n,i),h[8]!==f||h[9]!==j||h[10]!==_||h[11]!==w||h[12]!==z.length||h[13]!==T||h[14]!==B||h[15]!==$||h[16]!==Z?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,m.IMx)(e._id),r=f===i,l=!_&&r,o=_&&r,d=n===z.length-1,c=d&&w,u=d&&j;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lO,{icon:!1!==$&&void 0,id:i,layout:T,marginBottom:1,pressed:l,schemaType:B.get(e._type),selected:o,value:e}),c&&(0,s.jsx)(m.gd4,{}),u&&(0,s.jsx)(a.az,{marginY:1,paddingX:3,paddingY:4,children:(0,s.jsx)(a.EY,{align:"center",muted:!0,size:1,children:Z("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},h[8]=f,h[9]=j,h[10]=_,h[11]=w,h[12]=z.length,h[13]=T,h[14]=B,h[15]=$,h[16]=Z,h[17]=l):l=h[17];let F=l;e:{let e,t;if(v){let e,t;h[18]!==Z?(e=Z("panes.document-list-pane.no-documents.text"),h[18]=Z,h[19]=e):e=h[19],h[20]!==e?(t=(0,s.jsx)(a.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(a.mc,{width:1,children:(0,s.jsx)(a.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(a.EY,{align:"center",muted:!0,children:e})})})}),h[20]=e,h[21]=t):t=h[21],d=t;break e}h[22]!==y||h[23]!==Z?(e=Z(y?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),h[22]=y,h[23]=Z,h[24]=e):e=h[24],h[25]!==e?(t=(0,s.jsx)(a.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(a.mc,{width:1,children:(0,s.jsx)(a.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(a.EY,{align:"center",muted:!0,children:e})})})}),h[25]=e,h[26]=t):t=h[26],d=t}let K=d;t:{let e,t;if(!H){u=null;break t}let n=window.navigator.onLine;if(x){let e,t,i,r,l,o,d;h[27]!==Z?(e=Z("panes.document-list-pane.error.title"),h[27]=Z,h[28]=e):e=h[28],h[29]!==e?(t=(0,s.jsx)(a.DZ,{as:"h3",children:e}),h[29]=e,h[30]=t):t=h[30],h[31]!==x||h[32]!==Z?(i=m.Cu5?(0,s.jsx)(m.HTc,{t:Z,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:x.message},components:{Code:lX}}):Z(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),h[31]=x,h[32]=Z,h[33]=i):i=h[33],h[34]!==i?(r=(0,s.jsx)(a.EY,{as:"p",children:i}),h[34]=i,h[35]=r):r=h[35];let c=n&&E?R:void 0;h[36]!==x||h[37]!==g||h[38]!==c?(l=(0,s.jsx)(m.kbS,{error:x,eventId:null,onRetry:c,isRetrying:g}),h[36]=x,h[37]=g,h[38]=c,h[39]=l):l=h[39],h[40]!==b||h[41]!==E||h[42]!==g||h[43]!==I||h[44]!==Z?(o=E?(0,s.jsx)(a.EY,{as:"p",muted:!0,size:1,children:g?Z("panes.document-list-pane.error.retrying",{count:I}):b?Z("panes.document-list-pane.error.will-retry-automatically",{count:I}):Z("panes.document-list-pane.error.max-retries-attempted",{count:I})}):null,h[40]=b,h[41]=E,h[42]=g,h[43]=I,h[44]=Z,h[45]=o):o=h[45],h[46]!==l||h[47]!==o||h[48]!==t||h[49]!==r?(d=(0,s.jsx)(a.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(a.mc,{width:1,children:(0,s.jsxs)(a.BJ,{paddingX:4,paddingY:5,space:4,children:[t,r,l,o]})})}),h[46]=l,h[47]=o,h[48]=t,h[49]=r,h[50]=d):d=h[50],u=d;break t}if(C&&!k&&0===z.length){u=K;break t}if("initial"===A&&k){let e;h[51]!==T?(e=(0,s.jsx)(tT,{ms:300,children:(0,s.jsx)(lQ,{layout:T})}),h[51]=T,h[52]=e):e=h[52],u=e;break t}if("spinner"===A&&k){u=null;break t}let i=`${O}-${L}`,r=S?.8:1;h[53]!==N||h[54]!==z||h[55]!==i||h[56]!==M||h[57]!==F||h[58]!==D?(e=(0,s.jsx)(lU,{children:(0,s.jsx)(m.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:M,canReceiveFocus:!0,inputElement:D,itemHeight:51,items:z,onEndReached:N,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:F,wrapAround:!1},i)}),h[53]=N,h[54]=z,h[55]=i,h[56]=M,h[57]=F,h[58]=D,h[59]=e):e=h[59],h[60]!==r||h[61]!==e?(t=(0,s.jsx)(lJ,{overflow:"hidden",height:"fill",$opacity:r,children:e}),h[60]=r,h[61]=e,h[62]=t):t=h[62],u=t}let W=u,J=Y||"initial"===A?"hidden":"auto";return h[63]!==W||h[64]!==J?(p=(0,s.jsx)(tt,{"data-testid":"document-list-pane",overflow:J,children:W}),h[63]=W,h[64]=J,h[65]=p):p=h[65],p}function lX(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function l0(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,ek.qg)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let l1=(0,m.pTS)({maxSize:100});function l2(e){let{client:t,schema:n,sort:i,perspective:l,limit:s,params:o,filter:a,searchQuery:d,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,h=i.by,f=i?.extendedProjection,x=(0,q.v)(()=>t.listen(`*[${a}]`,o,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,L.Z)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,X.$)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,X.$)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,Z.of)(e)}),(0,O.u)()),[g,b]=(0,ee.j)(x,e=>"welcome"===e.type),y=JSON.stringify({fiilter:a,limit:s,params:o,searchQuery:d,perspective:l,sort:i,staticTypeNames:c});return(0,N.h)(g,b.pipe((0,et.c)(1e3,en.E,{leading:!0,trailing:!0}))).pipe((0,eE.L)(e=>(c?(0,Z.of)(c):t.observable.fetch(`array::unique(*[${a}][]._type)`,o)).pipe((0,L.Z)(x=>{let g=(0,m._oG)(n,c||[]).filter(e=>!!x.includes(e.name)&&((0,r.Mq)(e,i.by,!0),!0)),b=(0,m.XZv)(g,t,{filter:a,params:o,strategy:p,maxDepth:u}),y=()=>b({query:d||"",types:g},{__unstable_extendedProjection:f,comments:[`findability-source: ${d?"list-query":"list"}`],limit:s,skipSortByScore:!0,sort:h,perspective:l}).pipe((0,I.T)(e=>e.hits.map(({hit:e})=>e)),(0,I.T)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,G.O)(1200).pipe((0,L.Z)(y)):"reconnect"===e.type?(0,Z.of)(e):y()}))),(0,D.S)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,B.p)(e=>null!==e),l1(y),(0,I.T)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let l3={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},l4="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",l5=(0,x.i7)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,l6=(0,x.i7)`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,l7=(0,x.I4)(p.Nl1)`
  animation: ${l5} 500ms linear infinite;
`,l8=(0,x.I4)(p.Nl1)`
  animation: ${l5} 1500ms linear infinite;
  opacity: 0.4;
`,l9=(0,x.I4)(p.Nl1)`
  animation:
    ${l5} 1500ms linear infinite,
    ${l6} 1000ms linear;
  opacity: 0.4;
`,se=(0,c.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:l,sortOrder:o,layout:d}=e,u=(0,m.I07)(),f=(0,m.K0D)(),{perspectiveStack:x}=(0,m.QO2)(),{displayOptions:g,options:b}=i,{apiVersion:y,filter:v}=b,_=sE(b.params||lW),w=(0,c.useMemo)(()=>{let e=l0(v,_);return e?.length===1?e[0]:null},[v,_]),S=g?.showIcons!==!1,{t:k}=(0,m.Bdt)(r.Z7),{title:C}=(0,m.FP1)(i),[E,z]=(0,c.useState)(""),[T,P]=(0,c.useState)(""),[V,K]=(0,c.useState)(null),W=w&&o?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=el.sH(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,h.tA)(e)||(0,h.wr)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,h.do)(t)){i=t;continue}let[r,l]=t.to||[];if(l||!r)return;i=r}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(o,u.get(w)):o,J=(0,m.$6H)(W),{error:Q,isLoadingFullList:q,isLoading:X,items:ee,fromCache:et,isRetrying:en,autoRetry:es,canRetry:eo,retryCount:ea,connected:ed,onLoadFullList:ec,onRetry:eu}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:r,perspective:l,apiVersion:s}=e,o=(0,m.tH7)({...m.miu,apiVersion:s||m.miu.apiVersion}),{strategy:a}=(0,m.hA9)().search,d=(0,m.I07)(),u=(0,m.xx_)(),p=(0,c.useMemo)(()=>l0(t,n),[t,n]),[[h,f]]=(0,c.useState)(()=>(0,eI.t)()),[[x,g]]=(0,c.useState)(()=>(0,eI.t)()),b=(0,c.useMemo)(()=>{let e={client:o,filter:t,limit:100,params:n,schema:d,perspective:l,searchQuery:r||"",sort:i||lK,staticTypeNames:p,maxFieldDepth:u,searchStrategy:a},s=l2(e).pipe((0,M.t)({refCount:!0,bufferSize:1})),c=x.pipe((0,$.E)(s),(0,B.p)(([,e])=>e?.documents.length===100),(0,Y.s)(1),(0,L.Z)(()=>(0,F.x)((0,Z.of)({type:"loadFullList"}),l2({...e,limit:2e3}).pipe((0,I.T)(e=>({type:"result",result:e}))))),(0,O.u)());return(0,N.h)(s.pipe((0,I.T)(e=>({type:"result",result:e})),(0,H.Q)(c)),c).pipe((0,m.TMz)((e,t,n)=>{var i,r;let l=(r=e)instanceof Error?r:"object"==typeof r&&null!==r&&"message"in r&&"string"==typeof r.message?Error(`${r.message} ${l4}`):Error(`${String(r)} ${l4}`),s=window.navigator.onLine,o=s&&!((i=e)instanceof eC.Q6)&&(i instanceof eC.gP||!(i instanceof eC.MZ)||403===i.statusCode),a=t<10,d=(0,N.h)(s?h:(0,U.R)(window,"online"),s&&a?(0,G.O)(1e3*t):ei.t).pipe((0,Y.s)(1),(0,R.n)(()=>(0,N.h)((0,Z.of)({type:"error",error:l,retrying:!0,autoRetry:a,canRetry:o,retryCount:t}),n)));return(0,F.x)((0,Z.of)({type:"error",error:l,retrying:!1,autoRetry:a,canRetry:o,retryCount:t}),d)}),(0,D.S)((e,t)=>{if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,m.Zck)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)},l3))},[o,t,n,d,l,r,i,p,u,a,x,h]),{error:y,items:v,isLoading:_,fromCache:w,connected:S,canRetry:k,isLoadingFullList:C,isRetrying:E,autoRetry:z,retryCount:T}=(0,j.J)(b,l3);return{error:y,onRetry:f,isLoading:_,items:v,isRetrying:E,canRetry:k,retryCount:T,autoRetry:z,connected:S,fromCache:w,onLoadFullList:g,isLoadingFullList:C}}({apiVersion:y,filter:v,perspective:x,params:_,searchQuery:E?.trim(),sortOrder:J}),ep=X||f.loading,em=(0,j.N)(e=>e.pipe((0,I.T)(e=>e.target.value),(0,A.M)(P),(0,er.s)(e=>""===e?(0,Z.of)(""):(0,G.O)(300)),(0,A.M)(z))),eh=(0,c.useCallback)(()=>{z(""),P("")},[]),ef=(0,c.useCallback)(e=>{"Escape"===e.key&&eh()},[eh]),[ex,eg]=(0,c.useState)();(0,c.useEffect)(()=>{ex||ep||eg(l)},[ex,ep,l]),(0,c.useEffect)(()=>{eh(),eg()},[l,eh]);let eb=(0,c.useMemo)(()=>ed&&ep&&ex===l?"spinner":ed&&et?"subtle":"initial",[ed,ex,et,ep,l]),ey=(0,c.useMemo)(()=>"spinner"===eb?l7:T&&"subtle"===eb?l8:p.WIv,[eb,T]);return(0,m.mnZ)(!ed),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.az,{paddingX:3,paddingBottom:3,children:(0,s.jsx)(a.ks,{"aria-label":k("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!E,fontSize:[2,2,1],icon:ey,iconRight:ed&&("subtle"!==eb||T)?null:l9,onChange:em,onClear:eh,onKeyDown:ef,padding:2,placeholder:k("panes.document-list-pane.search-input.placeholder"),radius:2,ref:K,spellCheck:!1,value:T})}),(0,s.jsx)(lq,{childItemId:t,error:Q,filterIsSimpleTypeConstraint:!!w,hasMaxItems:2e3===ee.length,hasSearchQuery:!!E,isActive:n,isLazyLoading:q,isLoading:ep,autoRetry:es,canRetry:eo,retryCount:ea,isRetrying:en,isConnected:ed,items:ee,layout:d,muted:"subtle"===eb,loadingVariant:eb,onEndReached:ec,onRetry:eu,paneTitle:C,searchInputElement:V,showIcons:S},l)]})}),st=(0,c.memo)(e=>{let t,n,i,r,a,d,c,u,m,h=(0,o.c)(27),{contentAfter:f,index:x,initialValueTemplates:g,menuItemGroups:b,menuItems:y,setLayout:j,setSortOrder:v,title:_}=e;h[0]!==g?(t=void 0===g?[]:g,h[0]=g,h[1]=t):t=h[1];let w=t;h[2]!==b?(n=void 0===b?[]:b,h[2]=b,h[3]=n):n=h[3];let S=n;h[4]!==y?(i=void 0===y?[]:y,h[4]=y,h[5]=i):i=h[5];let k=i,{features:C}=tO(),{collapsed:I,isLast:E}=te(),z=E&&!I?-1:0;h[6]!==j?(r=e=>{let{layout:t}=e;j(t)},h[6]=j,h[7]=r):r=h[7],h[8]!==v?(a=e=>{v(e)},h[8]=v,h[9]=a):a=h[9],h[10]!==r||h[11]!==a?(d={setLayout:r,setSortOrder:a},h[10]=r,h[11]=a,h[12]=d):d=h[12];let T=d;return h[13]!==T||h[14]!==w||h[15]!==S||h[16]!==k?(c=(0,s.jsx)(l$,{initialValueTemplateItems:w,actionHandlers:T,menuItemGroups:S,menuItems:k}),h[13]=T,h[14]=w,h[15]=S,h[16]=k,h[17]=c):c=h[17],h[18]!==C.backButton||h[19]!==x?(u=C.backButton&&x>0&&(0,s.jsx)(l.$n,{as:r5,"data-as":"a",icon:p.A60,mode:"bleed",tooltipProps:{content:"Back"}}),h[18]=C.backButton,h[19]=x,h[20]=u):u=h[20],h[21]!==f||h[22]!==c||h[23]!==u||h[24]!==z||h[25]!==_?(m=(0,s.jsx)(l.vE,{children:(0,s.jsx)(ty,{actions:c,backButton:u,contentAfter:f,tabIndex:z,title:_})}),h[21]=f,h[22]=c,h[23]=u,h[24]=z,h[25]=_,h[26]=m):m=h[26],m});function sn(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:r}=n.options.meta||{},l=(0,c.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,r=e<i?e:i,l=e<i?i:e,s=n.getRowModel().flatRows.slice(r,l+1).map(({id:e})=>e),o=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...s,...o].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,r,n]);return(0,s.jsx)(a.Sc,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:l})}function si({children:e,table:t}){let[n,i]=(0,c.useState)(null),[r,l]=(0,c.useState)([]),o=(0,c.useCallback)((e=null)=>{n?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),i(e),l([])},[n]),a=(0,c.useCallback)(()=>o(),[o]),d=(0,c.useCallback)(e=>{if(!n)return;let i=t.getVisibleLeafColumns(),r=i.findIndex(e=>e.id===n.colId)+("left"===e?-1:1);r<0||r>=i.length||o({colId:i[r].id,rowIndex:n.rowIndex,state:"selected"})},[o,n,t]),p=(0,c.useCallback)(e=>{n&&l(t=>{let{rowIndex:i}=n,r=t=>t+("down"===e?1:-1);if(!t.length){let e=r(i);return e<0?[]:[e]}let l=r(t[t.length-1]);return l<0?t:l===i?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},[n]),m=(0,c.useCallback)((e,t)=>{o({colId:e,rowIndex:t,state:"selected"})},[o]),h=(0,c.useCallback)(()=>{n&&(r.length?l([]):o("selected"===n.state?null:{...n,state:"selected"}))},[o,n,r.length]),f=(0,c.useCallback)((e,t)=>{if(!n)return;let i="ArrowDown"===t?"down":"up",r="down"===i?1:-1;if(e)p(i);else{let e=n.rowIndex+r;if(e<0)return;m(n.colId,e)}},[p,n,m]),x=(0,c.useCallback)(e=>{if(!n)return;let{key:t,shiftKey:i}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(i,t);break;case"ArrowLeft":case"ArrowRight":"selected"===n.state&&(e.preventDefault(),d("ArrowLeft"===t?"left":"right"))}},[n,h,f,d]),g=(0,c.useCallback)(e=>{n&&(document.getElementById(`cell-${n.colId}-${n.rowIndex}`)?.contains(e.target)||a())},[a,n]);(0,c.useEffect)(()=>(n&&(document.addEventListener("keydown",x),document.addEventListener("click",g)),()=>{n&&(document.removeEventListener("keydown",x),document.removeEventListener("click",g))}),[g,x,n]);let b=(0,c.useCallback)(()=>i(e=>e?{...e,state:"focused"}:null),[]),y=(0,c.useCallback)((e,t)=>n?.colId!==e?null:n.rowIndex===t?"focused"===n.state?"focused":"selectedAnchor":r.includes(t)?"selectedRange":null,[n,r]),j=(0,c.useCallback)(()=>{n&&o({colId:n.colId,rowIndex:n.rowIndex+1,state:"selected"})},[o,n]),v=(0,c.useMemo)(()=>({focusAnchorCell:b,resetFocusSelection:a,setSelectedAnchorCell:m,getStateByCellId:y,submitFocusedCell:j}),[b,a,m,y,j]);return(0,s.jsx)(u.YW.Provider,{value:v,children:e})}st.displayName="Memo(PaneHeader)";let sr=x.I4.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,sl=(0,x.I4)(sr)`
  position: sticky;
  z-index: 2;
`;function ss(e){let{getValue:t,column:n,row:i,fieldType:r}=e,l=`cell-${n.id}-${i.index}`,[o,d]=(0,c.useState)(t()),[p,m]=(0,c.useState)(!1),h=(0,c.useRef)(null),{focusAnchorCell:f,resetFocusSelection:x,setSelectedAnchorCell:g,getStateByCellId:b,submitFocusedCell:y}=(()=>{let e=(0,c.useContext)(u.YW);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),j=b(n.id,i.index),v=(0,c.useCallback)(()=>{g(n.id,i.index),f()},[n.id,f,i.index,g]),{patchDocument:_}=e.table.options.meta||{},w=()=>{h.current?.focus(),h.current instanceof HTMLInputElement&&h.current.select()},S=(0,c.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===j&&w(),"focused"===j&&y())},[j,y]),k=(0,c.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),_?.(i.id,n.id,t))},[n.id,_,i.id]),C=(0,c.useCallback)(()=>{navigator.clipboard.writeText(o.toString())},[o]);(0,c.useEffect)(()=>(("selectedAnchor"===j||"focused"===j)&&document.addEventListener("keydown",S),("selectedAnchor"===j||"selectedRange"===j)&&document.addEventListener("paste",k),"selectedAnchor"===j&&document.addEventListener("copy",C),()=>{("selectedAnchor"===j||"focused"===j)&&document.removeEventListener("keydown",S),("selectedAnchor"===j||"selectedRange"===j)&&document.removeEventListener("paste",k),"selectedAnchor"===j&&document.removeEventListener("copy",C)}),[l,j,n.id,b,C,S,k,i.index]);let I=()=>"focused"===j?"2px solid blue":"selectedRange"===j?"1px solid green":"selectedAnchor"===j?"1px solid blue":"1px solid transparent",E={onFocus:v,onBlur:()=>{p&&(_?.(i.id,n.id,o),m(!1)),x()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),g(n.id,i.index))},"aria-selected":!!j,"data-testid":l,id:l,ref:e=>{h.current=e}};return"boolean"===r.name?(0,s.jsxs)(a.l6,{...E,onChange:()=>null,radius:0,style:{boxShadow:"none",border:I(),padding:0},value:JSON.stringify(o),children:[(0,s.jsx)("option",{value:"True",children:"True"}),(0,s.jsx)("option",{value:"False",children:"False"})]}):(0,s.jsx)(a.ks,{...E,size:0,radius:0,border:!1,style:{border:I(),padding:"22px 16px"},value:"string"==typeof o||"number"==typeof o?o:JSON.stringify(o),onChange:e=>{m(!0),d(e.target.value)}})}function so(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(t?sl:sr,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:(0,ez.Kv)(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let sa=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,r=(0,c.useMemo)(()=>(0,m.TU6)(t,i,n.original._id),[t,n.original._id,i]),l=(0,m.r0j)(n.original._id),{snapshot:o,isLoading:d}=(0,j.J)(r,{snapshot:null,isLoading:!0});if(d)return(0,s.jsx)(a.EY,{size:1,muted:!0,children:"Loading..."});let u=o?.title??"Untitled";return(0,s.jsxs)(a.so,{align:"center",gap:3,children:[(0,s.jsx)(m.ZDR,{draft:l.draft,published:l.published,versions:void 0}),(0,s.jsx)(a.EY,{size:1,children:u})]})},sd=(0,eT.FB)(),sc=["string","number","boolean"],su=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:r}=n;return sc.includes(i.name)?[...e,sd.accessor(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,s.jsx)(ss,{...e,fieldType:i})})]:"object"===i.name&&(0,h.$d)(i)&&!t?[...e,sd.group({header:r,columns:su(i,n.name)})]:e},[]),sp=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?sp(e.columns):[]);function sm({table:e}){let{t}=(0,m.Bdt)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,c.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,s.jsx)(l.IU,{button:(0,s.jsx)(l.$n,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,s.jsx)(a.W1,{padding:3,paddingTop:4,style:{width:240},children:(0,s.jsxs)(a.so,{direction:"column",height:"fill",gap:3,children:[(0,s.jsx)(a.EY,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,s.jsx)(a.so,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,s.jsx)(a.BJ,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>(0,s.jsxs)(a.so,{marginY:2,align:"center",children:[(0,s.jsx)(a.Sc,{readOnly:(t=>{let i=t.getIsVisible(),r=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return n&&!i||r&&i})(t),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${t.id}`,style:{display:"block"}}),(0,s.jsx)(a.az,{flex:1,paddingLeft:3,children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)("label",{htmlFor:`col-visibility-${t.id}`,children:t.columnDef.header?.toString()})})})]},t.id))})}),(0,s.jsx)(l.$n,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let sh=(0,x.I4)(a.so)`
  flex-shrink: 0;
`;function sf(){let e,t,n,i=(0,o.c)(5),{state:r}=(0,m.Z_W)(),{filtersVisible:l}=r;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.w1_,{}),i[0]=e):e=i[0],i[1]!==l?(t=l&&(0,s.jsx)(m.CuW,{showTypeFilter:!1}),i[1]=l,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsxs)(sh,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let sx=x.I4.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,sg=(0,x.I4)(sx)`
  position: sticky;
  z-index: 2;
`,sb=x.I4.div`
  visibility: hidden;

  ${sx}:hover & {
    visibility: visible;
  }
`;function sy(e){let{header:t,headerGroup:n}=e,{t:i}=(0,m.Bdt)(),r=t.column.getIsPinned(),o=n.depth>0&&!t.column.parent?null:(0,s.jsx)(a.EY,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,ez.Kv)(t.column.columnDef.header,t.getContext())}),d=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),c=r&&t.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(r?sg:sx,{style:{left:t.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,s.jsxs)(a.so,{justify:"space-between",marginX:2,align:"baseline",children:[(0,s.jsx)(l.m_,{delay:500,content:o,children:(0,s.jsx)(a.az,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:o})}),d&&(0,s.jsx)(sb,{children:(0,s.jsx)(l.IU,{button:(0,s.jsx)(l.$n,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:p.riS,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,s.jsx)(a.W1,{children:(0,s.jsx)(l.Dr,{text:i("sheet-list.hide-field"),icon:p.USm,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function sj({table:e}){return(0,s.jsx)(l.vE,{children:(0,s.jsxs)(a.so,{gap:3,align:"center",children:[(0,s.jsx)(l.$n,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:p.Zxx,tooltipProps:{content:"Go to first page"}}),(0,s.jsx)(l.$n,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:p.YJP,tooltipProps:{content:"Go to previous page"}}),(0,s.jsxs)(a.EY,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,s.jsx)(l.$n,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:p.vKP,tooltipProps:{content:"Go to next page"}}),(0,s.jsx)(l.$n,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:p.yBO,tooltipProps:{content:"Go to last page"}}),(0,s.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})})}function sv(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,r={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:r}}}default:return e}}let s_={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},sw=(0,x.I4)(a.so)`
  height: 100%;
`,sS=x.I4.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,sk=x.I4.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function sC({documentSchemaType:e}){let{dispatch:t,state:n}=(0,m.Z_W)(),{columns:i,initialColumnsVisibility:r}=function(e){let t=(0,m.yKO)(),n=(0,c.useMemo)(()=>e?[sd.display({id:"selected",enableHiding:!1,header:e=>(0,s.jsxs)(a.az,{children:[(0,s.jsx)(a.Sc,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:sn}),sd.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,s.jsx)(sa,{...n,documentPreviewStore:t,schemaType:e})}),...su(e)]:[],[t,e]),[i]=(0,c.useMemo)(()=>sp(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:l}=function(e){let t,n,i,r,l=(0,o.c)(12),{typeName:s}=e,{state:a}=(0,m.Z_W)();l[0]!==a.result.hits?(t=new Map,a.result.hits.forEach(e=>t.set((0,m.IMx)(e.hit._id),e.hit)),l[0]=a.result.hits,l[1]=t):t=l[1];let d=t,u=`_type == "${s}"`;l[2]!==u?(n={filter:u},l[2]=u,l[3]=n):n=l[3];let{data:p,isLoading:h}=function(e){let t,n,i,r,l,s,a,d,u,p,h=(0,o.c)(27),{filter:f,params:x,apiVersion:g}=e,b=`*[${f}][0...2000]`,y=g||m.miu.apiVersion;h[0]!==y?(t={...m.miu,apiVersion:y},h[0]=y,h[1]=t):t=h[1];let j=(0,m.tH7)(t);h[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},h[2]=n):n=h[2];let[v,_]=(0,c.useReducer)(sv,n),[w,S]=(0,c.useState)(null!==j),[k,C]=(0,c.useState)(null);h[3]!==b||h[4]!==j||h[5]!==x?(i=async()=>{if(!j)return void S(!1);try{let e=await j.fetch(b,x);_({type:"DOCUMENTS_SET",documents:e}),S(!1)}catch(e){C(e)}},h[3]=b,h[4]=j,h[5]=x,h[6]=i):i=h[6];let I=i;h[7]!==I?(r=async e=>{if("welcome"===e.type&&(S(!0),await I(),S(!1)),"reconnect"===e.type&&S(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&_({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_UPDATED",payload:t})}}},h[7]=I,h[8]=r):r=h[8];let z=r;e:{let e;if(!j){let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,Z.of)(),h[9]=e):e=h[9],l=e;break e}if(h[10]!==b||h[11]!==j.observable||h[12]!==x){let t;h[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(C(e),(0,Z.of)(e)),h[14]=t):t=h[14],e=j.observable.listen(b,x,s_).pipe((0,E.W)(t)),h[10]=b,h[11]=j.observable,h[12]=x,h[13]=e}else e=h[13];l=e}let T=l;h[15]!==z||h[16]!==T?(s=()=>{let e=T.subscribe(z);return()=>{e?.unsubscribe()}},a=[z,T],h[15]=z,h[16]=T,h[17]=s,h[18]=a):(s=h[17],a=h[18]),(0,c.useEffect)(s,a),h[19]!==v.documents?(d=Object.keys(v.documents).reduce((e,t)=>{let n=v.documents[t],i=n._id===(0,m.T4)(n._id),r=i?n._id:(0,m.T4)(n._id);return e[r]&&!i||(e[r]=n),e},{}),h[19]=v.documents,h[20]=d):d=h[20];let A=d;h[21]!==A?(u=Object.values(A),h[21]=A,h[22]=u):u=h[22];let P=u;return h[23]!==P||h[24]!==k||h[25]!==w?(p={data:P,isLoading:w,error:k},h[23]=P,h[24]=k,h[25]=w,h[26]=p):p=h[26],p}(n);if(l[4]!==p||l[5]!==d){let e;l[7]!==d?(e=e=>d.has((0,m.IMx)(e._id)),l[7]=d,l[8]=e):e=l[8],i=p.filter(e),l[4]=p,l[5]=d,l[6]=i}else i=l[6];let f=i;return l[9]!==f||l[10]!==h?(r={data:f,isLoading:h},l[9]=f,l[10]=h,l[11]=r):r=l[11],r}({typeName:e.name}),[d,u]=(0,c.useState)(null),p=n.result.hits.length,h=(0,ez.N4)({data:l,columns:i,getCoreRowModel:(0,eT.HT)(),getFilteredRowModel:(0,eT.hM)(),getPaginationRowModel:(0,eT.kW)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:r},getRowId:e=>e._id,meta:{selectedAnchor:d,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:f}=h.getRowModel();(0,c.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let x=(0,c.useCallback)(e=>(0,s.jsx)(a.az,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,s.jsx)(so,{...t},e.original._id+t.id))},e.original._id+e.id),[]),g=`Total: ${p} rows, showing ${f.length} rows`;return(0,s.jsxs)(sw,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,s.jsxs)(a.so,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,s.jsxs)(a.so,{direction:"row",align:"center",children:[(0,s.jsx)(sf,{}),(0,s.jsx)(a.EY,{size:0,muted:!0,children:g})]}),(0,s.jsx)(sm,{table:h})]}),(0,s.jsx)(sS,{children:(0,s.jsx)(si,{table:h,children:(0,s.jsxs)(sk,{children:[(0,s.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,s.jsx)(a.az,{as:"tr",children:e.headers.map(t=>(0,s.jsx)(sy,{header:t,headerGroup:e},t.id))},e.id))}),(0,s.jsx)("tbody",{children:h.getRowModel().rows.map(x)})]})})}),(0,s.jsx)(a.so,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,s.jsx)(sj,{table:h})})]})}function sI(e){let t=(0,m.I07)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,h.JR)(i))throw Error(`Schema type "${n}" not found or not a document schema`);return(0,s.jsx)(m.YLU,{children:(0,s.jsx)(sC,{...e,documentSchemaType:i})})}function sE(e){let[t,n]=(0,c.useState)(e);return S(t,e)?t:(n(e),e)}let sz=(0,c.memo)(function(e){let t,n,i,r,l,a,d,c,u,p=(0,o.c)(36),{index:h,isSelected:f,pane:x,paneKey:g}=e,{name:b}=(0,m.For)(),{defaultLayout:y,initialValueTemplates:j,menuItemGroups:v,menuItems:_,options:S}=x,k=void 0===j?m.Mlv:j,{defaultOrdering:C,filter:I}=S,E=void 0===C?m.Mlv:C,z=sE(S.params||lW),T=x.source;e:{let e;p[0]!==I||p[1]!==z?(e=l0(I,z),p[0]=I,p[1]=z,p[2]=e):e=p[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let A=t,[P,R]=tq("layout",A??x.id,void 0===y?"default":y),{title:M}=(0,m.FP1)(x);p[3]!==E?(n=E?.length>0?{by:E}:lK,p[3]=E,p[4]=n):n=p[4];let D=n,[$,B]=tq("sort-order",A??x.id,D);p[5]!==P||p[6]!==_||p[7]!==$?(i=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:w(n?.by,e?.params?.by||m.Mlv)}:{...e,selected:!1})})({menuItems:_,sortOrderRaw:$,layout:P}),p[5]=P,p[6]=_,p[7]=$,p[8]=i):i=p[8];let Y=i,L="sheetList"===P;p[9]!==L||p[10]!==P||p[11]!==e||p[12]!==$?(r=L?(0,s.jsx)(sI,{...e},e.pane.id):(0,s.jsx)(se,{...e,sortOrder:$,layout:P}),p[9]=L,p[10]=P,p[11]=e,p[12]=$,p[13]=r):r=p[13];let O=r,H=T||b;return p[14]!==L?(l=L?{}:{currentMaxWidth:350,maxWidth:640},p[14]=L,p[15]=l):l=p[15],p[16]!==x.source?(a=nq,p[16]=x.source,p[17]=a):a=p[17],p[18]!==h||p[19]!==k||p[20]!==v||p[21]!==Y||p[22]!==R||p[23]!==B||p[24]!==M?(d=(0,s.jsx)(st,{index:h,initialValueTemplates:k,menuItemGroups:v,menuItems:Y,setLayout:R,setSortOrder:B,title:M}),p[18]=h,p[19]=k,p[20]=v,p[21]=Y,p[22]=R,p[23]=B,p[24]=M,p[25]=d):d=p[25],p[26]!==f||p[27]!==g||p[28]!==O||p[29]!==d||p[30]!==l||p[31]!==a?(c=(0,s.jsxs)(e8,{"data-ui":"DocumentListPane",id:g,minWidth:320,...l,selected:f,children:[a,d,O]}),p[26]=f,p[27]=g,p[28]=O,p[29]=d,p[30]=l,p[31]=a,p[32]=c):c=p[32],p[33]!==c||p[34]!==H?(u=(0,s.jsx)(m.NeO,{name:H,children:c}),p[33]=c,p[34]=H,p[35]=u):u=p[35],u});sz.displayName="Memo(PaneContainer)";let sT=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};sT.displayName="LiveEditBadge";let sA={activePanes:[]};function sP(e){sA.activePanes=e}function sR(e,t,n,i){let r=n?.panes||[],l=sA.activePanes||[],s=t.id||(0,f.A)();for(let n=l.length-1;n>=0;n--){let o=l[n];if("object"==typeof o&&(o.canHandleIntent?.(e,t,{pane:o,index:n})||"documentList"===o.type&&o.schemaTypeName===t.type&&"_type == $type"===o.options.filter)){let l=function(e,{template:t,version:n}){return"create"!==e?nX:t&&n?{template:t,version:n}:t?{template:t}:n?{version:n}:nX}(e,t);return{panes:r.slice(0,n).concat([[{id:s,params:l,payload:i}]])}}}return{intent:e,params:t,payload:i}}let sM=(0,x.I4)(m.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,sD=(0,x.I4)(a.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function s$(e){let t,n,i,l,d,u,p,h,f,x,g,b,y=(0,o.c)(39),{showChanges:j}=e,{documentId:v,schemaType:_,timelineError:w,timelineStore:S,value:k}=tM(),{selectedReleaseId:C}=(0,m.QO2)(),[I,E]=(0,c.useState)(null),z=(0,m.SfM)(S,sV),T=(0,m.SfM)(S,sH),A=(0,m.SfM)(S,sO),P=(0,m.SfM)(S,sL),R=(0,m.SfM)(S,sY),M="loading"===P,D=!A,{t:$}=(0,m.Bdt)(r.Z7);y[0]!==T||y[1]!==v||y[2]!==D||y[3]!==_||y[4]!==k?(t={documentId:v,schemaType:_,FieldWrapper:sB,rootDiff:T,isComparingCurrent:D,value:k,showFromValue:!0},y[0]=T,y[1]=v,y[2]=D,y[3]=_,y[4]=k,y[5]=t):t=y[5];let B=t;if(C){let e;return y[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(a.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(a.Zp,{flex:1,padding:2,paddingTop:0,children:(0,s.jsx)(i7,{versionError:!0})})}),y[6]=e):e=y[6],e}return y[7]!==$?(n=$("changes.from.label"),y[7]=$,y[8]=n):n=y[8],y[9]!==n?(i=(0,s.jsx)(a.EY,{size:1,muted:!0,children:n}),y[9]=n,y[10]=i):i=y[10],y[11]!==R?(l=(0,s.jsx)(re,{mode:"since",chunk:R,placement:"bottom-start"}),y[11]=R,y[12]=l):l=y[12],y[13]!==$?(d=$("changes.to.label"),y[13]=$,y[14]=d):d=y[14],y[15]!==d?(u=(0,s.jsx)(a.EY,{size:1,muted:!0,children:d}),y[15]=d,y[16]=u):u=y[16],y[17]!==z?(p=(0,s.jsx)(re,{chunk:z,mode:"rev",placement:"bottom-end"}),y[17]=z,y[18]=p):p=y[18],y[19]!==i||y[20]!==l||y[21]!==u||y[22]!==p?(h=(0,s.jsx)(a.az,{padding:3,children:(0,s.jsxs)(sD,{paddingX:2,paddingBottom:2,children:[i,l,u,p]})}),y[19]=i,y[20]=l,y[21]=u,y[22]=p,y[23]=h):h=y[23],y[24]!==T||y[25]!==B||y[26]!==M||y[27]!==_||y[28]!==j||y[29]!==w?(f=j&&(0,s.jsx)(sZ,{diff:T,documentContext:B,error:w,loading:M,schemaType:_}),y[24]=T,y[25]=B,y[26]=M,y[27]=_,y[28]=j,y[29]=w,y[30]=f):f=y[30],y[31]!==f?(x=(0,s.jsx)(sM,{"data-ui":"Scroller",ref:E,children:(0,s.jsx)(a.az,{flex:1,paddingX:3,height:"fill",children:f})}),y[31]=f,y[32]=x):x=y[32],y[33]!==I||y[34]!==x?(g=(0,s.jsx)(a.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(a.EZ,{element:I,children:x})}),y[33]=I,y[34]=x,y[35]=g):g=y[35],y[36]!==g||y[37]!==h?(b=(0,s.jsxs)(a.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[h,g]}),y[36]=g,y[37]=h,y[38]=b):b=y[38],b}function sB(e){return(0,s.jsx)(m.uD1,{...e,hasRevertHover:!1})}function sY(e){return e.sinceTime}function sL(e){return e.selectionState}function sO(e){return e.onOlderRevision}function sH(e){return e.diff}function sV(e){return e.revTime}function sZ(e){let t,n,i=(0,o.c)(9),{error:r,diff:l,documentContext:a,loading:d,schemaType:c}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.J7,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.gd4,{showText:!0}),i[1]=e):e=i[1],e}if(!l){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.J7,{}),i[2]=e):e=i[2],e}return i[3]!==l||i[4]!==c?(t=(0,s.jsx)(m.Vki,{diff:l,schemaType:c}),i[3]=l,i[4]=c,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,s.jsx)(u.HU.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}function sN(e){let t,n,i,r,d,c,u,p,h=(0,o.c)(27),{event:f,isSelected:x,onSelect:g,optionsMenu:b}=e,{t:y}=(0,m.Bdt)("studio");h[0]!==f?(t=!(0,m.zOx)(f)&&!(0,m.GDb)(f)&&!(0,m.ayN)(f)&&!(0,m.Bkf)(f)&&!(0,m.azN)(f),h[0]=f,h[1]=t):t=h[1];let j=t;h[2]!==f||h[3]!==j||h[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),j&&g(f)},h[2]=f,h[3]=j,h[4]=g,h[5]=n):n=h[5];let v=n;h[6]!==j||h[7]!==y?(i=j?"":y("changes.not-selectable"),h[6]=j,h[7]=y,h[8]=i):i=h[8];let _=j?"button":"div",w=j?"pointer":"default";return h[9]!==w?(r={cursor:w,width:"100%"},h[9]=w,h[10]=r):r=h[10],h[11]!==f?(d=(0,s.jsx)(m.JhA,{event:f,showChangesBy:"tooltip"}),h[11]=f,h[12]=d):d=h[12],h[13]!==f.timestamp||h[14]!==v||h[15]!==x||h[16]!==_||h[17]!==r||h[18]!==d?(c=(0,s.jsx)(a.Zp,{as:_,onClick:v,padding:2,pressed:x,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":f.timestamp,style:r,children:d}),h[13]=f.timestamp,h[14]=v,h[15]=x,h[16]=_,h[17]=r,h[18]=d,h[19]=c):c=h[19],h[20]!==j||h[21]!==i||h[22]!==c?(u=(0,s.jsx)(l.m_,{content:i,disabled:j,children:c}),h[20]=j,h[21]=i,h[22]=c,h[23]=u):u=h[23],h[24]!==b||h[25]!==u?(p=(0,s.jsxs)(a.so,{gap:1,children:[u,b]}),h[24]=b,h[25]=u,h[26]=p):p=h[26],p}function sF(e){let t,n,i,d,c,u,p,h,f,x,g,b=(0,o.c)(41),{event:y}=e,{t:j}=(0,m.Bdt)(r.Z7),{t:_}=(0,m.Bdt)(),w=(0,a.WP)(),{params:S,setParams:k}=tB(),C=(0,m._T7)();b[0]!==y.id||b[1]!==y.versionId||b[2]!==y.versionRevisionId||b[3]!==S||b[4]!==k?(t=()=>{k({...S,rev:y.versionRevisionId||"@lastPublished",since:void 0,historyEvent:y.id,historyVersion:(0,m._Sr)(y.versionId)})},b[0]=y.id,b[1]=y.versionId,b[2]=y.versionRevisionId,b[3]=S,b[4]=k,b[5]=t):t=b[5];let I=t;b[6]!==y.versionRevisionId||b[7]!==S||b[8]!==k||b[9]!==C?(n=()=>{k({...S,rev:y.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{C("drafts")},100)},b[6]=y.versionRevisionId,b[7]=S,b[8]=k,b[9]=C,b[10]=n):n=b[10];let E=n;b[11]!==y.release?(i=e=>{let{children:t}=e;return(0,s.jsx)(m.RwK,{$tone:y.release?(0,m.Jrl)(y.release)?(0,m.Y73)(y.release):"default":void 0,children:t})},b[11]=y.release,b[12]=i):i=b[12];let z=i,T=y.release&&!(0,m.Jrl)(y.release),A=`timeline-item-menu-button-${y.versionId}`;b[13]!==j?(d=j("timeline-item.menu-button.aria-label"),b[13]=j,b[14]=d):d=b[14],b[15]!==y.release||b[16]!==T||b[17]!==j?(c=T?j("timeline-item.not-found-release.tooltip",{releaseId:y.release?._id?(0,m._hI)(y.release._id):void 0}):j("timeline-item.menu-button.tooltip"),b[15]=y.release,b[16]=T,b[17]=j,b[18]=c):c=b[18],b[19]!==c?(u={content:c},b[19]=c,b[20]=u):u=b[20],b[21]!==T||b[22]!==d||b[23]!==u?(p=(0,s.jsx)(m.VJU,{"aria-label":d,tooltipProps:u,disabled:T}),b[21]=T,b[22]=d,b[23]=u,b[24]=p):p=b[24],b[25]!==z||b[26]!==y.release||b[27]!==y.versionRevisionId||b[28]!==E||b[29]!==I||b[30]!==j||b[31]!==_?(h=(0,s.jsx)(a.W1,{padding:1,children:y.release?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.RZ,{intent:m.wwz,params:{id:(0,m._hI)(y.release._id)},style:{textDecoration:"none"},children:(0,s.jsx)(a.Dr,{padding:3,children:(0,s.jsx)(a.so,{align:"center",justify:"flex-start",children:(0,s.jsx)(a.EY,{size:1,style:{textDecoration:"none"},children:(0,s.jsx)(m.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsx)(z,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:y.release.metadata?.title||_("release.placeholder-untitled-release")},t:j})})})})}),(0,s.jsx)(a.Dr,{onClick:I,children:(0,s.jsx)(a.so,{align:"center",justify:"flex-start",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsx)(z,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:y.release.metadata?.title||_("release.placeholder-untitled-release")},t:j})})})})]}):(0,s.jsx)(a.Dr,{onClick:E,disabled:!y.versionRevisionId,children:(0,s.jsx)(a.so,{align:"center",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{components:{VersionBadge:sK},i18nKey:"events.open.draft",t:j})})})})}),b[25]=z,b[26]=y.release,b[27]=y.versionRevisionId,b[28]=E,b[29]=I,b[30]=j,b[31]=_,b[32]=h):h=b[32];let P=!w.elements?.[i9]||i9;return b[33]===Symbol.for("react.memo_cache_sentinel")?(f=["bottom-end","bottom-start"],b[33]=f):f=b[33],b[34]!==P?(x={portal:P,placement:"bottom",fallbackPlacements:f},b[34]=P,b[35]=x):x=b[35],b[36]!==x||b[37]!==A||b[38]!==p||b[39]!==h?(g=(0,s.jsx)(l.IU,{id:A,button:p,menu:h,popover:x}),b[36]=x,b[37]=A,b[38]=p,b[39]=h,b[40]=g):g=b[40],g}function sK(e){let{children:t}=e;return(0,s.jsx)(m.RwK,{$tone:"caution",children:t})}let sW=b.P.create(a.az),sJ={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},sU=({events:e,hasMoreEvents:t,selectedEventId:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)",fetchEventChildren:o})=>{let[d,u]=(0,c.useState)(!1),{t:p}=(0,m.Bdt)("studio"),[h,f]=(0,c.useState)(()=>{if(n){let t=e.find(e=>e.id===n);if(t&&"parentId"in t&&t.parentId)return new Set([t.parentId])}return new Set}),[x,g]=(0,c.useState)(new Set),b=(0,c.useMemo)(()=>e.filter(t=>(0,m.y4b)(t)&&t.parentId?e[e.length-1].id===t.id||h.has(t.parentId):!(0,m.WUV)(t)||!t.parentId||h.has(t.parentId)),[h,e]),y=(0,c.useCallback)(e=>async()=>{let t=e.id,n=!1;f(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(g(e=>{let n=new Set(e);return n.add(t),n}),await o(e),g(e=>{let n=new Set(e);return n.delete(t),n}))},[o,g]),j=(0,c.useCallback)(e=>{r(e)},[r]),v=(0,c.useCallback)(e=>{let t=(0,m.tfA)(e.documentId);return(0,m.BaK)(e)&&"published"===t?(0,s.jsx)(sF,{event:e}):(0,m.BaK)(e)&&"draft"===t&&e.creationEvent||(0,m.zOx)(e)&&e.creationEvent?(0,s.jsx)(iZ,{isExpanded:h.has(e.id),onExpand:y(e)}):null},[h,y]),_=(0,c.useCallback)((e,{activeIndex:i})=>{let r=(0,m.y4b)(e)&&e.parentId&&x.has(e.parentId),l=i===b.length-1;return r?(0,s.jsx)(sW,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,s.jsx)(a.so,{align:"center",justify:"center",style:{height:57},children:(0,s.jsx)(a.y$,{})})}):(0,s.jsxs)(sW,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?sJ:void 0,paddingLeft:((0,m.WUV)(e)||(0,m.y4b)(e))&&e.parentId&&!l?4:1,children:[(0,s.jsx)(sN,{event:e,isSelected:e.id===n,onSelect:j,optionsMenu:v(e)}),l&&t&&(0,s.jsx)(m.gd4,{})]},e.timestamp)},[x,n,j,v,b.length,t]);(0,c.useEffect)(()=>u(!0),[]);let w=b.findIndex(e=>e.id===n);return(0,s.jsx)(iK,{$visible:!w||d,"data-ui":"timeline",children:b.length>0?(0,s.jsx)(iF,{direction:"column",$maxHeight:l,id:"timeline-list-wrapper",children:(0,s.jsx)(m.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:b,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:_,wrapAround:!1})}):(0,s.jsxs)(a.BJ,{padding:3,space:3,children:[(0,s.jsx)(a.EY,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,s.jsx)(a.EY,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]})})};sU.displayName="EventsTimeline";let sG=(0,x.I4)(l.AM)`
  overflow: hidden;
  overflow: clip;
`,sQ={timestamp:{dateStyle:"medium",timeStyle:"short"}};function sq({event:e,events:t,mode:n,placement:i}){let{setTimelineRange:r}=tM(),[o,u]=(0,c.useState)(!1),[h,f]=(0,c.useState)(null),[x,g]=(0,c.useState)(null),b=(0,d.dj)(),{nextCursor:y,loading:j,error:v,findRangeForRevision:_,findRangeForSince:w,loadMoreEvents:S,expandEvent:k}=(0,m.LJN)(),{t:C}=(0,m.Bdt)("studio"),I=(0,c.useCallback)(()=>{u(!0)},[]),E=(0,c.useCallback)(()=>{u(!1)},[]),z=(0,c.useCallback)(e=>{o&&("Escape"===e.key||"Tab"===e.key)&&(E(),h?.focus())},[h,E,o]);(0,a.Pm)(z),(0,a.PR)(o&&E,()=>[h,x]);let T=(0,c.useCallback)(e=>{try{if((0,m.zOx)(e)||(0,m.GDb)(e)||(0,m.ayN)(e)||(0,m.Bkf)(e)||(0,m.azN)(e))return void console.error("Event is not selectable");let[t,n]=_(e?.id);r(t,n),E()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[C,b,r,_,E]),A=(0,c.useCallback)(e=>{try{let[t,n]=w(e.id);r(t,n),E()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},[w,r,b,C,E]),P=(0,c.useCallback)(()=>{!j&&y&&S()},[j,S,y]),R=(0,c.useMemo)(()=>v?(0,s.jsx)(i7,{}):(0,s.jsx)(sU,{events:t,fetchEventChildren:k,hasMoreEvents:!!y,selectedEventId:e?.id,onLoadMore:P,onSelect:"rev"===n?T:A}),[v,n,k,t,y,e?.id,P,A,T]),M=e?C(m.uMx[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:sQ}):C("timeline.latest-revision"),D=e?C(m.uMx[e.documentVariantType][e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:sQ}):t.length>0?C("timeline.since-version-missing"):C("timeline.no-previous-events"),$="rev"===n?M:D,B=(0,c.useMemo)(()=>({"timeline-menu":x}),[x]);return(0,s.jsx)(a.GD,{__unstable_elements:B,children:(0,s.jsx)(sG,{"data-testid":"timeline-menu",constrainSize:!0,content:o&&R,"data-ui":"versionMenu",open:o,placement:i,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,s.jsx)(a.so,{width:"fill",children:(0,s.jsx)(l.$n,{"data-testid":o?"timeline-menu-close-button":"timeline-menu-open-button",disabled:j||!t.length,mode:"ghost",onClick:o?E:I,ref:f,selected:o,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:p.D3D,text:j?C("timeline.loading-history"):$})})})})}let sX=(0,x.I4)(m.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,s0=(0,x.I4)(a.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,s1=(0,x.I4)(a.so)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,s2={diff:null,loading:!0,error:null},s3=()=>{let e,t,n,i,l,d,c,p,h,f,x,b=(0,o.c)(31),{documentId:y,schemaType:j,editState:v,displayed:_}=tM(),{selectedPerspective:w,selectedPerspectiveName:S,selectedReleaseId:k}=(0,m.QO2)(),{t:C}=(0,m.Bdt)(r.Z7);b[0]!==_||b[1]!==v?.published?(e=(0,g.g)((0,g.L)(v?.published??{},{author:""}),(0,g.L)(_??{},{author:""})),b[0]=_,b[1]=v?.published,b[2]=e):e=b[2];let I=e;return(!k||v?.version)&&("drafts"!==w||v?.draft)&&"published"!==S&&_?._rev?(b[3]!==C?(t=C("events.compare-with-published.title"),b[3]=C,b[4]=t):t=b[4],b[5]!==t?(n=(0,s.jsx)(a.EY,{size:1,weight:"medium",children:t}),b[5]=t,b[6]=n):n=b[6],b[7]!==w?(i=(0,m.Jrl)(w)?w.metadata?.title:"draft",b[7]=w,b[8]=i):i=b[8],b[9]!==i?(l={version:i},b[9]=i,b[10]=l):l=b[10],b[11]!==C||b[12]!==l?(d=(0,s.jsx)(a.EY,{size:1,muted:!0,children:(0,s.jsx)(m.HTc,{i18nKey:"events.compare-with-published.description",t:C,values:l})}),b[11]=C,b[12]=l,b[13]=d):d=b[13],b[14]!==n||b[15]!==d?(c=(0,s.jsx)(a.Zp,{borderBottom:!0,paddingBottom:3,children:(0,s.jsxs)(a.BJ,{space:3,paddingTop:1,children:[n,d]})}),b[14]=n,b[15]=d,b[16]=c):c=b[16],b[17]!==_||b[18]!==y||b[19]!==I||b[20]!==j?(p={documentId:y,schemaType:j,rootDiff:I,isComparingCurrent:!0,FieldWrapper:s7,value:_,showFromValue:!0},b[17]=_,b[18]=y,b[19]=I,b[20]=j,b[21]=p):p=b[21],b[22]!==I||b[23]!==j?(h=(0,s.jsx)(a.az,{paddingY:1,children:(0,s.jsx)(m.Vki,{diff:I,schemaType:j})}),b[22]=I,b[23]=j,b[24]=h):h=b[24],b[25]!==p||b[26]!==h?(f=(0,s.jsx)(u.HU.Provider,{value:p,children:h}),b[25]=p,b[26]=h,b[27]=f):f=b[27],b[28]!==c||b[29]!==f?(x=(0,s.jsxs)(a.BJ,{space:2,marginBottom:3,children:[c,f]}),b[28]=c,b[29]=f,b[30]=x):x=b[30],x):null};function s4({showChanges:e}){let{documentId:t,schemaType:n,timelineError:i,value:r,formState:l}=tM(),[o,d]=(0,c.useState)(null),{events:u,revision:p,sinceRevision:h,getChangesList:f}=(0,m.LJN)(),x=!p?.revisionId,g=(0,c.useMemo)(()=>f(),[f]),{diff:y,loading:v,error:_}=(0,j.J)(g,s2),{t:w}=(0,m.Bdt)("studio"),S=(0,c.useMemo)(()=>({documentId:t,schemaType:n,FieldWrapper:e=>e.path.length>0?(0,s.jsx)(m.uD1,{...e}):e.children,rootDiff:y,isComparingCurrent:x&&!l?.readOnly,value:r,showFromValue:!0}),[y,t,x,l?.readOnly,n,r]),[k,C]=(0,c.useMemo)(()=>u?[u.find(e=>e.id===h?.revisionId)||null,u.find(e=>e.id===p?.revisionId)||u[0]]:[null,null],[u,p?.revisionId,h?.revisionId]),I=(0,c.useMemo)(()=>C?u.slice(u.indexOf(C)+1).map(e=>"parentId"in C&&"parentId"in e&&e.parentId===C.parentId||"parentId"in e&&C.id===e.parentId?{...e,parentId:void 0}:e):u.slice(1),[u,C]);return u.length?(0,s.jsxs)(a.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,s.jsxs)(a.az,{padding:3,style:{position:"relative"},children:[(0,s.jsxs)(s0,{paddingX:2,paddingBottom:2,children:[(0,s.jsx)(a.EY,{size:1,muted:!0,children:w("changes.inspector.from-label")}),(0,s.jsx)(sq,{event:k||null,events:I,mode:"since",placement:"bottom-start"}),(0,s.jsx)(a.EY,{size:1,muted:!0,children:w("changes.inspector.to-label")}),(0,s.jsx)(sq,{event:C||null,events:u,mode:"rev",placement:"bottom-end"})]}),v&&(0,s.jsx)(b.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsxs)(s1,{justify:"center",align:"center",gap:2,children:[(0,s.jsx)(a.EY,{muted:!0,size:0,children:w("changes.loading-changes")}),(0,s.jsx)(a.y$,{size:0})]})})]}),(0,s.jsx)(a.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(a.EZ,{element:o,children:(0,s.jsx)(sX,{"data-ui":"Scroller",ref:d,children:(0,s.jsx)(a.az,{flex:1,paddingX:3,height:"fill",children:e&&(0,s.jsx)(s5,{documentContext:S,error:i||_,loading:p?.loading||h?.loading||!1,schemaType:n,sameRevisionSelected:k?.id===C?.id,sinceEvent:k})})})})})]}):(0,s.jsx)(a.az,{paddingX:2,children:(0,s.jsxs)(a.BJ,{padding:3,space:3,children:[(0,s.jsx)(a.EY,{size:1,weight:"medium",children:w("timeline.error.no-document-history-title")}),(0,s.jsx)(a.EY,{muted:!0,size:1,children:w("timeline.error.no-document-history-description")})]})})}function s5(e){let t,n,i=(0,o.c)(15),{error:r,documentContext:l,loading:d,schemaType:c,sameRevisionSelected:p,sinceEvent:h}=e;if(r){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s3,{}),i[0]=e):e=i[0],i[1]!==r||i[2]!==h?.type?(t=h?.type!=="historyCleared"&&(0,s.jsx)(m.isY,{error:r}),i[1]=r,i[2]=h?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,s.jsxs)(s.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(d){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.gd4,{showText:!0}),i[6]=e):e=i[6],e}if(p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s6,{}),i[7]=e):e=i[7],e}if(!l.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(b.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsx)(m.J7,{})}),i[8]=e):e=i[8],e}return i[9]!==l.rootDiff||i[10]!==c?(t=(0,s.jsx)(a.az,{paddingY:1,children:(0,s.jsx)(m.Vki,{diff:l.rootDiff,schemaType:c})}),i[9]=l.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==l||i[13]!==t?(n=(0,s.jsx)(u.HU.Provider,{value:l,children:t}),i[12]=l,i[13]=t,i[14]=n):n=i[14],n}function s6(){let e,t,n,i,r,l,d,c=(0,o.c)(12),{t:u}=(0,m.Bdt)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(r=(0,s.jsx)(a.EY,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=r):r=c[6],c[7]!==u?(l=(0,s.jsx)(a.EY,{as:"p",size:1,muted:!0,children:(0,s.jsx)(m.HTc,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=l):l=c[8],c[9]!==r||c[10]!==l?(d=(0,s.jsx)(b.P.div,{animate:e,initial:t,transition:n,children:(0,s.jsxs)(a.BJ,{space:3,paddingTop:2,children:[r,l]})}),c[9]=r,c[10]=l,c[11]=d):d=c[11],d}function s7(e){return e.children}let s8=(0,x.I4)(m.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function s9({showList:e}){let[t,n]=(0,c.useState)(null),[i,r]=(0,c.useState)(0),{setTimelineRange:l}=tM(),o=(0,c.useCallback)(e=>{!i&&e&&(r(e.clientHeight?e.clientHeight-1:0),n(e))},[i]),{events:u,nextCursor:p,loading:h,error:f,revision:x,loadMoreEvents:g,findRangeForRevision:b,expandEvent:y}=(0,m.LJN)(),{t:j}=(0,m.Bdt)("studio"),v=(0,d.dj)(),_=(0,c.useCallback)(e=>{try{if((0,m.zOx)(e)||(0,m.GDb)(e)||(0,m.ayN)(e)||(0,m.Bkf)(e)||(0,m.azN)(e))return void console.error("Event is not selectable");let[t,n]=b(e.id);l(t,n)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:j("timeline.error.unable-to-load-revision")})}},[j,v,l,b]),w=h&&!u.length;return(0,s.jsx)(a.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(a.Zp,{flex:1,padding:2,paddingTop:0,children:f?(0,s.jsx)(i7,{}):(0,s.jsx)(a.EZ,{element:t,children:(0,s.jsxs)(s8,{"data-ui":"Scroller",ref:o,children:[i&&e&&!w?(0,s.jsx)(sU,{events:u,fetchEventChildren:y,hasMoreEvents:!!p,selectedEventId:x?.revisionId||u[0]?.id,onLoadMore:g,onSelect:_,listMaxHeight:`${i}px`}):null,h&&(0,s.jsx)(m.gd4,{})]})})})})}let oe=(0,x.I4)(m.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function ot({showList:e}){let{timelineError:t,setTimelineRange:n,timelineStore:i}=tM(),{selectedReleaseId:r}=(0,m.QO2)(),[l,o]=(0,c.useState)(null),[u,p]=(0,c.useState)(0),h=(0,c.useCallback)(e=>{e?.clientHeight&&(p(e.clientHeight-1),o(e))},[]),f=(0,m.SfM)(i,e=>e.chunks),x=(0,m.SfM)(i,e=>e.realRevChunk),g=(0,m.SfM)(i,e=>e.hasMoreChunks),b=(0,m.SfM)(i,e=>e.isLoading),{t:y}=(0,m.Bdt)("studio"),j=(0,d.dj)(),v=(0,c.useCallback)(e=>{try{let[t,r]=i?.findRangeForRev(e)||[null,null];n(t,r)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[n,y,i,j]),_=(0,c.useCallback)(()=>{b||i?.loadMore()},[b,i]);return(0,s.jsx)(a.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(a.Zp,{flex:1,padding:2,paddingTop:0,children:t||r?(0,s.jsx)(i7,{versionError:!!r}):(0,s.jsx)(a.EZ,{element:l,children:(0,s.jsx)(oe,{"data-ui":"Scroller",ref:h,children:u&&e?(0,s.jsx)(i6,{chunks:f,hasMoreChunks:g,lastChunk:x,onLoadMore:_,onSelect:v,listMaxHeight:`${u}px`}):null})})})})}let on=(0,x.I4)(a.so)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,oi=["history","review"],or={error:p.YZv,warning:p.sAQ,info:p.YzR},ol={error:"critical",warning:"caution",info:"primary"};function os(e){let t,n,i,r,d=(0,o.c)(17),{marker:u,onOpen:p,schemaType:m,value:h}=e;d[0]!==u.path||d[1]!==p?(t=()=>p(u.path),d[0]=u.path,d[1]=p,d[2]=t):t=d[2];let f=t,[x,g]=(0,c.useState)(null),b=or[u.level];return d[3]!==x?(n=x&&(0,s.jsx)(a.Zp,{padding:3,radius:2,tone:"critical",children:(0,s.jsx)(a.EY,{size:1,children:x.error.message})}),d[3]=x,d[4]=n):n=d[4],d[5]!==b||d[6]!==x||d[7]!==f||d[8]!==u.level||d[9]!==u.message||d[10]!==u.path||d[11]!==m||d[12]!==h?(i=!x&&(0,s.jsx)(a.Zp,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:ol[u.level],children:(0,s.jsxs)(a.so,{align:"flex-start",gap:3,children:[(0,s.jsx)(a.az,{flex:"none",children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(b,{})})}),(0,s.jsxs)(a.BJ,{flex:1,space:2,children:[(0,s.jsx)(oo,{path:u.path,schemaType:m,value:h}),(0,s.jsx)(a.EY,{muted:!0,size:1,children:u.message})]})]})}),d[5]=b,d[6]=x,d[7]=f,d[8]=u.level,d[9]=u.message,d[10]=u.path,d[11]=m,d[12]=h,d[13]=i):i=d[13],d[14]!==n||d[15]!==i?(r=(0,s.jsxs)(l.tH,{onCatch:g,children:[n,i]}),d[14]=n,d[15]=i,d[16]=r):r=d[16],r}function oo(e){let{path:t,schemaType:n,value:i}=e,r=(0,c.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,r=[],l=n,s=i;for(let e of t){if("string"==typeof e){if(!(0,m.u4i)(s)&&void 0!==s)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==l.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);s=s?.[e];let t=l.fields.find(t=>t.name===e);if(!t)return r.push({name:e}),r;l=t.type,r.push(l);continue}if("number"==typeof e){if(!(0,m.cyL)(s)&&void 0!==s)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==l.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);s=s?.[e];let t=l.of.find(e=>"string"==typeof s?"string"===e.jsonType:"number"==typeof s?"number"===e.jsonType:"boolean"==typeof s?"boolean"===e.jsonType:!!(0,m.u4i)(s)&&e.name===s?._type);if(!t)throw Error(`Item type not found: [${e}]`);l=t,r.push(l);continue}if((0,m.u4i)(e)&&e._key){if(typeof s>"u")return r;if(!(0,m.cyL)(s))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==l.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(s=(s??[]).find(t=>(0,m.u4i)(t)&&t._key===e._key))>"u")return r;if(!(0,m.u4i)(s))throw Error(`Array item not found: [_key == ${e._key}]`);let t=l.of.find(e=>(0,m.u4i)(s)&&e.name===s?._type);if(!t)throw Error(`Array item type not found: .${s?._type}`);l=t,r.push(l);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return r}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return r?.length?(0,s.jsx)(a.EY,{size:1,children:r.map((e,t)=>(0,s.jsxs)(c.Fragment,{children:[t>0&&(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,s.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let oa={},od=v.wE.create("/",[v.wE.intents("/intent"),v.wE.create("/edit/:type/:editDocumentId",[v.wE.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),v.wE.create({path:"/:panes",children:[v.wE.create("/:action",v.wE.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,r]=n.match(oc)||[];if(!e){n=n.slice(1);continue}let l=r&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(r);t.push({id:i,payload:l}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(","),i={id:t,params:oa,payload:void 0};return n.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,v.fA)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},i)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{..._(t.params,ou),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(om).join("|")).map(encodeURIComponent).join(";")}}}})]),oc=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,ou=["view","since","rev","inspect","comment"],op=Boolean;function om(e,t,n){let{payload:i,params:r={},id:l}=e,[s]=n,o=e===s,a=0!==t&&l===s.id,d=typeof i>"u"?void 0:(0,v.nk)(i),c=Object.entries(r).filter(e=>{let[t,n]=e;return!!n&&(!!o||!(n===s.params?.[t]&&!ou.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":l].concat([c.length>0&&c,d].filter(op).flat()).join(",")||","}let oh=[ib,ij,ia,ic,is,iu],of=[sT],ox=[{name:"sanity/structure/validation",component:function(e){let t,n,i,r,l,d,c,u=(0,o.c)(23),{onClose:p}=e,{onFocus:h,onPathOpen:f,schemaType:x,validation:g,value:b,editState:y}=tM(),{t:j}=(0,m.Bdt)("validation");u[0]!==h||u[1]!==f?(t=e=>{f(e),h(e)},u[0]=h,u[1]=f,u[2]=t):t=u[2];let v=t;u[3]!==y?(n=y&&y.version&&(0,m.YW1)(y.version),u[3]=y,u[4]=n):n=u[4];let _=n;return u[5]!==j?(i=j("panel.close-button-aria-label"),u[5]=j,u[6]=i):i=u[6],u[7]!==j?(r=j("panel.title"),u[7]=j,u[8]=r):r=u[8],u[9]!==p||u[10]!==i||u[11]!==r?(l=(0,s.jsx)(tG,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:r}),u[9]=p,u[10]=i,u[11]=r,u[12]=l):l=u[12],u[13]!==v||u[14]!==_||u[15]!==x||u[16]!==j||u[17]!==g||u[18]!==b?(d=(0,s.jsx)(a.Zp,{flex:1,overflow:"auto",padding:3,children:_?(0,s.jsx)(a.az,{padding:2,children:(0,s.jsx)(a.EY,{muted:!0,size:1,children:j("panel.unpublish-message")})}):(0,s.jsxs)(s.Fragment,{children:[0===g.length&&(0,s.jsx)(a.az,{padding:2,children:(0,s.jsx)(a.EY,{muted:!0,size:1,children:j("panel.no-errors-message")})}),g.length>0&&(0,s.jsx)(a.BJ,{space:2,children:g.map((e,t)=>(0,s.jsx)(os,{marker:e,onOpen:v,schemaType:x,value:b},t))})]})}),u[13]=v,u[14]=_,u[15]=x,u[16]=j,u[17]=g,u[18]=b,u[19]=d):d=u[19],u[20]!==l||u[21]!==d?(c=(0,s.jsxs)(a.so,{direction:"column",height:"fill",overflow:"hidden",children:[l,d]}),u[20]=l,u[21]=d,u[22]=c):c=u[22],c},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,m.Bdt)("validation"),{selectedReleaseId:r}=(0,m.QO2)(),{validation:l}=(0,m.dWw)(t,n,r),{value:s}=tM(),o=(0,c.useMemo)(()=>l.map(e=>({level:e.level,message:e.message,path:e.path})),[l]),a=o.some(h.Ah),d=o.some(h.ci),u=(0,m.YW1)(s),f=(0,c.useMemo)(()=>a?p.YZv:d?p.sAQ:p.Dee,[a,d]),x=(0,c.useMemo)(()=>a?"critical":d?"caution":"positive",[a,d]);return{hidden:0===o.length||u,icon:f,title:i("panel.title"),tone:x,showAsAction:!0}}},{name:tN,useMenuItem:()=>{let{features:e}=tO(),{t}=(0,m.Bdt)();return{hidden:!e.reviewChanges,icon:p.G2W,title:t("changes.title")}},component:function(e){let t,n,i,u,h,f,x,g,b,y,j,v,_,w,S,k,C,I,E,z,T,A,P,R,M,D,$,B=(0,o.c)(72),{params:Y,setParams:L}=tB(),O=(0,m.For)(),[H,V]=(0,c.useState)(null),{t:Z}=(0,m.Bdt)(r.Z7),N=Y?.inspect===tN,{selectedPerspective:F}=(0,m.QO2)();B[0]!==Y?(t=($=Y?.changesInspectorTab)&&oi.includes($)?Y.changesInspectorTab:oi[0],B[0]=Y,B[1]=t):t=B[1];let K=t;B[2]!==Y||B[3]!==L?(n=e=>L({...Y,changesInspectorTab:e,since:"history"===e?void 0:Y?.since}),B[2]=Y,B[3]=L,B[4]=n):n=B[4];let W=n;B[5]!==F||B[6]!==Z?(i=(0,m.Jrl)(F)?F.metadata.title:Z("drafts"===F?"compare-versions.status.draft":"compare-versions.status.published"),B[5]=F,B[6]=Z,B[7]=i):i=B[7];let J=i,U=N?"":void 0;B[8]!==Z?(u=Z("changes.tab.history"),B[8]=Z,B[9]=u):u=B[9],B[10]!==W?(h=()=>W("history"),B[10]=W,B[11]=h):h=B[11];let G="history"===K;B[12]!==u||B[13]!==h||B[14]!==G?(f=(0,s.jsx)(l.oz,{"aria-controls":"history-panel",id:"history-tab",label:u,onClick:h,selected:G}),B[12]=u,B[13]=h,B[14]=G,B[15]=f):f=B[15],B[16]!==Z?(x=Z("changes.tab.review-changes"),B[16]=Z,B[17]=x):x=B[17],B[18]!==W?(g=()=>W("review"),B[18]=W,B[19]=g):g=B[19];let Q="review"===K;B[20]!==Q||B[21]!==x||B[22]!==g?(b=(0,s.jsx)(l.oz,{"aria-controls":"review-changes-panel",id:"changes-tab",label:x,onClick:g,selected:Q}),B[20]=Q,B[21]=x,B[22]=g,B[23]=b):b=B[23],B[24]!==b||B[25]!==f?(y=(0,s.jsxs)(a.wb,{space:1,flex:1,children:[f,b]}),B[24]=b,B[25]=f,B[26]=y):y=B[26],B[27]!==Z?(j=Z("changes.action.close-label"),B[27]=Z,B[28]=j):j=B[28];let q=e.onClose;B[29]!==Z?(v=Z("document-inspector.close-button.tooltip"),B[29]=Z,B[30]=v):v=B[30],B[31]!==v?(_={content:v},B[31]=v,B[32]=_):_=B[32],B[33]!==e.onClose||B[34]!==j||B[35]!==_?(w=(0,s.jsx)(l.$n,{"aria-label":j,icon:p.USm,mode:"bleed",onClick:q,tooltipProps:_}),B[33]=e.onClose,B[34]=j,B[35]=_,B[36]=w):w=B[36],B[37]!==y||B[38]!==w?(S=(0,s.jsx)(a.Zp,{paddingBottom:1,children:(0,s.jsxs)(a.so,{align:"center",padding:3,gap:2,children:[y,w]})}),B[37]=y,B[38]=w,B[39]=S):S=B[39],B[40]!==Z?(k=(0,s.jsx)(a.az,{flex:1,padding:1,children:(0,s.jsx)(a.EY,{size:1,children:(0,s.jsx)(m.HTc,{t:Z,i18nKey:"changes.banner.tooltip"})})}),B[40]=Z,B[41]=k):k=B[41],B[42]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsx)(a.EY,{size:0,muted:!0,children:(0,s.jsx)(p.YzR,{fontSize:1})}),B[42]=C):C=B[42],B[43]!==H||B[44]!==k?(I=(0,s.jsx)(l.m_,{portal:!0,placement:"bottom-end",boundaryElement:H,content:k,children:C}),B[43]=H,B[44]=k,B[45]=I):I=B[45],B[46]!==J?(E={perspective:J},B[46]=J,B[47]=E):E=B[47],B[48]!==Z||B[49]!==E?(z=(0,s.jsx)(a.EY,{size:0,muted:!0,children:(0,s.jsx)(m.HTc,{t:Z,values:E,i18nKey:"changes.banner.description"})}),B[48]=Z,B[49]=E,B[50]=z):z=B[50],B[51]!==I||B[52]!==z?(T=(0,s.jsx)(a.Zp,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,s.jsxs)(a.so,{gap:2,align:"flex-start",children:[I,z]})}),B[51]=I,B[52]=z,B[53]=T):T=B[53];let X="history"!==K;B[54]!==K||B[55]!==O.beta?.eventsAPI?.documents?(A=O.beta?.eventsAPI?.documents?(0,s.jsx)(s9,{showList:"history"===K}):(0,s.jsx)(ot,{showList:"history"===K}),B[54]=K,B[55]=O.beta?.eventsAPI?.documents,B[56]=A):A=B[56],B[57]!==X||B[58]!==A?(P=(0,s.jsx)(d.Kp,{"aria-labelledby":"history-tab",height:"fill",hidden:X,id:"history-panel",children:A}),B[57]=X,B[58]=A,B[59]=P):P=B[59];let ee="review"!==K;return B[60]!==K||B[61]!==O.beta?.eventsAPI?.documents?(R=O.beta?.eventsAPI?.documents?(0,s.jsx)(s.Fragment,{children:"review"===K?(0,s.jsx)(s4,{showChanges:"review"===K}):null}):(0,s.jsx)(s$,{showChanges:"review"===K}),B[60]=K,B[61]=O.beta?.eventsAPI?.documents,B[62]=R):R=B[62],B[63]!==ee||B[64]!==R?(M=(0,s.jsx)(d.Kp,{"aria-labelledby":"review-tab",hidden:ee,id:"review-panel",height:"fill",children:R}),B[63]=ee,B[64]=R,B[65]=M):M=B[65],B[66]!==S||B[67]!==T||B[68]!==P||B[69]!==U||B[70]!==M?(D=(0,s.jsxs)(on,{direction:"column",padding:0,height:"fill","data-ready":U,ref:V,children:[S,T,P,M]}),B[66]=S,B[67]=T,B[68]=P,B[69]=U,B[70]=M,B[71]=D):D=B[71],D},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],og=(0,m.bzQ)(e=>{let t=e?.icon||p.tN2;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...oh])),badges:e=>Array.from(new Set([...e,...of])),inspectors:e=>Array.from(new Set([...e,...ox]))},tools:[{name:e?.name||"structure",title:e?.title||"Structure",icon:t,component:(0,c.lazy)(()=>n.e(5524).then(n.bind(n,65524))),canHandleIntent:(e,t)=>"create"===e?function(e){return"type"in e&&(!("template"in e)||{template:!0})}(t):"edit"===e&&function(e){return"id"in e&&(!("mode"in e)||{mode:"structure"===e.mode})}(t),getIntentState:sR,controlsDocumentTitle:!0,options:e,router:od,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[r.uQ]}}});var ob=Object.freeze({__proto__:null,default:r1}),oy=Object.freeze({__proto__:null,default:sz})}}]);