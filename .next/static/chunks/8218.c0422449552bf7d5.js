"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8218],{58218:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var o=t(61332),a=t(30926);let c=(0,a.createServerReference)("7fbfd1f38e299200d6ad8abb8a086cb1fcb53a518f",a.callServer,void 0,a.findSourceMapURL,"setPerspectiveCookie");var l=t(77525),n=t(20063),s=t(12115),i=t(88106),f=t(99652);function p(e){let{projectId:r,dataset:t,draftModeEnabled:a,draftModePerspective:p}=e,u=(0,n.useRouter)();(0,s.useEffect)(()=>{(0,f.lc)(r,t)},[t,r]);let d=(0,i.J)((e,r)=>{a&&e!==p&&c(e).then(()=>{r.aborted||u.refresh()}).catch(e=>console.error("Failed to set the preview perspective cookie",e))});return(0,s.useEffect)(()=>{let e,r=(0,o.RM)({name:"loaders",connectTo:"presentation"},(0,o.Uc)().provide({actors:(0,l.jF)()}));r.on("loader/perspective",r=>{e?.abort(),e=new AbortController,d(r.perspective,e.signal)});let t=r.start();return(0,f.El)(r),()=>{t()}},[]),null}p.displayName="PresentationComlink"}}]);